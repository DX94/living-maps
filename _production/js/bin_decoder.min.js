/*! living-maps 30-05-2013 */
function ArrayBufferSer(a){this.buffer=a,this.offset=0,this.sections=this.readArray(),this.headers=this.sections[0],this._headersIndex={};for(var b=0;b<this.headers.length;++b)this._headersIndex[this.headers[b]]=b;this.sections.length>1&&(this.length=this.sections[1].length)}ArrayBufferSer.INT8=1,ArrayBufferSer.UINT8=2,ArrayBufferSer.UINT8_CLAMP=3,ArrayBufferSer.INT16=4,ArrayBufferSer.UINT16=5,ArrayBufferSer.INT32=6,ArrayBufferSer.UINT32=7,ArrayBufferSer.FLOAT32=8,ArrayBufferSer.STRING=10,ArrayBufferSer.BUFFER=11,this.Uint8ClampedArray="undefined"==typeof this.Uint8ClampedArray?Uint8Array:Uint8ClampedArray,ArrayBufferSer.prototype={sizes:[0/0,1,1,1,2,2,4,4,4,8],types:[null,Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],get:function(a){var b=this._headersIndex[a];return void 0!=b?this.sections[b+1]:void 0},_paddingFor:function(a,b){var c=this.sizes[b];if(c){var d=a%c;return 0==d?0:c-d}return 0},readUInt32:function(){var a=new DataView(this.buffer).getUint32(this.offset);return this.offset+=4,a},readArray:function(){var a=this.readUInt32(),b=this.readUInt32();if(a<ArrayBufferSer.STRING){var c=new this.types[a](this.buffer,this.offset,b/this.sizes[a]);return this.offset+=b,c}if(a==ArrayBufferSer.STRING){for(var d=this.offset+b,e=[];this.offset<d;){this.offset+=this._paddingFor(this.offset,ArrayBufferSer.INT32);var f=this.readArray();if(f){for(var g="",h=0;h<f.length;++h)g+=String.fromCharCode(f[h]);e.push(g)}}return e}if(a==ArrayBufferSer.BUFFER){for(var e=[],d=this.offset+b;this.offset<d;)this.offset+=this._paddingFor(this.offset,ArrayBufferSer.INT32),e.push(this.readArray());return e}}};