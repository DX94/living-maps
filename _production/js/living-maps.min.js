/*! living-maps 03-06-2013 */
function graph(a,b,c,d){var e,f=document.createElement("canvas"),g=0,h=a.length;for(e=0;h>e;++e)g=Math.max(a[e],g);for(e=0;h>e;++e)a[e]/=g;f.width=b,f.height=c;var i=b/h,j=f.getContext("2d");for(j.fillStyle=d,e=0;h>e;++e){var k=c*a[e]>>0;j.fillRect(e*i,c-k,i,c)}return f}function Navigation(a,b){this.$el=a,this.$dropdown_link=$("#dropdown_link"),this.$dropdown_nav=$("#dropdown_nav"),this.isEnabled=!1,this.my="top right",this.at="bottom right",this.y=-20,this.city=b,this.initialize()}function Slider(a,b){var c=this;this.$el=a,this.$slider_container=$("#slider"),this.options={timeMin:b.timeMin,timeRange:b.timeRange},c.initialize()}function Mamufas(a,b,c){this.$el=a,this.$map_container=$("section.map"),this.$map=$("#map"),this.$mamufas=$("#mamufas"),this.$content=$("#content"),this.$components=$(".components"),this.$bottom_nav=$("#bottom_nav"),this.$top_nav=$("#top_nav"),this.$about=$("#about"),this.$about_link=$(".about_link"),this.$contest=$("#contest"),this.$contest_link=$(".contest_link"),this.$logo=$("#logo"),this.$layers=$("#layers"),this.isEnabled=!1,this.spin_opts={lines:8,length:0,width:6,radius:9,corners:1,rotate:0,direction:1,color:"white",speed:.9,trail:53,shadow:!1,hwaccel:!1,className:"spinner",zIndex:2e9,top:15,left:15},this.city=c,this.map=b,this.initialize()}function TimeBasedData(a){if(!a.table)throw"you should set options.table";a.user=a.user||"pulsemaps",a.time_column=a.time_column||"time",a.columns=a.columns||["*"],this.options=a,this.options.url="http://"+this.options.user+".cartodb.com/api/v2/sql",this.time_index={}}function Map(a,b){this.el=a,this.options=b,this.isDragging=!1,this.initialize()}var dat=dat||{};dat.gui=dat.gui||{},dat.utils=dat.utils||{},dat.controllers=dat.controllers||{},dat.dom=dat.dom||{},dat.color=dat.color||{},dat.utils.css=function(){return{load:function(a,b){var b=b||document,c=b.createElement("link");c.type="text/css",c.rel="stylesheet",c.href=a,b.getElementsByTagName("head")[0].appendChild(c)},inject:function(a,b){var b=b||document,c=document.createElement("style");c.type="text/css",c.innerHTML=a,b.getElementsByTagName("head")[0].appendChild(c)}}}(),dat.utils.common=function(){var a=Array.prototype.forEach,b=Array.prototype.slice;return{BREAK:{},extend:function(a){return this.each(b.call(arguments,1),function(b){for(var c in b)this.isUndefined(b[c])||(a[c]=b[c])},this),a},defaults:function(a){return this.each(b.call(arguments,1),function(b){for(var c in b)this.isUndefined(a[c])&&(a[c]=b[c])},this),a},compose:function(){var a=b.call(arguments);return function(){for(var c=b.call(arguments),d=a.length-1;d>=0;d--)c=[a[d].apply(this,c)];return c[0]}},each:function(b,c,d){if(a&&b.forEach===a)b.forEach(c,d);else if(b.length===b.length+0)for(var e=0,f=b.length;f>e&&!(e in b&&c.call(d,b[e],e)===this.BREAK);e++);else for(e in b)if(c.call(d,b[e],e)===this.BREAK)break},defer:function(a){setTimeout(a,0)},toArray:function(a){return a.toArray?a.toArray():b.call(a)},isUndefined:function(a){return void 0===a},isNull:function(a){return null===a},isNaN:function(a){return a!==a},isArray:Array.isArray||function(a){return a.constructor===Array},isObject:function(a){return a===Object(a)},isNumber:function(a){return a===a+0},isString:function(a){return a===a+""},isBoolean:function(a){return a===!1||a===!0},isFunction:function(a){return"[object Function]"===Object.prototype.toString.call(a)}}}(),dat.controllers.Controller=function(a){var b=function(a,b){this.initialValue=a[b],this.domElement=document.createElement("div"),this.object=a,this.property=b,this.__onFinishChange=this.__onChange=void 0};return a.extend(b.prototype,{onChange:function(a){return this.__onChange=a,this},onFinishChange:function(a){return this.__onFinishChange=a,this},setValue:function(a){return this.object[this.property]=a,this.__onChange&&this.__onChange.call(this,a),this.updateDisplay(),this},getValue:function(){return this.object[this.property]},updateDisplay:function(){return this},isModified:function(){return this.initialValue!==this.getValue()}}),b}(dat.utils.common),dat.dom.dom=function(a){function b(b){return"0"===b||a.isUndefined(b)?0:(b=b.match(d),a.isNull(b)?0:parseFloat(b[1]))}var c={};a.each({HTMLEvents:["change"],MouseEvents:["click","mousemove","mousedown","mouseup","mouseover"],KeyboardEvents:["keydown"]},function(b,d){a.each(b,function(a){c[a]=d})});var d=/(\d+(\.\d+)?)px/,e={makeSelectable:function(a,b){void 0!==a&&void 0!==a.style&&(a.onselectstart=b?function(){return!1}:function(){},a.style.MozUserSelect=b?"auto":"none",a.style.KhtmlUserSelect=b?"auto":"none",a.unselectable=b?"on":"off")},makeFullscreen:function(b,c,d){a.isUndefined(c)&&(c=!0),a.isUndefined(d)&&(d=!0),b.style.position="absolute",c&&(b.style.left=0,b.style.right=0),d&&(b.style.top=0,b.style.bottom=0)},fakeEvent:function(b,d,e,f){var e=e||{},g=c[d];if(!g)throw Error("Event type "+d+" not supported.");var h=document.createEvent(g);switch(g){case"MouseEvents":h.initMouseEvent(d,e.bubbles||!1,e.cancelable||!0,window,e.clickCount||1,0,0,e.x||e.clientX||0,e.y||e.clientY||0,!1,!1,!1,!1,0,null);break;case"KeyboardEvents":g=h.initKeyboardEvent||h.initKeyEvent,a.defaults(e,{cancelable:!0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,keyCode:void 0,charCode:void 0}),g(d,e.bubbles||!1,e.cancelable,window,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,e.keyCode,e.charCode);break;default:h.initEvent(d,e.bubbles||!1,e.cancelable||!0)}a.defaults(h,f),b.dispatchEvent(h)},bind:function(a,b,c,d){return a.addEventListener?a.addEventListener(b,c,d||!1):a.attachEvent&&a.attachEvent("on"+b,c),e},unbind:function(a,b,c,d){return a.removeEventListener?a.removeEventListener(b,c,d||!1):a.detachEvent&&a.detachEvent("on"+b,c),e},addClass:function(a,b){if(void 0===a.className)a.className=b;else if(a.className!==b){var c=a.className.split(/ +/);-1==c.indexOf(b)&&(c.push(b),a.className=c.join(" ").replace(/^\s+/,"").replace(/\s+$/,""))}return e},removeClass:function(a,b){if(b){if(void 0!==a.className)if(a.className===b)a.removeAttribute("class");else{var c=a.className.split(/ +/),d=c.indexOf(b);-1!=d&&(c.splice(d,1),a.className=c.join(" "))}}else a.className=void 0;return e},hasClass:function(a,b){return RegExp("(?:^|\\s+)"+b+"(?:\\s+|$)").test(a.className)||!1},getWidth:function(a){return a=getComputedStyle(a),b(a["border-left-width"])+b(a["border-right-width"])+b(a["padding-left"])+b(a["padding-right"])+b(a.width)},getHeight:function(a){return a=getComputedStyle(a),b(a["border-top-width"])+b(a["border-bottom-width"])+b(a["padding-top"])+b(a["padding-bottom"])+b(a.height)},getOffset:function(a){var b={left:0,top:0};if(a.offsetParent)do b.left+=a.offsetLeft,b.top+=a.offsetTop;while(a=a.offsetParent);return b},isActive:function(a){return a===document.activeElement&&(a.type||a.href)}};return e}(dat.utils.common),dat.controllers.OptionController=function(a,b,c){var d=function(a,e,f){d.superclass.call(this,a,e);var g=this;if(this.__select=document.createElement("select"),c.isArray(f)){var h={};c.each(f,function(a){h[a]=a}),f=h}c.each(f,function(a,b){var c=document.createElement("option");c.innerHTML=b,c.setAttribute("value",a),g.__select.appendChild(c)}),this.updateDisplay(),b.bind(this.__select,"change",function(){g.setValue(this.options[this.selectedIndex].value)}),this.domElement.appendChild(this.__select)};return d.superclass=a,c.extend(d.prototype,a.prototype,{setValue:function(a){return a=d.superclass.prototype.setValue.call(this,a),this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),a},updateDisplay:function(){return this.__select.value=this.getValue(),d.superclass.prototype.updateDisplay.call(this)}}),d}(dat.controllers.Controller,dat.dom.dom,dat.utils.common),dat.controllers.NumberController=function(a,b){var c=function(a,d,e){c.superclass.call(this,a,d),e=e||{},this.__min=e.min,this.__max=e.max,this.__step=e.step,a=this.__impliedStep=b.isUndefined(this.__step)?0==this.initialValue?1:Math.pow(10,Math.floor(Math.log(this.initialValue)/Math.LN10))/10:this.__step,a=a.toString(),this.__precision=a.indexOf(".")>-1?a.length-a.indexOf(".")-1:0};return c.superclass=a,b.extend(c.prototype,a.prototype,{setValue:function(a){return void 0!==this.__min&&a<this.__min?a=this.__min:void 0!==this.__max&&a>this.__max&&(a=this.__max),void 0!==this.__step&&0!=a%this.__step&&(a=Math.round(a/this.__step)*this.__step),c.superclass.prototype.setValue.call(this,a)},min:function(a){return this.__min=a,this},max:function(a){return this.__max=a,this},step:function(a){return this.__step=a,this}}),c}(dat.controllers.Controller,dat.utils.common),dat.controllers.NumberControllerBox=function(a,b,c){var d=function(a,e,f){function g(){var a=parseFloat(k.__input.value);c.isNaN(a)||k.setValue(a)}function h(a){var b=j-a.clientY;k.setValue(k.getValue()+b*k.__impliedStep),j=a.clientY}function i(){b.unbind(window,"mousemove",h),b.unbind(window,"mouseup",i)}this.__truncationSuspended=!1,d.superclass.call(this,a,e,f);var j,k=this;this.__input=document.createElement("input"),this.__input.setAttribute("type","text"),b.bind(this.__input,"change",g),b.bind(this.__input,"blur",function(){g(),k.__onFinishChange&&k.__onFinishChange.call(k,k.getValue())}),b.bind(this.__input,"mousedown",function(a){b.bind(window,"mousemove",h),b.bind(window,"mouseup",i),j=a.clientY}),b.bind(this.__input,"keydown",function(a){13===a.keyCode&&(k.__truncationSuspended=!0,this.blur(),k.__truncationSuspended=!1)}),this.updateDisplay(),this.domElement.appendChild(this.__input)};return d.superclass=a,c.extend(d.prototype,a.prototype,{updateDisplay:function(){var a,b=this.__input;if(this.__truncationSuspended)a=this.getValue();else{a=this.getValue();var c=Math.pow(10,this.__precision);a=Math.round(a*c)/c}return b.value=a,d.superclass.prototype.updateDisplay.call(this)}}),d}(dat.controllers.NumberController,dat.dom.dom,dat.utils.common),dat.controllers.NumberControllerSlider=function(a,b,c,d,e){var f=function(a,c,d,e,g){function h(a){a.preventDefault();var c=b.getOffset(j.__background),d=b.getWidth(j.__background);return j.setValue(j.__min+(j.__max-j.__min)*((a.clientX-c.left)/(c.left+d-c.left))),!1}function i(){b.unbind(window,"mousemove",h),b.unbind(window,"mouseup",i),j.__onFinishChange&&j.__onFinishChange.call(j,j.getValue())}f.superclass.call(this,a,c,{min:d,max:e,step:g});var j=this;this.__background=document.createElement("div"),this.__foreground=document.createElement("div"),b.bind(this.__background,"mousedown",function(a){b.bind(window,"mousemove",h),b.bind(window,"mouseup",i),h(a)}),b.addClass(this.__background,"slider"),b.addClass(this.__foreground,"slider-fg"),this.updateDisplay(),this.__background.appendChild(this.__foreground),this.domElement.appendChild(this.__background)};return f.superclass=a,f.useDefaultStyles=function(){c.inject(e)},d.extend(f.prototype,a.prototype,{updateDisplay:function(){return this.__foreground.style.width=100*((this.getValue()-this.__min)/(this.__max-this.__min))+"%",f.superclass.prototype.updateDisplay.call(this)}}),f}(dat.controllers.NumberController,dat.dom.dom,dat.utils.css,dat.utils.common,".slider {\n  box-shadow: inset 0 2px 4px rgba(0,0,0,0.15);\n  height: 1em;\n  border-radius: 1em;\n  background-color: #eee;\n  padding: 0 0.5em;\n  overflow: hidden;\n}\n\n.slider-fg {\n  padding: 1px 0 2px 0;\n  background-color: #aaa;\n  height: 1em;\n  margin-left: -0.5em;\n  padding-right: 0.5em;\n  border-radius: 1em 0 0 1em;\n}\n\n.slider-fg:after {\n  display: inline-block;\n  border-radius: 1em;\n  background-color: #fff;\n  border:  1px solid #aaa;\n  content: '';\n  float: right;\n  margin-right: -1em;\n  margin-top: -1px;\n  height: 0.9em;\n  width: 0.9em;\n}"),dat.controllers.FunctionController=function(a,b,c){var d=function(a,c,e){d.superclass.call(this,a,c);var f=this;this.__button=document.createElement("div"),this.__button.innerHTML=void 0===e?"Fire":e,b.bind(this.__button,"click",function(a){return a.preventDefault(),f.fire(),!1}),b.addClass(this.__button,"button"),this.domElement.appendChild(this.__button)};return d.superclass=a,c.extend(d.prototype,a.prototype,{fire:function(){this.__onChange&&this.__onChange.call(this),this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.getValue().call(this.object)}}),d}(dat.controllers.Controller,dat.dom.dom,dat.utils.common),dat.controllers.BooleanController=function(a,b,c){var d=function(a,c){d.superclass.call(this,a,c);var e=this;this.__prev=this.getValue(),this.__checkbox=document.createElement("input"),this.__checkbox.setAttribute("type","checkbox"),b.bind(this.__checkbox,"change",function(){e.setValue(!e.__prev)},!1),this.domElement.appendChild(this.__checkbox),this.updateDisplay()};return d.superclass=a,c.extend(d.prototype,a.prototype,{setValue:function(a){return a=d.superclass.prototype.setValue.call(this,a),this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.__prev=this.getValue(),a},updateDisplay:function(){return this.getValue()===!0?(this.__checkbox.setAttribute("checked","checked"),this.__checkbox.checked=!0):this.__checkbox.checked=!1,d.superclass.prototype.updateDisplay.call(this)}}),d}(dat.controllers.Controller,dat.dom.dom,dat.utils.common),dat.color.toString=function(a){return function(b){if(1==b.a||a.isUndefined(b.a)){for(b=b.hex.toString(16);b.length<6;)b="0"+b;return"#"+b}return"rgba("+Math.round(b.r)+","+Math.round(b.g)+","+Math.round(b.b)+","+b.a+")"}}(dat.utils.common),dat.color.interpret=function(a,b){var c,d,e=[{litmus:b.isString,conversions:{THREE_CHAR_HEX:{read:function(a){return a=a.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i),null===a?!1:{space:"HEX",hex:parseInt("0x"+a[1].toString()+a[1].toString()+a[2].toString()+a[2].toString()+a[3].toString()+a[3].toString())}},write:a},SIX_CHAR_HEX:{read:function(a){return a=a.match(/^#([A-F0-9]{6})$/i),null===a?!1:{space:"HEX",hex:parseInt("0x"+a[1].toString())}},write:a},CSS_RGB:{read:function(a){return a=a.match(/^rgb\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/),null===a?!1:{space:"RGB",r:parseFloat(a[1]),g:parseFloat(a[2]),b:parseFloat(a[3])}},write:a},CSS_RGBA:{read:function(a){return a=a.match(/^rgba\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\,\s*(.+)\s*\)/),null===a?!1:{space:"RGB",r:parseFloat(a[1]),g:parseFloat(a[2]),b:parseFloat(a[3]),a:parseFloat(a[4])}},write:a}}},{litmus:b.isNumber,conversions:{HEX:{read:function(a){return{space:"HEX",hex:a,conversionName:"HEX"}},write:function(a){return a.hex}}}},{litmus:b.isArray,conversions:{RGB_ARRAY:{read:function(a){return 3!=a.length?!1:{space:"RGB",r:a[0],g:a[1],b:a[2]}},write:function(a){return[a.r,a.g,a.b]}},RGBA_ARRAY:{read:function(a){return 4!=a.length?!1:{space:"RGB",r:a[0],g:a[1],b:a[2],a:a[3]}},write:function(a){return[a.r,a.g,a.b,a.a]}}}},{litmus:b.isObject,conversions:{RGBA_OBJ:{read:function(a){return b.isNumber(a.r)&&b.isNumber(a.g)&&b.isNumber(a.b)&&b.isNumber(a.a)?{space:"RGB",r:a.r,g:a.g,b:a.b,a:a.a}:!1},write:function(a){return{r:a.r,g:a.g,b:a.b,a:a.a}}},RGB_OBJ:{read:function(a){return b.isNumber(a.r)&&b.isNumber(a.g)&&b.isNumber(a.b)?{space:"RGB",r:a.r,g:a.g,b:a.b}:!1},write:function(a){return{r:a.r,g:a.g,b:a.b}}},HSVA_OBJ:{read:function(a){return b.isNumber(a.h)&&b.isNumber(a.s)&&b.isNumber(a.v)&&b.isNumber(a.a)?{space:"HSV",h:a.h,s:a.s,v:a.v,a:a.a}:!1},write:function(a){return{h:a.h,s:a.s,v:a.v,a:a.a}}},HSV_OBJ:{read:function(a){return b.isNumber(a.h)&&b.isNumber(a.s)&&b.isNumber(a.v)?{space:"HSV",h:a.h,s:a.s,v:a.v}:!1},write:function(a){return{h:a.h,s:a.s,v:a.v}}}}}];return function(){d=!1;var a=arguments.length>1?b.toArray(arguments):arguments[0];return b.each(e,function(e){return e.litmus(a)?(b.each(e.conversions,function(e,f){return c=e.read(a),d===!1&&c!==!1?(d=c,c.conversionName=f,c.conversion=e,b.BREAK):void 0}),b.BREAK):void 0}),d}}(dat.color.toString,dat.utils.common),dat.GUI=dat.gui.GUI=function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){function p(a,b,c,f){if(void 0===b[c])throw Error("Object "+b+' has no property "'+c+'"');f.color?b=new k(b,c):(b=[b,c].concat(f.factoryArgs),b=d.apply(a,b)),f.before instanceof e&&(f.before=f.before.__li),s(a,b),n.addClass(b.domElement,"c"),c=document.createElement("span"),n.addClass(c,"property-name"),c.innerHTML=b.property;var g=document.createElement("div");return g.appendChild(c),g.appendChild(b.domElement),f=q(a,g,f.before),n.addClass(f,I.CLASS_CONTROLLER_ROW),n.addClass(f,typeof b.getValue()),r(a,f,b),a.__controllers.push(b),b}function q(a,b,c){var d=document.createElement("li");return b&&d.appendChild(b),c?a.__ul.insertBefore(d,params.before):a.__ul.appendChild(d),a.onResize(),d}function r(a,b,c){if(c.__li=b,c.__gui=a,o.extend(c,{options:function(b){return arguments.length>1?(c.remove(),p(a,c.object,c.property,{before:c.__li.nextElementSibling,factoryArgs:[o.toArray(arguments)]})):o.isArray(b)||o.isObject(b)?(c.remove(),p(a,c.object,c.property,{before:c.__li.nextElementSibling,factoryArgs:[b]})):void 0},name:function(a){return c.__li.firstElementChild.firstElementChild.innerHTML=a,c},listen:function(){return c.__gui.listen(c),c},remove:function(){return c.__gui.remove(c),c}}),c instanceof i){var d=new h(c.object,c.property,{min:c.__min,max:c.__max,step:c.__step});o.each(["updateDisplay","onChange","onFinishChange"],function(a){var b=c[a],e=d[a];c[a]=d[a]=function(){var a=Array.prototype.slice.call(arguments);return b.apply(c,a),e.apply(d,a)}}),n.addClass(b,"has-slider"),c.domElement.insertBefore(d.domElement,c.domElement.firstElementChild)}else if(c instanceof h){var e=function(b){return o.isNumber(c.__min)&&o.isNumber(c.__max)?(c.remove(),p(a,c.object,c.property,{before:c.__li.nextElementSibling,factoryArgs:[c.__min,c.__max,c.__step]})):b};c.min=o.compose(e,c.min),c.max=o.compose(e,c.max)}else c instanceof f?(n.bind(b,"click",function(){n.fakeEvent(c.__checkbox,"click")}),n.bind(c.__checkbox,"click",function(a){a.stopPropagation()})):c instanceof g?(n.bind(b,"click",function(){n.fakeEvent(c.__button,"click")}),n.bind(b,"mouseover",function(){n.addClass(c.__button,"hover")}),n.bind(b,"mouseout",function(){n.removeClass(c.__button,"hover")})):c instanceof k&&(n.addClass(b,"color"),c.updateDisplay=o.compose(function(a){return b.style.borderLeftColor=c.__color.toString(),a},c.updateDisplay),c.updateDisplay());c.setValue=o.compose(function(b){return a.getRoot().__preset_select&&c.isModified()&&y(a.getRoot(),!0),b},c.setValue)}function s(a,b){var c=a.getRoot(),d=c.__rememberedObjects.indexOf(b.object);if(-1!=d){var e=c.__rememberedObjectIndecesToControllers[d];if(void 0===e&&(e={},c.__rememberedObjectIndecesToControllers[d]=e),e[b.property]=b,c.load&&c.load.remembered){if(c=c.load.remembered,c[a.preset])c=c[a.preset];else{if(!c[B])return;c=c[B]}c[d]&&void 0!==c[d][b.property]&&(d=c[d][b.property],b.initialValue=d,b.setValue(d))}}}function t(a){var b=a.__save_row=document.createElement("li");n.addClass(a.domElement,"has-save"),a.__ul.insertBefore(b,a.__ul.firstChild),n.addClass(b,"save-row");var c=document.createElement("span");c.innerHTML="&nbsp;",n.addClass(c,"button gears");var d=document.createElement("span");d.innerHTML="Save",n.addClass(d,"button"),n.addClass(d,"save");var e=document.createElement("span");e.innerHTML="New",n.addClass(e,"button"),n.addClass(e,"save-as");var f=document.createElement("span");f.innerHTML="Revert",n.addClass(f,"button"),n.addClass(f,"revert");var g=a.__preset_select=document.createElement("select");if(a.load&&a.load.remembered?o.each(a.load.remembered,function(b,c){x(a,c,c==a.preset)}):x(a,B,!1),n.bind(g,"change",function(){for(var b=0;b<a.__preset_select.length;b++)a.__preset_select[b].innerHTML=a.__preset_select[b].value;a.preset=this.value}),b.appendChild(g),b.appendChild(c),b.appendChild(d),b.appendChild(e),b.appendChild(f),A){var b=document.getElementById("dg-save-locally"),h=document.getElementById("dg-local-explain");b.style.display="block",b=document.getElementById("dg-local-storage"),"true"===localStorage.getItem(document.location.href+".isLocal")&&b.setAttribute("checked","checked");var i=function(){h.style.display=a.useLocalStorage?"block":"none"};i(),n.bind(b,"change",function(){a.useLocalStorage=!a.useLocalStorage,i()})}var j=document.getElementById("dg-new-constructor");n.bind(j,"keydown",function(a){a.metaKey&&(67===a.which||67==a.keyCode)&&D.hide()}),n.bind(c,"click",function(){j.innerHTML=JSON.stringify(a.getSaveObject(),void 0,2),D.show(),j.focus(),j.select()}),n.bind(d,"click",function(){a.save()}),n.bind(e,"click",function(){var b=prompt("Enter a new preset name.");b&&a.saveAs(b)}),n.bind(f,"click",function(){a.revert()})}function u(a){function b(b){return b.preventDefault(),e=b.clientX,n.addClass(a.__closeButton,I.CLASS_DRAG),n.bind(window,"mousemove",c),n.bind(window,"mouseup",d),!1}function c(b){return b.preventDefault(),a.width+=e-b.clientX,a.onResize(),e=b.clientX,!1}function d(){n.removeClass(a.__closeButton,I.CLASS_DRAG),n.unbind(window,"mousemove",c),n.unbind(window,"mouseup",d)}a.__resize_handle=document.createElement("div"),o.extend(a.__resize_handle.style,{width:"6px",marginLeft:"-3px",height:"200px",cursor:"ew-resize",position:"absolute"});var e;n.bind(a.__resize_handle,"mousedown",b),n.bind(a.__closeButton,"mousedown",b),a.domElement.insertBefore(a.__resize_handle,a.domElement.firstElementChild)}function v(a,b){a.domElement.style.width=b+"px",a.__save_row&&a.autoPlace&&(a.__save_row.style.width=b+"px"),a.__closeButton&&(a.__closeButton.style.width=b+"px")}function w(a,b){var c={};return o.each(a.__rememberedObjects,function(d,e){var f={};o.each(a.__rememberedObjectIndecesToControllers[e],function(a,c){f[c]=b?a.initialValue:a.getValue()}),c[e]=f}),c}function x(a,b,c){var d=document.createElement("option");d.innerHTML=b,d.value=b,a.__preset_select.appendChild(d),c&&(a.__preset_select.selectedIndex=a.__preset_select.length-1)}function y(a,b){var c=a.__preset_select[a.__preset_select.selectedIndex];c.innerHTML=b?c.value+"*":c.value}function z(a){0!=a.length&&l(function(){z(a)}),o.each(a,function(a){a.updateDisplay()})}a.inject(c);var A,B="Default";try{A="localStorage"in window&&null!==window.localStorage}catch(C){A=!1}var D,E,F=!0,G=!1,H=[],I=function(a){function b(){localStorage.setItem(document.location.href+".gui",JSON.stringify(d.getSaveObject()))}function c(){var a=d.getRoot();a.width+=1,o.defer(function(){a.width-=1})}var d=this;this.domElement=document.createElement("div"),this.__ul=document.createElement("ul"),this.domElement.appendChild(this.__ul),n.addClass(this.domElement,"dg"),this.__folders={},this.__controllers=[],this.__rememberedObjects=[],this.__rememberedObjectIndecesToControllers=[],this.__listening=[],a=a||{},a=o.defaults(a,{autoPlace:!0,width:I.DEFAULT_WIDTH}),a=o.defaults(a,{resizable:a.autoPlace,hideable:a.autoPlace}),o.isUndefined(a.load)?a.load={preset:B}:a.preset&&(a.load.preset=a.preset),o.isUndefined(a.parent)&&a.hideable&&H.push(this),a.resizable=o.isUndefined(a.parent)&&a.resizable,a.autoPlace&&o.isUndefined(a.scrollable)&&(a.scrollable=!0);var e=A&&"true"===localStorage.getItem(document.location.href+".isLocal");if(Object.defineProperties(this,{parent:{get:function(){return a.parent}},scrollable:{get:function(){return a.scrollable}},autoPlace:{get:function(){return a.autoPlace}},preset:{get:function(){return d.parent?d.getRoot().preset:a.load.preset},set:function(b){for(d.parent?d.getRoot().preset=b:a.load.preset=b,b=0;b<this.__preset_select.length;b++)this.__preset_select[b].value==this.preset&&(this.__preset_select.selectedIndex=b);d.revert()}},width:{get:function(){return a.width},set:function(b){a.width=b,v(d,b)}},name:{get:function(){return a.name},set:function(b){a.name=b,g&&(g.innerHTML=a.name)}},closed:{get:function(){return a.closed},set:function(b){a.closed=b,a.closed?n.addClass(d.__ul,I.CLASS_CLOSED):n.removeClass(d.__ul,I.CLASS_CLOSED),this.onResize(),d.__closeButton&&(d.__closeButton.innerHTML=b?I.TEXT_OPEN:I.TEXT_CLOSED)}},load:{get:function(){return a.load}},useLocalStorage:{get:function(){return e},set:function(a){A&&((e=a)?n.bind(window,"unload",b):n.unbind(window,"unload",b),localStorage.setItem(document.location.href+".isLocal",a))}}}),o.isUndefined(a.parent)){if(a.closed=!1,n.addClass(this.domElement,I.CLASS_MAIN),n.makeSelectable(this.domElement,!1),A&&e){d.useLocalStorage=!0;var f=localStorage.getItem(document.location.href+".gui");f&&(a.load=JSON.parse(f))}this.__closeButton=document.createElement("div"),this.__closeButton.innerHTML=I.TEXT_CLOSED,n.addClass(this.__closeButton,I.CLASS_CLOSE_BUTTON),this.domElement.appendChild(this.__closeButton),n.bind(this.__closeButton,"click",function(){d.closed=!d.closed})}else{void 0===a.closed&&(a.closed=!0);var g=document.createTextNode(a.name);n.addClass(g,"controller-name"),f=q(d,g),n.addClass(this.__ul,I.CLASS_CLOSED),n.addClass(f,"title"),n.bind(f,"click",function(a){return a.preventDefault(),d.closed=!d.closed,!1}),a.closed||(this.closed=!1)}a.autoPlace&&(o.isUndefined(a.parent)&&(F&&(E=document.createElement("div"),n.addClass(E,"dg"),n.addClass(E,I.CLASS_AUTO_PLACE_CONTAINER),document.body.appendChild(E),F=!1),E.appendChild(this.domElement),n.addClass(this.domElement,I.CLASS_AUTO_PLACE)),this.parent||v(d,a.width)),n.bind(window,"resize",function(){d.onResize()}),n.bind(this.__ul,"webkitTransitionEnd",function(){d.onResize()}),n.bind(this.__ul,"transitionend",function(){d.onResize()}),n.bind(this.__ul,"oTransitionEnd",function(){d.onResize()}),this.onResize(),a.resizable&&u(this),d.getRoot(),a.parent||c()};return I.toggleHide=function(){G=!G,o.each(H,function(a){a.domElement.style.zIndex=G?-999:999,a.domElement.style.opacity=G?0:1})},I.CLASS_AUTO_PLACE="a",I.CLASS_AUTO_PLACE_CONTAINER="ac",I.CLASS_MAIN="main",I.CLASS_CONTROLLER_ROW="cr",I.CLASS_TOO_TALL="taller-than-window",I.CLASS_CLOSED="closed",I.CLASS_CLOSE_BUTTON="close-button",I.CLASS_DRAG="drag",I.DEFAULT_WIDTH=245,I.TEXT_CLOSED="Close Controls",I.TEXT_OPEN="Open Controls",n.bind(window,"keydown",function(a){"text"!==document.activeElement.type&&(72===a.which||72==a.keyCode)&&I.toggleHide()},!1),o.extend(I.prototype,{add:function(a,b){return p(this,a,b,{factoryArgs:Array.prototype.slice.call(arguments,2)})},addColor:function(a,b){return p(this,a,b,{color:!0})},remove:function(a){this.__ul.removeChild(a.__li),this.__controllers.slice(this.__controllers.indexOf(a),1);var b=this;o.defer(function(){b.onResize()})},destroy:function(){this.autoPlace&&E.removeChild(this.domElement)},addFolder:function(a){if(void 0!==this.__folders[a])throw Error('You already have a folder in this GUI by the name "'+a+'"');var b={name:a,parent:this};return b.autoPlace=this.autoPlace,this.load&&this.load.folders&&this.load.folders[a]&&(b.closed=this.load.folders[a].closed,b.load=this.load.folders[a]),b=new I(b),this.__folders[a]=b,a=q(this,b.domElement),n.addClass(a,"folder"),b},open:function(){this.closed=!1},close:function(){this.closed=!0},onResize:function(){var a=this.getRoot();if(a.scrollable){var b=n.getOffset(a.__ul).top,c=0;o.each(a.__ul.childNodes,function(b){a.autoPlace&&b===a.__save_row||(c+=n.getHeight(b))}),window.innerHeight-b-20<c?(n.addClass(a.domElement,I.CLASS_TOO_TALL),a.__ul.style.height=window.innerHeight-b-20+"px"):(n.removeClass(a.domElement,I.CLASS_TOO_TALL),a.__ul.style.height="auto")}a.__resize_handle&&o.defer(function(){a.__resize_handle.style.height=a.__ul.offsetHeight+"px"}),a.__closeButton&&(a.__closeButton.style.width=a.width+"px")},remember:function(){if(o.isUndefined(D)&&(D=new m,D.domElement.innerHTML=b),this.parent)throw Error("You can only call remember on a top level GUI.");var a=this;o.each(Array.prototype.slice.call(arguments),function(b){0==a.__rememberedObjects.length&&t(a),-1==a.__rememberedObjects.indexOf(b)&&a.__rememberedObjects.push(b)}),this.autoPlace&&v(this,this.width)},getRoot:function(){for(var a=this;a.parent;)a=a.parent;return a},getSaveObject:function(){var a=this.load;return a.closed=this.closed,this.__rememberedObjects.length>0&&(a.preset=this.preset,a.remembered||(a.remembered={}),a.remembered[this.preset]=w(this)),a.folders={},o.each(this.__folders,function(b,c){a.folders[c]=b.getSaveObject()}),a},save:function(){this.load.remembered||(this.load.remembered={}),this.load.remembered[this.preset]=w(this),y(this,!1)},saveAs:function(a){this.load.remembered||(this.load.remembered={},this.load.remembered[B]=w(this,!0)),this.load.remembered[a]=w(this),this.preset=a,x(this,a,!0)},revert:function(a){o.each(this.__controllers,function(b){this.getRoot().load.remembered?s(a||this.getRoot(),b):b.setValue(b.initialValue)},this),o.each(this.__folders,function(a){a.revert(a)}),a||y(this.getRoot(),!1)},listen:function(a){var b=0==this.__listening.length;this.__listening.push(a),b&&z(this.__listening)}}),I}(dat.utils.css,'<div id="dg-save" class="dg dialogue">\n\n  Here\'s the new load parameter for your <code>GUI</code>\'s constructor:\n\n  <textarea id="dg-new-constructor"></textarea>\n\n  <div id="dg-save-locally">\n\n    <input id="dg-local-storage" type="checkbox"/> Automatically save\n    values to <code>localStorage</code> on exit.\n\n    <div id="dg-local-explain">The values saved to <code>localStorage</code> will\n      override those passed to <code>dat.GUI</code>\'s constructor. This makes it\n      easier to work incrementally, but <code>localStorage</code> is fragile,\n      and your friends may not see the same values you do.\n      \n    </div>\n    \n  </div>\n\n</div>',".dg ul{list-style:none;margin:0;padding:0;width:100%;clear:both}.dg.ac{position:fixed;top:0;left:0;right:0;height:0;z-index:0}.dg:not(.ac) .main{overflow:hidden}.dg.main{-webkit-transition:opacity 0.1s linear;-o-transition:opacity 0.1s linear;-moz-transition:opacity 0.1s linear;transition:opacity 0.1s linear}.dg.main.taller-than-window{overflow-y:auto}.dg.main.taller-than-window .close-button{opacity:1;margin-top:-1px;border-top:1px solid #2c2c2c}.dg.main ul.closed .close-button{opacity:1 !important}.dg.main:hover .close-button,.dg.main .close-button.drag{opacity:1}.dg.main .close-button{-webkit-transition:opacity 0.1s linear;-o-transition:opacity 0.1s linear;-moz-transition:opacity 0.1s linear;transition:opacity 0.1s linear;border:0;position:absolute;line-height:19px;height:20px;cursor:pointer;text-align:center;background-color:#000}.dg.main .close-button:hover{background-color:#111}.dg.a{float:right;margin-right:15px;overflow-x:hidden}.dg.a.has-save ul{margin-top:27px}.dg.a.has-save ul.closed{margin-top:0}.dg.a .save-row{position:fixed;top:0;z-index:1002}.dg li{-webkit-transition:height 0.1s ease-out;-o-transition:height 0.1s ease-out;-moz-transition:height 0.1s ease-out;transition:height 0.1s ease-out}.dg li:not(.folder){cursor:auto;height:27px;line-height:27px;overflow:hidden;padding:0 4px 0 5px}.dg li.folder{padding:0;border-left:4px solid rgba(0,0,0,0)}.dg li.title{cursor:pointer;margin-left:-4px}.dg .closed li:not(.title),.dg .closed ul li,.dg .closed ul li > *{height:0;overflow:hidden;border:0}.dg .cr{clear:both;padding-left:3px;height:27px}.dg .property-name{cursor:default;float:left;clear:left;width:40%;overflow:hidden;text-overflow:ellipsis}.dg .c{float:left;width:60%}.dg .c input[type=text]{border:0;margin-top:4px;padding:3px;width:100%;float:right}.dg .has-slider input[type=text]{width:30%;margin-left:0}.dg .slider{float:left;width:66%;margin-left:-5px;margin-right:0;height:19px;margin-top:4px}.dg .slider-fg{height:100%}.dg .c input[type=checkbox]{margin-top:9px}.dg .c select{margin-top:5px}.dg .cr.function,.dg .cr.function .property-name,.dg .cr.function *,.dg .cr.boolean,.dg .cr.boolean *{cursor:pointer}.dg .selector{display:none;position:absolute;margin-left:-9px;margin-top:23px;z-index:10}.dg .c:hover .selector,.dg .selector.drag{display:block}.dg li.save-row{padding:0}.dg li.save-row .button{display:inline-block;padding:0px 6px}.dg.dialogue{background-color:#222;width:460px;padding:15px;font-size:13px;line-height:15px}#dg-new-constructor{padding:10px;color:#222;font-family:Monaco, monospace;font-size:10px;border:0;resize:none;box-shadow:inset 1px 1px 1px #888;word-wrap:break-word;margin:12px 0;display:block;width:440px;overflow-y:scroll;height:100px;position:relative}#dg-local-explain{display:none;font-size:11px;line-height:17px;border-radius:3px;background-color:#333;padding:8px;margin-top:10px}#dg-local-explain code{font-size:10px}#dat-gui-save-locally{display:none}.dg{color:#eee;font:11px 'Lucida Grande', sans-serif;text-shadow:0 -1px 0 #111}.dg.main::-webkit-scrollbar{width:5px;background:#1a1a1a}.dg.main::-webkit-scrollbar-corner{height:0;display:none}.dg.main::-webkit-scrollbar-thumb{border-radius:5px;background:#676767}.dg li:not(.folder){background:#1a1a1a;border-bottom:1px solid #2c2c2c}.dg li.save-row{line-height:25px;background:#dad5cb;border:0}.dg li.save-row select{margin-left:5px;width:108px}.dg li.save-row .button{margin-left:5px;margin-top:1px;border-radius:2px;font-size:9px;line-height:7px;padding:4px 4px 5px 4px;background:#c5bdad;color:#fff;text-shadow:0 1px 0 #b0a58f;box-shadow:0 -1px 0 #b0a58f;cursor:pointer}.dg li.save-row .button.gears{background:#c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;height:7px;width:8px}.dg li.save-row .button:hover{background-color:#bab19e;box-shadow:0 -1px 0 #b0a58f}.dg li.folder{border-bottom:0}.dg li.title{padding-left:16px;background:#000 url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;cursor:pointer;border-bottom:1px solid rgba(255,255,255,0.2)}.dg .closed li.title{background-image:url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==)}.dg .cr.boolean{border-left:3px solid #806787}.dg .cr.function{border-left:3px solid #e61d5f}.dg .cr.number{border-left:3px solid #2fa1d6}.dg .cr.number input[type=text]{color:#2fa1d6}.dg .cr.string{border-left:3px solid #1ed36f}.dg .cr.string input[type=text]{color:#1ed36f}.dg .cr.function:hover,.dg .cr.boolean:hover{background:#111}.dg .c input[type=text]{background:#303030;outline:none}.dg .c input[type=text]:hover{background:#3c3c3c}.dg .c input[type=text]:focus{background:#494949;color:#fff}.dg .c .slider{background:#303030;cursor:ew-resize}.dg .c .slider-fg{background:#2fa1d6}.dg .c .slider:hover{background:#3c3c3c}.dg .c .slider:hover .slider-fg{background:#44abda}\n",dat.controllers.factory=function(a,b,c,d,e,f,g){return function(h,i,j,k){var l=h[i];
return g.isArray(j)||g.isObject(j)?new a(h,i,j):g.isNumber(l)?g.isNumber(j)&&g.isNumber(k)?new c(h,i,j,k):new b(h,i,{min:j,max:k}):g.isString(l)?new d(h,i):g.isFunction(l)?new e(h,i,""):g.isBoolean(l)?new f(h,i):void 0}}(dat.controllers.OptionController,dat.controllers.NumberControllerBox,dat.controllers.NumberControllerSlider,dat.controllers.StringController=function(a,b,c){var d=function(a,c){function e(){f.setValue(f.__input.value)}d.superclass.call(this,a,c);var f=this;this.__input=document.createElement("input"),this.__input.setAttribute("type","text"),b.bind(this.__input,"keyup",e),b.bind(this.__input,"change",e),b.bind(this.__input,"blur",function(){f.__onFinishChange&&f.__onFinishChange.call(f,f.getValue())}),b.bind(this.__input,"keydown",function(a){13===a.keyCode&&this.blur()}),this.updateDisplay(),this.domElement.appendChild(this.__input)};return d.superclass=a,c.extend(d.prototype,a.prototype,{updateDisplay:function(){return b.isActive(this.__input)||(this.__input.value=this.getValue()),d.superclass.prototype.updateDisplay.call(this)}}),d}(dat.controllers.Controller,dat.dom.dom,dat.utils.common),dat.controllers.FunctionController,dat.controllers.BooleanController,dat.utils.common),dat.controllers.Controller,dat.controllers.BooleanController,dat.controllers.FunctionController,dat.controllers.NumberControllerBox,dat.controllers.NumberControllerSlider,dat.controllers.OptionController,dat.controllers.ColorController=function(a,b,c,d,e){function f(a,b,c,d){a.style.background="",e.each(i,function(e){a.style.cssText+="background: "+e+"linear-gradient("+b+", "+c+" 0%, "+d+" 100%); "})}function g(a){a.style.background="",a.style.cssText+="background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);",a.style.cssText+="background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",a.style.cssText+="background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",a.style.cssText+="background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",a.style.cssText+="background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);"}var h=function(a,i){function j(a){n(a),b.bind(window,"mousemove",n),b.bind(window,"mouseup",k)}function k(){b.unbind(window,"mousemove",n),b.unbind(window,"mouseup",k)}function l(){var a=d(this.value);a!==!1?(p.__color.__state=a,p.setValue(p.__color.toOriginal())):this.value=p.__color.toString()}function m(){b.unbind(window,"mousemove",o),b.unbind(window,"mouseup",m)}function n(a){a.preventDefault();var c=b.getWidth(p.__saturation_field),d=b.getOffset(p.__saturation_field),e=(a.clientX-d.left+document.body.scrollLeft)/c,a=1-(a.clientY-d.top+document.body.scrollTop)/c;return a>1?a=1:0>a&&(a=0),e>1?e=1:0>e&&(e=0),p.__color.v=a,p.__color.s=e,p.setValue(p.__color.toOriginal()),!1}function o(a){a.preventDefault();var c=b.getHeight(p.__hue_field),d=b.getOffset(p.__hue_field),a=1-(a.clientY-d.top+document.body.scrollTop)/c;return a>1?a=1:0>a&&(a=0),p.__color.h=360*a,p.setValue(p.__color.toOriginal()),!1}h.superclass.call(this,a,i),this.__color=new c(this.getValue()),this.__temp=new c(0);var p=this;this.domElement=document.createElement("div"),b.makeSelectable(this.domElement,!1),this.__selector=document.createElement("div"),this.__selector.className="selector",this.__saturation_field=document.createElement("div"),this.__saturation_field.className="saturation-field",this.__field_knob=document.createElement("div"),this.__field_knob.className="field-knob",this.__field_knob_border="2px solid ",this.__hue_knob=document.createElement("div"),this.__hue_knob.className="hue-knob",this.__hue_field=document.createElement("div"),this.__hue_field.className="hue-field",this.__input=document.createElement("input"),this.__input.type="text",this.__input_textShadow="0 1px 1px ",b.bind(this.__input,"keydown",function(a){13===a.keyCode&&l.call(this)}),b.bind(this.__input,"blur",l),b.bind(this.__selector,"mousedown",function(){b.addClass(this,"drag").bind(window,"mouseup",function(){b.removeClass(p.__selector,"drag")})});var q=document.createElement("div");e.extend(this.__selector.style,{width:"122px",height:"102px",padding:"3px",backgroundColor:"#222",boxShadow:"0px 1px 3px rgba(0,0,0,0.3)"}),e.extend(this.__field_knob.style,{position:"absolute",width:"12px",height:"12px",border:this.__field_knob_border+(this.__color.v<.5?"#fff":"#000"),boxShadow:"0px 1px 3px rgba(0,0,0,0.5)",borderRadius:"12px",zIndex:1}),e.extend(this.__hue_knob.style,{position:"absolute",width:"15px",height:"2px",borderRight:"4px solid #fff",zIndex:1}),e.extend(this.__saturation_field.style,{width:"100px",height:"100px",border:"1px solid #555",marginRight:"3px",display:"inline-block",cursor:"pointer"}),e.extend(q.style,{width:"100%",height:"100%",background:"none"}),f(q,"top","rgba(0,0,0,0)","#000"),e.extend(this.__hue_field.style,{width:"15px",height:"100px",display:"inline-block",border:"1px solid #555",cursor:"ns-resize"}),g(this.__hue_field),e.extend(this.__input.style,{outline:"none",textAlign:"center",color:"#fff",border:0,fontWeight:"bold",textShadow:this.__input_textShadow+"rgba(0,0,0,0.7)"}),b.bind(this.__saturation_field,"mousedown",j),b.bind(this.__field_knob,"mousedown",j),b.bind(this.__hue_field,"mousedown",function(a){o(a),b.bind(window,"mousemove",o),b.bind(window,"mouseup",m)}),this.__saturation_field.appendChild(q),this.__selector.appendChild(this.__field_knob),this.__selector.appendChild(this.__saturation_field),this.__selector.appendChild(this.__hue_field),this.__hue_field.appendChild(this.__hue_knob),this.domElement.appendChild(this.__input),this.domElement.appendChild(this.__selector),this.updateDisplay()};h.superclass=a,e.extend(h.prototype,a.prototype,{updateDisplay:function(){var a=d(this.getValue());if(a!==!1){var b=!1;e.each(c.COMPONENTS,function(c){return e.isUndefined(a[c])||e.isUndefined(this.__color.__state[c])||a[c]===this.__color.__state[c]?void 0:(b=!0,{})},this),b&&e.extend(this.__color.__state,a)}e.extend(this.__temp.__state,this.__color.__state),this.__temp.a=1;var g=this.__color.v<.5||this.__color.s>.5?255:0,h=255-g;e.extend(this.__field_knob.style,{marginLeft:100*this.__color.s-7+"px",marginTop:100*(1-this.__color.v)-7+"px",backgroundColor:this.__temp.toString(),border:this.__field_knob_border+"rgb("+g+","+g+","+g+")"}),this.__hue_knob.style.marginTop=100*(1-this.__color.h/360)+"px",this.__temp.s=1,this.__temp.v=1,f(this.__saturation_field,"left","#fff",this.__temp.toString()),e.extend(this.__input.style,{backgroundColor:this.__input.value=this.__color.toString(),color:"rgb("+g+","+g+","+g+")",textShadow:this.__input_textShadow+"rgba("+h+","+h+","+h+",.7)"})}});var i=["-moz-","-o-","-webkit-","-ms-",""];return h}(dat.controllers.Controller,dat.dom.dom,dat.color.Color=function(a,b,c,d){function e(a,b,c){Object.defineProperty(a,b,{get:function(){return"RGB"===this.__state.space?this.__state[b]:(g(this,b,c),this.__state[b])},set:function(a){"RGB"!==this.__state.space&&(g(this,b,c),this.__state.space="RGB"),this.__state[b]=a}})}function f(a,b){Object.defineProperty(a,b,{get:function(){return"HSV"===this.__state.space?this.__state[b]:(h(this),this.__state[b])},set:function(a){"HSV"!==this.__state.space&&(h(this),this.__state.space="HSV"),this.__state[b]=a}})}function g(a,c,e){if("HEX"===a.__state.space)a.__state[c]=b.component_from_hex(a.__state.hex,e);else{if("HSV"!==a.__state.space)throw"Corrupted color state";d.extend(a.__state,b.hsv_to_rgb(a.__state.h,a.__state.s,a.__state.v))}}function h(a){var c=b.rgb_to_hsv(a.r,a.g,a.b);d.extend(a.__state,{s:c.s,v:c.v}),d.isNaN(c.h)?d.isUndefined(a.__state.h)&&(a.__state.h=0):a.__state.h=c.h}var i=function(){if(this.__state=a.apply(this,arguments),this.__state===!1)throw"Failed to interpret color arguments";this.__state.a=this.__state.a||1};return i.COMPONENTS="r,g,b,h,s,v,hex,a".split(","),d.extend(i.prototype,{toString:function(){return c(this)},toOriginal:function(){return this.__state.conversion.write(this)}}),e(i.prototype,"r",2),e(i.prototype,"g",1),e(i.prototype,"b",0),f(i.prototype,"h"),f(i.prototype,"s"),f(i.prototype,"v"),Object.defineProperty(i.prototype,"a",{get:function(){return this.__state.a},set:function(a){this.__state.a=a}}),Object.defineProperty(i.prototype,"hex",{get:function(){return"HEX"!==!this.__state.space&&(this.__state.hex=b.rgb_to_hex(this.r,this.g,this.b)),this.__state.hex},set:function(a){this.__state.space="HEX",this.__state.hex=a}}),i}(dat.color.interpret,dat.color.math=function(){var a;return{hsv_to_rgb:function(a,b,c){var d=a/60-Math.floor(a/60),e=c*(1-b),f=c*(1-d*b),b=c*(1-(1-d)*b),a=[[c,b,e],[f,c,e],[e,c,b],[e,f,c],[b,e,c],[c,e,f]][Math.floor(a/60)%6];return{r:255*a[0],g:255*a[1],b:255*a[2]}},rgb_to_hsv:function(a,b,c){var d=Math.min(a,b,c),e=Math.max(a,b,c),d=e-d;return 0==e?{h:0/0,s:0,v:0}:(a=a==e?(b-c)/d:b==e?2+(c-a)/d:4+(a-b)/d,a/=6,0>a&&(a+=1),{h:360*a,s:d/e,v:e/255})},rgb_to_hex:function(a,b,c){return a=this.hex_with_component(0,2,a),a=this.hex_with_component(a,1,b),a=this.hex_with_component(a,0,c)},component_from_hex:function(a,b){return 255&a>>8*b},hex_with_component:function(b,c,d){return d<<(a=8*c)|b&~(255<<a)}}}(),dat.color.toString,dat.utils.common),dat.color.interpret,dat.utils.common),dat.utils.requestAnimationFrame=function(){return window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){window.setTimeout(a,1e3/60)}}(),dat.dom.CenteredDiv=function(a,b){var c=function(){this.backgroundElement=document.createElement("div"),b.extend(this.backgroundElement.style,{backgroundColor:"rgba(0,0,0,0.8)",top:0,left:0,display:"none",zIndex:"1000",opacity:0,WebkitTransition:"opacity 0.2s linear"}),a.makeFullscreen(this.backgroundElement),this.backgroundElement.style.position="fixed",this.domElement=document.createElement("div"),b.extend(this.domElement.style,{position:"fixed",display:"none",zIndex:"1001",opacity:0,WebkitTransition:"-webkit-transform 0.2s ease-out, opacity 0.2s linear"}),document.body.appendChild(this.backgroundElement),document.body.appendChild(this.domElement);var c=this;a.bind(this.backgroundElement,"click",function(){c.hide()})};return c.prototype.show=function(){var a=this;this.backgroundElement.style.display="block",this.domElement.style.display="block",this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)",this.layout(),b.defer(function(){a.backgroundElement.style.opacity=1,a.domElement.style.opacity=1,a.domElement.style.webkitTransform="scale(1)"})},c.prototype.hide=function(){var b=this,c=function(){b.domElement.style.display="none",b.backgroundElement.style.display="none",a.unbind(b.domElement,"webkitTransitionEnd",c),a.unbind(b.domElement,"transitionend",c),a.unbind(b.domElement,"oTransitionEnd",c)};a.bind(this.domElement,"webkitTransitionEnd",c),a.bind(this.domElement,"transitionend",c),a.bind(this.domElement,"oTransitionEnd",c),this.backgroundElement.style.opacity=0,this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)"},c.prototype.layout=function(){this.domElement.style.left=window.innerWidth/2-a.getWidth(this.domElement)/2+"px",this.domElement.style.top=window.innerHeight/2-a.getHeight(this.domElement)/2+"px"},c}(dat.dom.dom,dat.utils.common),dat.dom.dom,dat.utils.common),function(a,b){function c(a){var b=a.length,c=fb.type(a);return fb.isWindow(a)?!1:1===a.nodeType&&b?!0:"array"===c||"function"!==c&&(0===b||"number"==typeof b&&b>0&&b-1 in a)}function d(a){var b=ob[a]={};return fb.each(a.match(hb)||[],function(a,c){b[c]=!0}),b}function e(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=fb.expando+Math.random()}function f(a,c,d){var e;if(d===b&&1===a.nodeType)if(e="data-"+c.replace(sb,"-$1").toLowerCase(),d=a.getAttribute(e),"string"==typeof d){try{d="true"===d?!0:"false"===d?!1:"null"===d?null:+d+""===d?+d:rb.test(d)?JSON.parse(d):d}catch(f){}pb.set(a,c,d)}else d=b;return d}function g(){return!0}function h(){return!1}function i(){try{return T.activeElement}catch(a){}}function j(a,b){for(;(a=a[b])&&1!==a.nodeType;);return a}function k(a,b,c){if(fb.isFunction(b))return fb.grep(a,function(a,d){return!!b.call(a,d,a)!==c});if(b.nodeType)return fb.grep(a,function(a){return a===b!==c});if("string"==typeof b){if(Cb.test(b))return fb.filter(b,a,c);b=fb.filter(b,a)}return fb.grep(a,function(a){return bb.call(b,a)>=0!==c})}function l(a,b){return fb.nodeName(a,"table")&&fb.nodeName(1===b.nodeType?b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function m(a){return a.type=(null!==a.getAttribute("type"))+"/"+a.type,a}function n(a){var b=Nb.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function o(a,b){for(var c=a.length,d=0;c>d;d++)qb.set(a[d],"globalEval",!b||qb.get(b[d],"globalEval"))}function p(a,b){var c,d,e,f,g,h,i,j;if(1===b.nodeType){if(qb.hasData(a)&&(f=qb.access(a),g=qb.set(b,f),j=f.events)){delete g.handle,g.events={};for(e in j)for(c=0,d=j[e].length;d>c;c++)fb.event.add(b,e,j[e][c])}pb.hasData(a)&&(h=pb.access(a),i=fb.extend({},h),pb.set(b,i))}}function q(a,c){var d=a.getElementsByTagName?a.getElementsByTagName(c||"*"):a.querySelectorAll?a.querySelectorAll(c||"*"):[];return c===b||c&&fb.nodeName(a,c)?fb.merge([a],d):d}function r(a,b){var c=b.nodeName.toLowerCase();"input"===c&&Kb.test(a.type)?b.checked=a.checked:("input"===c||"textarea"===c)&&(b.defaultValue=a.defaultValue)}function s(a,b){if(b in a)return b;for(var c=b.charAt(0).toUpperCase()+b.slice(1),d=b,e=_b.length;e--;)if(b=_b[e]+c,b in a)return b;return d}function t(a,b){return a=b||a,"none"===fb.css(a,"display")||!fb.contains(a.ownerDocument,a)}function u(b){return a.getComputedStyle(b,null)}function v(a,b){for(var c,d,e,f=[],g=0,h=a.length;h>g;g++)d=a[g],d.style&&(f[g]=qb.get(d,"olddisplay"),c=d.style.display,b?(f[g]||"none"!==c||(d.style.display=""),""===d.style.display&&t(d)&&(f[g]=qb.access(d,"olddisplay",z(d.nodeName)))):f[g]||(e=t(d),(c&&"none"!==c||!e)&&qb.set(d,"olddisplay",e?c:fb.css(d,"display"))));for(g=0;h>g;g++)d=a[g],d.style&&(b&&"none"!==d.style.display&&""!==d.style.display||(d.style.display=b?f[g]||"":"none"));return a}function w(a,b,c){var d=Ub.exec(b);return d?Math.max(0,d[1]-(c||0))+(d[2]||"px"):b}function x(a,b,c,d,e){for(var f=c===(d?"border":"content")?4:"width"===b?1:0,g=0;4>f;f+=2)"margin"===c&&(g+=fb.css(a,c+$b[f],!0,e)),d?("content"===c&&(g-=fb.css(a,"padding"+$b[f],!0,e)),"margin"!==c&&(g-=fb.css(a,"border"+$b[f]+"Width",!0,e))):(g+=fb.css(a,"padding"+$b[f],!0,e),"padding"!==c&&(g+=fb.css(a,"border"+$b[f]+"Width",!0,e)));return g}function y(a,b,c){var d=!0,e="width"===b?a.offsetWidth:a.offsetHeight,f=u(a),g=fb.support.boxSizing&&"border-box"===fb.css(a,"boxSizing",!1,f);if(0>=e||null==e){if(e=Qb(a,b,f),(0>e||null==e)&&(e=a.style[b]),Vb.test(e))return e;d=g&&(fb.support.boxSizingReliable||e===a.style[b]),e=parseFloat(e)||0}return e+x(a,b,c||(g?"border":"content"),d,f)+"px"}function z(a){var b=T,c=Xb[a];return c||(c=A(a,b),"none"!==c&&c||(Rb=(Rb||fb("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(b.documentElement),b=(Rb[0].contentWindow||Rb[0].contentDocument).document,b.write("<!doctype html><html><body>"),b.close(),c=A(a,b),Rb.detach()),Xb[a]=c),c}function A(a,b){var c=fb(b.createElement(a)).appendTo(b.body),d=fb.css(c[0],"display");return c.remove(),d}function B(a,b,c,d){var e;if(fb.isArray(b))fb.each(b,function(b,e){c||bc.test(a)?d(a,e):B(a+"["+("object"==typeof e?b:"")+"]",e,c,d)});else if(c||"object"!==fb.type(b))d(a,b);else for(e in b)B(a+"["+e+"]",b[e],c,d)}function C(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(hb)||[];if(fb.isFunction(c))for(;d=f[e++];)"+"===d[0]?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function D(a,b,c,d){function e(h){var i;return f[h]=!0,fb.each(a[h]||[],function(a,h){var j=h(b,c,d);return"string"!=typeof j||g||f[j]?g?!(i=j):void 0:(b.dataTypes.unshift(j),e(j),!1)}),i}var f={},g=a===sc;return e(b.dataTypes[0])||!f["*"]&&e("*")}function E(a,c){var d,e,f=fb.ajaxSettings.flatOptions||{};for(d in c)c[d]!==b&&((f[d]?a:e||(e={}))[d]=c[d]);return e&&fb.extend(!0,a,e),a}function F(a,c,d){for(var e,f,g,h,i=a.contents,j=a.dataTypes;"*"===j[0];)j.shift(),e===b&&(e=a.mimeType||c.getResponseHeader("Content-Type"));if(e)for(f in i)if(i[f]&&i[f].test(e)){j.unshift(f);break}if(j[0]in d)g=j[0];else{for(f in d){if(!j[0]||a.converters[f+" "+j[0]]){g=f;break}h||(h=f)}g=g||h}return g?(g!==j[0]&&j.unshift(g),d[g]):void 0}function G(a,b,c,d){var e,f,g,h,i,j={},k=a.dataTypes.slice();if(k[1])for(g in a.converters)j[g.toLowerCase()]=a.converters[g];for(f=k.shift();f;)if(a.responseFields[f]&&(c[a.responseFields[f]]=b),!i&&d&&a.dataFilter&&(b=a.dataFilter(b,a.dataType)),i=f,f=k.shift())if("*"===f)f=i;else if("*"!==i&&i!==f){if(g=j[i+" "+f]||j["* "+f],!g)for(e in j)if(h=e.split(" "),h[1]===f&&(g=j[i+" "+h[0]]||j["* "+h[0]])){g===!0?g=j[e]:j[e]!==!0&&(f=h[0],k.unshift(h[1]));break}if(g!==!0)if(g&&a["throws"])b=g(b);else try{b=g(b)}catch(l){return{state:"parsererror",error:g?l:"No conversion from "+i+" to "+f}}}return{state:"success",data:b}}function H(){return setTimeout(function(){Bc=b}),Bc=fb.now()}function I(a,b,c){for(var d,e=(Hc[b]||[]).concat(Hc["*"]),f=0,g=e.length;g>f;f++)if(d=e[f].call(c,b,a))return d}function J(a,b,c){var d,e,f=0,g=Gc.length,h=fb.Deferred().always(function(){delete i.elem}),i=function(){if(e)return!1;for(var b=Bc||H(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,f=1-d,g=0,i=j.tweens.length;i>g;g++)j.tweens[g].run(f);return h.notifyWith(a,[j,f,c]),1>f&&i?c:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:fb.extend({},b),opts:fb.extend(!0,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:Bc||H(),duration:c.duration,tweens:[],createTween:function(b,c){var d=fb.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e)return this;for(e=!0;d>c;c++)j.tweens[c].run(1);return b?h.resolveWith(a,[j,b]):h.rejectWith(a,[j,b]),this}}),k=j.props;for(K(k,j.opts.specialEasing);g>f;f++)if(d=Gc[f].call(j,a,k,j.opts))return d;return fb.map(k,I,j),fb.isFunction(j.opts.start)&&j.opts.start.call(a,j),fb.fx.timer(fb.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}function K(a,b){var c,d,e,f,g;for(c in a)if(d=fb.camelCase(c),e=b[d],f=a[c],fb.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),g=fb.cssHooks[d],g&&"expand"in g){f=g.expand(f),delete a[d];for(c in f)c in a||(a[c]=f[c],b[c]=e)}else b[d]=e}function L(a,c,d){var e,f,g,h,i,j,k=this,l={},m=a.style,n=a.nodeType&&t(a),o=qb.get(a,"fxshow");d.queue||(i=fb._queueHooks(a,"fx"),null==i.unqueued&&(i.unqueued=0,j=i.empty.fire,i.empty.fire=function(){i.unqueued||j()}),i.unqueued++,k.always(function(){k.always(function(){i.unqueued--,fb.queue(a,"fx").length||i.empty.fire()})})),1===a.nodeType&&("height"in c||"width"in c)&&(d.overflow=[m.overflow,m.overflowX,m.overflowY],"inline"===fb.css(a,"display")&&"none"===fb.css(a,"float")&&(m.display="inline-block")),d.overflow&&(m.overflow="hidden",k.always(function(){m.overflow=d.overflow[0],m.overflowX=d.overflow[1],m.overflowY=d.overflow[2]}));for(e in c)if(f=c[e],Dc.exec(f)){if(delete c[e],g=g||"toggle"===f,f===(n?"hide":"show")){if("show"!==f||!o||o[e]===b)continue;n=!0}l[e]=o&&o[e]||fb.style(a,e)}if(!fb.isEmptyObject(l)){o?"hidden"in o&&(n=o.hidden):o=qb.access(a,"fxshow",{}),g&&(o.hidden=!n),n?fb(a).show():k.done(function(){fb(a).hide()}),k.done(function(){var b;qb.remove(a,"fxshow");for(b in l)fb.style(a,b,l[b])});for(e in l)h=I(n?o[e]:0,e,k),e in o||(o[e]=h.start,n&&(h.end=h.start,h.start="width"===e||"height"===e?1:0))}}function M(a,b,c,d,e){return new M.prototype.init(a,b,c,d,e)}function N(a,b){var c,d={height:a},e=0;for(b=b?1:0;4>e;e+=2-b)c=$b[e],d["margin"+c]=d["padding"+c]=a;return b&&(d.opacity=d.width=a),d}function O(a){return fb.isWindow(a)?a:9===a.nodeType&&a.defaultView}var P,Q,R=typeof b,S=a.location,T=a.document,U=T.documentElement,V=a.jQuery,W=a.$,X={},Y=[],Z="2.0.1",$=Y.concat,_=Y.push,ab=Y.slice,bb=Y.indexOf,cb=X.toString,db=X.hasOwnProperty,eb=Z.trim,fb=function(a,b){return new fb.fn.init(a,b,P)},gb=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,hb=/\S+/g,ib=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,jb=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,kb=/^-ms-/,lb=/-([\da-z])/gi,mb=function(a,b){return b.toUpperCase()},nb=function(){T.removeEventListener("DOMContentLoaded",nb,!1),a.removeEventListener("load",nb,!1),fb.ready()};fb.fn=fb.prototype={jquery:Z,constructor:fb,init:function(a,c,d){var e,f;if(!a)return this;if("string"==typeof a){if(e="<"===a.charAt(0)&&">"===a.charAt(a.length-1)&&a.length>=3?[null,a,null]:ib.exec(a),!e||!e[1]&&c)return!c||c.jquery?(c||d).find(a):this.constructor(c).find(a);if(e[1]){if(c=c instanceof fb?c[0]:c,fb.merge(this,fb.parseHTML(e[1],c&&c.nodeType?c.ownerDocument||c:T,!0)),jb.test(e[1])&&fb.isPlainObject(c))for(e in c)fb.isFunction(this[e])?this[e](c[e]):this.attr(e,c[e]);return this}return f=T.getElementById(e[2]),f&&f.parentNode&&(this.length=1,this[0]=f),this.context=T,this.selector=a,this}return a.nodeType?(this.context=this[0]=a,this.length=1,this):fb.isFunction(a)?d.ready(a):(a.selector!==b&&(this.selector=a.selector,this.context=a.context),fb.makeArray(a,this))},selector:"",length:0,toArray:function(){return ab.call(this)},get:function(a){return null==a?this.toArray():0>a?this[this.length+a]:this[a]},pushStack:function(a){var b=fb.merge(this.constructor(),a);return b.prevObject=this,b.context=this.context,b},each:function(a,b){return fb.each(this,a,b)},ready:function(a){return fb.ready.promise().done(a),this},slice:function(){return this.pushStack(ab.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(0>a?b:0);return this.pushStack(c>=0&&b>c?[this[c]]:[])},map:function(a){return this.pushStack(fb.map(this,function(b,c){return a.call(b,c,b)}))},end:function(){return this.prevObject||this.constructor(null)},push:_,sort:[].sort,splice:[].splice},fb.fn.init.prototype=fb.fn,fb.extend=fb.fn.extend=function(){var a,c,d,e,f,g,h=arguments[0]||{},i=1,j=arguments.length,k=!1;for("boolean"==typeof h&&(k=h,h=arguments[1]||{},i=2),"object"==typeof h||fb.isFunction(h)||(h={}),j===i&&(h=this,--i);j>i;i++)if(null!=(a=arguments[i]))for(c in a)d=h[c],e=a[c],h!==e&&(k&&e&&(fb.isPlainObject(e)||(f=fb.isArray(e)))?(f?(f=!1,g=d&&fb.isArray(d)?d:[]):g=d&&fb.isPlainObject(d)?d:{},h[c]=fb.extend(k,g,e)):e!==b&&(h[c]=e));return h},fb.extend({expando:"jQuery"+(Z+Math.random()).replace(/\D/g,""),noConflict:function(b){return a.$===fb&&(a.$=W),b&&a.jQuery===fb&&(a.jQuery=V),fb},isReady:!1,readyWait:1,holdReady:function(a){a?fb.readyWait++:fb.ready(!0)},ready:function(a){(a===!0?--fb.readyWait:fb.isReady)||(fb.isReady=!0,a!==!0&&--fb.readyWait>0||(Q.resolveWith(T,[fb]),fb.fn.trigger&&fb(T).trigger("ready").off("ready")))},isFunction:function(a){return"function"===fb.type(a)},isArray:Array.isArray,isWindow:function(a){return null!=a&&a===a.window},isNumeric:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},type:function(a){return null==a?String(a):"object"==typeof a||"function"==typeof a?X[cb.call(a)]||"object":typeof a},isPlainObject:function(a){if("object"!==fb.type(a)||a.nodeType||fb.isWindow(a))return!1;try{if(a.constructor&&!db.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(b){return!1}return!0},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},error:function(a){throw new Error(a)},parseHTML:function(a,b,c){if(!a||"string"!=typeof a)return null;"boolean"==typeof b&&(c=b,b=!1),b=b||T;var d=jb.exec(a),e=!c&&[];return d?[b.createElement(d[1])]:(d=fb.buildFragment([a],b,e),e&&fb(e).remove(),fb.merge([],d.childNodes))},parseJSON:JSON.parse,parseXML:function(a){var c,d;if(!a||"string"!=typeof a)return null;try{d=new DOMParser,c=d.parseFromString(a,"text/xml")}catch(e){c=b}return(!c||c.getElementsByTagName("parsererror").length)&&fb.error("Invalid XML: "+a),c},noop:function(){},globalEval:function(a){var b,c=eval;a=fb.trim(a),a&&(1===a.indexOf("use strict")?(b=T.createElement("script"),b.text=a,T.head.appendChild(b).parentNode.removeChild(b)):c(a))},camelCase:function(a){return a.replace(kb,"ms-").replace(lb,mb)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b,d){var e,f=0,g=a.length,h=c(a);if(d){if(h)for(;g>f&&(e=b.apply(a[f],d),e!==!1);f++);else for(f in a)if(e=b.apply(a[f],d),e===!1)break}else if(h)for(;g>f&&(e=b.call(a[f],f,a[f]),e!==!1);f++);else for(f in a)if(e=b.call(a[f],f,a[f]),e===!1)break;return a},trim:function(a){return null==a?"":eb.call(a)},makeArray:function(a,b){var d=b||[];return null!=a&&(c(Object(a))?fb.merge(d,"string"==typeof a?[a]:a):_.call(d,a)),d},inArray:function(a,b,c){return null==b?-1:bb.call(b,a,c)},merge:function(a,c){var d=c.length,e=a.length,f=0;if("number"==typeof d)for(;d>f;f++)a[e++]=c[f];else for(;c[f]!==b;)a[e++]=c[f++];return a.length=e,a},grep:function(a,b,c){var d,e=[],f=0,g=a.length;for(c=!!c;g>f;f++)d=!!b(a[f],f),c!==d&&e.push(a[f]);return e},map:function(a,b,d){var e,f=0,g=a.length,h=c(a),i=[];if(h)for(;g>f;f++)e=b(a[f],f,d),null!=e&&(i[i.length]=e);else for(f in a)e=b(a[f],f,d),null!=e&&(i[i.length]=e);return $.apply([],i)},guid:1,proxy:function(a,c){var d,e,f;return"string"==typeof c&&(d=a[c],c=a,a=d),fb.isFunction(a)?(e=ab.call(arguments,2),f=function(){return a.apply(c||this,e.concat(ab.call(arguments)))},f.guid=a.guid=a.guid||fb.guid++,f):b},access:function(a,c,d,e,f,g,h){var i=0,j=a.length,k=null==d;if("object"===fb.type(d)){f=!0;for(i in d)fb.access(a,c,i,d[i],!0,g,h)}else if(e!==b&&(f=!0,fb.isFunction(e)||(h=!0),k&&(h?(c.call(a,e),c=null):(k=c,c=function(a,b,c){return k.call(fb(a),c)})),c))for(;j>i;i++)c(a[i],d,h?e:e.call(a[i],i,c(a[i],d)));return f?a:k?c.call(a):j?c(a[0],d):g},now:Date.now,swap:function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];e=c.apply(a,d||[]);for(f in b)a.style[f]=g[f];return e}}),fb.ready.promise=function(b){return Q||(Q=fb.Deferred(),"complete"===T.readyState?setTimeout(fb.ready):(T.addEventListener("DOMContentLoaded",nb,!1),a.addEventListener("load",nb,!1))),Q.promise(b)},fb.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(a,b){X["[object "+b+"]"]=b.toLowerCase()}),P=fb(T),function(a,b){function c(a,b,c,d){var e,f,g,h,i,j,k,l,m,n;if((b?b.ownerDocument||b:S)!==K&&J(b),b=b||K,c=c||[],!a||"string"!=typeof a)return c;if(1!==(h=b.nodeType)&&9!==h)return[];if(M&&!d){if(e=xb.exec(a))if(g=e[1]){if(9===h){if(f=b.getElementById(g),!f||!f.parentNode)return c;if(f.id===g)return c.push(f),c}else if(b.ownerDocument&&(f=b.ownerDocument.getElementById(g))&&Q(b,f)&&f.id===g)return c.push(f),c}else{if(e[2])return eb.apply(c,b.getElementsByTagName(a)),c;if((g=e[3])&&B.getElementsByClassName&&b.getElementsByClassName)return eb.apply(c,b.getElementsByClassName(g)),c}if(B.qsa&&(!N||!N.test(a))){if(l=k=R,m=b,n=9===h&&a,1===h&&"object"!==b.nodeName.toLowerCase()){for(j=p(a),(k=b.getAttribute("id"))?l=k.replace(Ab,"\\$&"):b.setAttribute("id",l),l="[id='"+l+"'] ",i=j.length;i--;)j[i]=l+q(j[i]);m=rb.test(a)&&b.parentNode||b,n=j.join(",")}if(n)try{return eb.apply(c,m.querySelectorAll(n)),c}catch(o){}finally{k||b.removeAttribute("id")}}}return y(a.replace(ob,"$1"),b,c,d)}function d(a){return wb.test(a+"")}function e(){function a(c,d){return b.push(c+=" ")>D.cacheLength&&delete a[b.shift()],a[c]=d}var b=[];return a}function f(a){return a[R]=!0,a}function g(a){var b=K.createElement("div");try{return!!a(b)}catch(c){return!1}finally{b.parentNode&&b.parentNode.removeChild(b),b=null}}function h(a,b,c){a=a.split("|");for(var d,e=a.length,f=c?null:b;e--;)(d=D.attrHandle[a[e]])&&d!==b||(D.attrHandle[a[e]]=f)}function i(a,b){var c=a.getAttributeNode(b);return c&&c.specified?c.value:a[b]===!0?b.toLowerCase():null}function j(a,b){return a.getAttribute(b,"type"===b.toLowerCase()?1:2)}function k(a){return"input"===a.nodeName.toLowerCase()?a.defaultValue:void 0}function l(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||_)-(~a.sourceIndex||_);if(d)return d;if(c)for(;c=c.nextSibling;)if(c===b)return-1;return a?1:-1}function m(a){return function(b){var c=b.nodeName.toLowerCase();return"input"===c&&b.type===a}}function n(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function o(a){return f(function(b){return b=+b,f(function(c,d){for(var e,f=a([],c.length,b),g=f.length;g--;)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function p(a,b){var d,e,f,g,h,i,j,k=W[a+" "];if(k)return b?0:k.slice(0);for(h=a,i=[],j=D.preFilter;h;){(!d||(e=pb.exec(h)))&&(e&&(h=h.slice(e[0].length)||h),i.push(f=[])),d=!1,(e=qb.exec(h))&&(d=e.shift(),f.push({value:d,type:e[0].replace(ob," ")}),h=h.slice(d.length));for(g in D.filter)!(e=vb[g].exec(h))||j[g]&&!(e=j[g](e))||(d=e.shift(),f.push({value:d,type:g,matches:e}),h=h.slice(d.length));if(!d)break}return b?h.length:h?c.error(a):W(a,i).slice(0)}function q(a){for(var b=0,c=a.length,d="";c>b;b++)d+=a[b].value;return d}function r(a,b,c){var d=b.dir,e=c&&"parentNode"===d,f=U++;return b.first?function(b,c,f){for(;b=b[d];)if(1===b.nodeType||e)return a(b,c,f)}:function(b,c,g){var h,i,j,k=T+" "+f;if(g){for(;b=b[d];)if((1===b.nodeType||e)&&a(b,c,g))return!0}else for(;b=b[d];)if(1===b.nodeType||e)if(j=b[R]||(b[R]={}),(i=j[d])&&i[0]===k){if((h=i[1])===!0||h===C)return h===!0}else if(i=j[d]=[k],i[1]=a(b,c,g)||C,i[1]===!0)return!0}}function s(a){return a.length>1?function(b,c,d){for(var e=a.length;e--;)if(!a[e](b,c,d))return!1;return!0}:a[0]}function t(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;i>h;h++)(f=a[h])&&(!c||c(f,d,e))&&(g.push(f),j&&b.push(h));return g}function u(a,b,c,d,e,g){return d&&!d[R]&&(d=u(d)),e&&!e[R]&&(e=u(e,g)),f(function(f,g,h,i){var j,k,l,m=[],n=[],o=g.length,p=f||x(b||"*",h.nodeType?[h]:h,[]),q=!a||!f&&b?p:t(p,m,a,h,i),r=c?e||(f?a:o||d)?[]:g:q;if(c&&c(q,r,h,i),d)for(j=t(r,n),d(j,[],h,i),k=j.length;k--;)(l=j[k])&&(r[n[k]]=!(q[n[k]]=l));if(f){if(e||a){if(e){for(j=[],k=r.length;k--;)(l=r[k])&&j.push(q[k]=l);e(null,r=[],j,i)}for(k=r.length;k--;)(l=r[k])&&(j=e?hb.call(f,l):m[k])>-1&&(f[j]=!(g[j]=l))}}else r=t(r===g?r.splice(o,r.length):r),e?e(null,g,r,i):eb.apply(g,r)})}function v(a){for(var b,c,d,e=a.length,f=D.relative[a[0].type],g=f||D.relative[" "],h=f?1:0,i=r(function(a){return a===b},g,!0),j=r(function(a){return hb.call(b,a)>-1},g,!0),k=[function(a,c,d){return!f&&(d||c!==H)||((b=c).nodeType?i(a,c,d):j(a,c,d))}];e>h;h++)if(c=D.relative[a[h].type])k=[r(s(k),c)];else{if(c=D.filter[a[h].type].apply(null,a[h].matches),c[R]){for(d=++h;e>d&&!D.relative[a[d].type];d++);return u(h>1&&s(k),h>1&&q(a.slice(0,h-1).concat({value:" "===a[h-2].type?"*":""})).replace(ob,"$1"),c,d>h&&v(a.slice(h,d)),e>d&&v(a=a.slice(d)),e>d&&q(a))}k.push(c)}return s(k)}function w(a,b){var d=0,e=b.length>0,g=a.length>0,h=function(f,h,i,j,k){var l,m,n,o=[],p=0,q="0",r=f&&[],s=null!=k,u=H,v=f||g&&D.find.TAG("*",k&&h.parentNode||h),w=T+=null==u?1:Math.random()||.1;for(s&&(H=h!==K&&h,C=d);null!=(l=v[q]);q++){if(g&&l){for(m=0;n=a[m++];)if(n(l,h,i)){j.push(l);break}s&&(T=w,C=++d)}e&&((l=!n&&l)&&p--,f&&r.push(l))}if(p+=q,e&&q!==p){for(m=0;n=b[m++];)n(r,o,h,i);if(f){if(p>0)for(;q--;)r[q]||o[q]||(o[q]=cb.call(j));o=t(o)}eb.apply(j,o),s&&!f&&o.length>0&&p+b.length>1&&c.uniqueSort(j)}return s&&(T=w,H=u),r};return e?f(h):h}function x(a,b,d){for(var e=0,f=b.length;f>e;e++)c(a,b[e],d);return d}function y(a,b,c,d){var e,f,g,h,i,j=p(a);if(!d&&1===j.length){if(f=j[0]=j[0].slice(0),f.length>2&&"ID"===(g=f[0]).type&&B.getById&&9===b.nodeType&&M&&D.relative[f[1].type]){if(b=(D.find.ID(g.matches[0].replace(Bb,Cb),b)||[])[0],!b)return c;
a=a.slice(f.shift().value.length)}for(e=vb.needsContext.test(a)?0:f.length;e--&&(g=f[e],!D.relative[h=g.type]);)if((i=D.find[h])&&(d=i(g.matches[0].replace(Bb,Cb),rb.test(f[0].type)&&b.parentNode||b))){if(f.splice(e,1),a=d.length&&q(f),!a)return eb.apply(c,d),c;break}}return G(a,j)(d,b,!M,c,rb.test(a)),c}function z(){}var A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R="sizzle"+-new Date,S=a.document,T=0,U=0,V=e(),W=e(),X=e(),Y=!1,Z=function(){return 0},$=typeof b,_=1<<31,ab={}.hasOwnProperty,bb=[],cb=bb.pop,db=bb.push,eb=bb.push,gb=bb.slice,hb=bb.indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(this[b]===a)return b;return-1},ib="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",jb="[\\x20\\t\\r\\n\\f]",kb="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",lb=kb.replace("w","w#"),mb="\\["+jb+"*("+kb+")"+jb+"*(?:([*^$|!~]?=)"+jb+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+lb+")|)|)"+jb+"*\\]",nb=":("+kb+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+mb.replace(3,8)+")*)|.*)\\)|)",ob=new RegExp("^"+jb+"+|((?:^|[^\\\\])(?:\\\\.)*)"+jb+"+$","g"),pb=new RegExp("^"+jb+"*,"+jb+"*"),qb=new RegExp("^"+jb+"*([>+~]|"+jb+")"+jb+"*"),rb=new RegExp(jb+"*[+~]"),sb=new RegExp("="+jb+"*([^\\]'\"]*)"+jb+"*\\]","g"),tb=new RegExp(nb),ub=new RegExp("^"+lb+"$"),vb={ID:new RegExp("^#("+kb+")"),CLASS:new RegExp("^\\.("+kb+")"),TAG:new RegExp("^("+kb.replace("w","w*")+")"),ATTR:new RegExp("^"+mb),PSEUDO:new RegExp("^"+nb),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+jb+"*(even|odd|(([+-]|)(\\d*)n|)"+jb+"*(?:([+-]|)"+jb+"*(\\d+)|))"+jb+"*\\)|)","i"),bool:new RegExp("^(?:"+ib+")$","i"),needsContext:new RegExp("^"+jb+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+jb+"*((?:-\\d)?\\d*)"+jb+"*\\)|)(?=[^-]|$)","i")},wb=/^[^{]+\{\s*\[native \w/,xb=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,yb=/^(?:input|select|textarea|button)$/i,zb=/^h\d$/i,Ab=/'|\\/g,Bb=new RegExp("\\\\([\\da-f]{1,6}"+jb+"?|("+jb+")|.)","ig"),Cb=function(a,b,c){var d="0x"+b-65536;return d!==d||c?b:0>d?String.fromCharCode(d+65536):String.fromCharCode(55296|d>>10,56320|1023&d)};try{eb.apply(bb=gb.call(S.childNodes),S.childNodes),bb[S.childNodes.length].nodeType}catch(Db){eb={apply:bb.length?function(a,b){db.apply(a,gb.call(b))}:function(a,b){for(var c=a.length,d=0;a[c++]=b[d++];);a.length=c-1}}}F=c.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return b?"HTML"!==b.nodeName:!1},B=c.support={},J=c.setDocument=function(a){var b=a?a.ownerDocument||a:S;return b!==K&&9===b.nodeType&&b.documentElement?(K=b,L=b.documentElement,M=!F(b),B.attributes=g(function(a){return a.innerHTML="<a href='#'></a>",h("type|href|height|width",j,"#"===a.firstChild.getAttribute("href")),h(ib,i,null==a.getAttribute("disabled")),a.className="i",!a.getAttribute("className")}),B.input=g(function(a){return a.innerHTML="<input>",a.firstChild.setAttribute("value",""),""===a.firstChild.getAttribute("value")}),h("value",k,B.attributes&&B.input),B.getElementsByTagName=g(function(a){return a.appendChild(b.createComment("")),!a.getElementsByTagName("*").length}),B.getElementsByClassName=g(function(a){return a.innerHTML="<div class='a'></div><div class='a i'></div>",a.firstChild.className="i",2===a.getElementsByClassName("i").length}),B.getById=g(function(a){return L.appendChild(a).id=R,!b.getElementsByName||!b.getElementsByName(R).length}),B.getById?(D.find.ID=function(a,b){if(typeof b.getElementById!==$&&M){var c=b.getElementById(a);return c&&c.parentNode?[c]:[]}},D.filter.ID=function(a){var b=a.replace(Bb,Cb);return function(a){return a.getAttribute("id")===b}}):(delete D.find.ID,D.filter.ID=function(a){var b=a.replace(Bb,Cb);return function(a){var c=typeof a.getAttributeNode!==$&&a.getAttributeNode("id");return c&&c.value===b}}),D.find.TAG=B.getElementsByTagName?function(a,b){return typeof b.getElementsByTagName!==$?b.getElementsByTagName(a):void 0}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){for(;c=f[e++];)1===c.nodeType&&d.push(c);return d}return f},D.find.CLASS=B.getElementsByClassName&&function(a,b){return typeof b.getElementsByClassName!==$&&M?b.getElementsByClassName(a):void 0},O=[],N=[],(B.qsa=d(b.querySelectorAll))&&(g(function(a){a.innerHTML="<select><option selected=''></option></select>",a.querySelectorAll("[selected]").length||N.push("\\["+jb+"*(?:value|"+ib+")"),a.querySelectorAll(":checked").length||N.push(":checked")}),g(function(a){var c=b.createElement("input");c.setAttribute("type","hidden"),a.appendChild(c).setAttribute("t",""),a.querySelectorAll("[t^='']").length&&N.push("[*^$]="+jb+"*(?:''|\"\")"),a.querySelectorAll(":enabled").length||N.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),N.push(",.*:")})),(B.matchesSelector=d(P=L.webkitMatchesSelector||L.mozMatchesSelector||L.oMatchesSelector||L.msMatchesSelector))&&g(function(a){B.disconnectedMatch=P.call(a,"div"),P.call(a,"[s!='']:x"),O.push("!=",nb)}),N=N.length&&new RegExp(N.join("|")),O=O.length&&new RegExp(O.join("|")),Q=d(L.contains)||L.compareDocumentPosition?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1},B.sortDetached=g(function(a){return 1&a.compareDocumentPosition(b.createElement("div"))}),Z=L.compareDocumentPosition?function(a,c){if(a===c)return Y=!0,0;var d=c.compareDocumentPosition&&a.compareDocumentPosition&&a.compareDocumentPosition(c);return d?1&d||!B.sortDetached&&c.compareDocumentPosition(a)===d?a===b||Q(S,a)?-1:c===b||Q(S,c)?1:I?hb.call(I,a)-hb.call(I,c):0:4&d?-1:1:a.compareDocumentPosition?-1:1}:function(a,c){var d,e=0,f=a.parentNode,g=c.parentNode,h=[a],i=[c];if(a===c)return Y=!0,0;if(!f||!g)return a===b?-1:c===b?1:f?-1:g?1:I?hb.call(I,a)-hb.call(I,c):0;if(f===g)return l(a,c);for(d=a;d=d.parentNode;)h.unshift(d);for(d=c;d=d.parentNode;)i.unshift(d);for(;h[e]===i[e];)e++;return e?l(h[e],i[e]):h[e]===S?-1:i[e]===S?1:0},b):K},c.matches=function(a,b){return c(a,null,null,b)},c.matchesSelector=function(a,b){if((a.ownerDocument||a)!==K&&J(a),b=b.replace(sb,"='$1']"),!(!B.matchesSelector||!M||O&&O.test(b)||N&&N.test(b)))try{var d=P.call(a,b);if(d||B.disconnectedMatch||a.document&&11!==a.document.nodeType)return d}catch(e){}return c(b,K,null,[a]).length>0},c.contains=function(a,b){return(a.ownerDocument||a)!==K&&J(a),Q(a,b)},c.attr=function(a,c){(a.ownerDocument||a)!==K&&J(a);var d=D.attrHandle[c.toLowerCase()],e=d&&ab.call(D.attrHandle,c.toLowerCase())?d(a,c,!M):b;return e===b?B.attributes||!M?a.getAttribute(c):(e=a.getAttributeNode(c))&&e.specified?e.value:null:e},c.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},c.uniqueSort=function(a){var b,c=[],d=0,e=0;if(Y=!B.detectDuplicates,I=!B.sortStable&&a.slice(0),a.sort(Z),Y){for(;b=a[e++];)b===a[e]&&(d=c.push(e));for(;d--;)a.splice(c[d],1)}return a},E=c.getText=function(a){var b,c="",d=0,e=a.nodeType;if(e){if(1===e||9===e||11===e){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=E(a)}else if(3===e||4===e)return a.nodeValue}else for(;b=a[d];d++)c+=E(b);return c},D=c.selectors={cacheLength:50,createPseudo:f,match:vb,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(Bb,Cb),a[3]=(a[4]||a[5]||"").replace(Bb,Cb),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||c.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&c.error(a[0]),a},PSEUDO:function(a){var c,d=!a[5]&&a[2];return vb.CHILD.test(a[0])?null:(a[3]&&a[4]!==b?a[2]=a[4]:d&&tb.test(d)&&(c=p(d,!0))&&(c=d.indexOf(")",d.length-c)-d.length)&&(a[0]=a[0].slice(0,c),a[2]=d.slice(0,c)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(Bb,Cb).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=V[a+" "];return b||(b=new RegExp("(^|"+jb+")"+a+"("+jb+"|$)"))&&V(a,function(a){return b.test("string"==typeof a.className&&a.className||typeof a.getAttribute!==$&&a.getAttribute("class")||"")})},ATTR:function(a,b,d){return function(e){var f=c.attr(e,a);return null==f?"!="===b:b?(f+="","="===b?f===d:"!="===b?f!==d:"^="===b?d&&0===f.indexOf(d):"*="===b?d&&f.indexOf(d)>-1:"$="===b?d&&f.slice(-d.length)===d:"~="===b?(" "+f+" ").indexOf(d)>-1:"|="===b?f===d||f.slice(0,d.length+1)===d+"-":!1):!0}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),s=!i&&!h;if(q){if(f){for(;p;){for(l=b;l=l[p];)if(h?l.nodeName.toLowerCase()===r:1===l.nodeType)return!1;o=p="only"===a&&!o&&"nextSibling"}return!0}if(o=[g?q.firstChild:q.lastChild],g&&s){for(k=q[R]||(q[R]={}),j=k[a]||[],n=j[0]===T&&j[1],m=j[0]===T&&j[2],l=n&&q.childNodes[n];l=++n&&l&&l[p]||(m=n=0)||o.pop();)if(1===l.nodeType&&++m&&l===b){k[a]=[T,n,m];break}}else if(s&&(j=(b[R]||(b[R]={}))[a])&&j[0]===T)m=j[1];else for(;(l=++n&&l&&l[p]||(m=n=0)||o.pop())&&((h?l.nodeName.toLowerCase()!==r:1!==l.nodeType)||!++m||(s&&((l[R]||(l[R]={}))[a]=[T,m]),l!==b)););return m-=e,m===d||0===m%d&&m/d>=0}}},PSEUDO:function(a,b){var d,e=D.pseudos[a]||D.setFilters[a.toLowerCase()]||c.error("unsupported pseudo: "+a);return e[R]?e(b):e.length>1?(d=[a,a,"",b],D.setFilters.hasOwnProperty(a.toLowerCase())?f(function(a,c){for(var d,f=e(a,b),g=f.length;g--;)d=hb.call(a,f[g]),a[d]=!(c[d]=f[g])}):function(a){return e(a,0,d)}):e}},pseudos:{not:f(function(a){var b=[],c=[],d=G(a.replace(ob,"$1"));return d[R]?f(function(a,b,c,e){for(var f,g=d(a,null,e,[]),h=a.length;h--;)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,e,f){return b[0]=a,d(b,null,f,c),!c.pop()}}),has:f(function(a){return function(b){return c(a,b).length>0}}),contains:f(function(a){return function(b){return(b.textContent||b.innerText||E(b)).indexOf(a)>-1}}),lang:f(function(a){return ub.test(a||"")||c.error("unsupported lang: "+a),a=a.replace(Bb,Cb).toLowerCase(),function(b){var c;do if(c=M?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===L},focus:function(a){return a===K.activeElement&&(!K.hasFocus||K.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return a.disabled===!1},disabled:function(a){return a.disabled===!0},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeName>"@"||3===a.nodeType||4===a.nodeType)return!1;return!0},parent:function(a){return!D.pseudos.empty(a)},header:function(a){return zb.test(a.nodeName)},input:function(a){return yb.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||b.toLowerCase()===a.type)},first:o(function(){return[0]}),last:o(function(a,b){return[b-1]}),eq:o(function(a,b,c){return[0>c?c+b:c]}),even:o(function(a,b){for(var c=0;b>c;c+=2)a.push(c);return a}),odd:o(function(a,b){for(var c=1;b>c;c+=2)a.push(c);return a}),lt:o(function(a,b,c){for(var d=0>c?c+b:c;--d>=0;)a.push(d);return a}),gt:o(function(a,b,c){for(var d=0>c?c+b:c;++d<b;)a.push(d);return a})}};for(A in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})D.pseudos[A]=m(A);for(A in{submit:!0,reset:!0})D.pseudos[A]=n(A);G=c.compile=function(a,b){var c,d=[],e=[],f=X[a+" "];if(!f){for(b||(b=p(a)),c=b.length;c--;)f=v(b[c]),f[R]?d.push(f):e.push(f);f=X(a,w(e,d))}return f},D.pseudos.nth=D.pseudos.eq,z.prototype=D.filters=D.pseudos,D.setFilters=new z,B.sortStable=R.split("").sort(Z).join("")===R,J(),[0,0].sort(Z),B.detectDuplicates=Y,fb.find=c,fb.expr=c.selectors,fb.expr[":"]=fb.expr.pseudos,fb.unique=c.uniqueSort,fb.text=c.getText,fb.isXMLDoc=c.isXML,fb.contains=c.contains}(a);var ob={};fb.Callbacks=function(a){a="string"==typeof a?ob[a]||d(a):fb.extend({},a);var c,e,f,g,h,i,j=[],k=!a.once&&[],l=function(b){for(c=a.memory&&b,e=!0,i=g||0,g=0,h=j.length,f=!0;j&&h>i;i++)if(j[i].apply(b[0],b[1])===!1&&a.stopOnFalse){c=!1;break}f=!1,j&&(k?k.length&&l(k.shift()):c?j=[]:m.disable())},m={add:function(){if(j){var b=j.length;!function d(b){fb.each(b,function(b,c){var e=fb.type(c);"function"===e?a.unique&&m.has(c)||j.push(c):c&&c.length&&"string"!==e&&d(c)})}(arguments),f?h=j.length:c&&(g=b,l(c))}return this},remove:function(){return j&&fb.each(arguments,function(a,b){for(var c;(c=fb.inArray(b,j,c))>-1;)j.splice(c,1),f&&(h>=c&&h--,i>=c&&i--)}),this},has:function(a){return a?fb.inArray(a,j)>-1:!(!j||!j.length)},empty:function(){return j=[],h=0,this},disable:function(){return j=k=c=b,this},disabled:function(){return!j},lock:function(){return k=b,c||m.disable(),this},locked:function(){return!k},fireWith:function(a,b){return b=b||[],b=[a,b.slice?b.slice():b],!j||e&&!k||(f?k.push(b):l(b)),this},fire:function(){return m.fireWith(this,arguments),this},fired:function(){return!!e}};return m},fb.extend({Deferred:function(a){var b=[["resolve","done",fb.Callbacks("once memory"),"resolved"],["reject","fail",fb.Callbacks("once memory"),"rejected"],["notify","progress",fb.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return fb.Deferred(function(c){fb.each(b,function(b,f){var g=f[0],h=fb.isFunction(a[b])&&a[b];e[f[1]](function(){var a=h&&h.apply(this,arguments);a&&fb.isFunction(a.promise)?a.promise().done(c.resolve).fail(c.reject).progress(c.notify):c[g+"With"](this===d?c.promise():this,h?[a]:arguments)})}),a=null}).promise()},promise:function(a){return null!=a?fb.extend(a,d):d}},e={};return d.pipe=d.then,fb.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add,h&&g.add(function(){c=h},b[1^a][2].disable,b[2][2].lock),e[f[0]]=function(){return e[f[0]+"With"](this===e?d:this,arguments),this},e[f[0]+"With"]=g.fireWith}),d.promise(e),a&&a.call(e,e),e},when:function(a){var b,c,d,e=0,f=ab.call(arguments),g=f.length,h=1!==g||a&&fb.isFunction(a.promise)?g:0,i=1===h?a:fb.Deferred(),j=function(a,c,d){return function(e){c[a]=this,d[a]=arguments.length>1?ab.call(arguments):e,d===b?i.notifyWith(c,d):--h||i.resolveWith(c,d)}};if(g>1)for(b=new Array(g),c=new Array(g),d=new Array(g);g>e;e++)f[e]&&fb.isFunction(f[e].promise)?f[e].promise().done(j(e,d,f)).fail(i.reject).progress(j(e,c,b)):--h;return h||i.resolveWith(d,f),i.promise()}}),fb.support=function(b){var c=T.createElement("input"),d=T.createDocumentFragment(),e=T.createElement("div"),f=T.createElement("select"),g=f.appendChild(T.createElement("option"));return c.type?(c.type="checkbox",b.checkOn=""!==c.value,b.optSelected=g.selected,b.reliableMarginRight=!0,b.boxSizingReliable=!0,b.pixelPosition=!1,c.checked=!0,b.noCloneChecked=c.cloneNode(!0).checked,f.disabled=!0,b.optDisabled=!g.disabled,c=T.createElement("input"),c.value="t",c.type="radio",b.radioValue="t"===c.value,c.setAttribute("checked","t"),c.setAttribute("name","t"),d.appendChild(c),b.checkClone=d.cloneNode(!0).cloneNode(!0).lastChild.checked,b.focusinBubbles="onfocusin"in a,e.style.backgroundClip="content-box",e.cloneNode(!0).style.backgroundClip="",b.clearCloneStyle="content-box"===e.style.backgroundClip,fb(function(){var c,d,f="padding:0;margin:0;border:0;display:block;-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box",g=T.getElementsByTagName("body")[0];g&&(c=T.createElement("div"),c.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",g.appendChild(c).appendChild(e),e.innerHTML="",e.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%",fb.swap(g,null!=g.style.zoom?{zoom:1}:{},function(){b.boxSizing=4===e.offsetWidth}),a.getComputedStyle&&(b.pixelPosition="1%"!==(a.getComputedStyle(e,null)||{}).top,b.boxSizingReliable="4px"===(a.getComputedStyle(e,null)||{width:"4px"}).width,d=e.appendChild(T.createElement("div")),d.style.cssText=e.style.cssText=f,d.style.marginRight=d.style.width="0",e.style.width="1px",b.reliableMarginRight=!parseFloat((a.getComputedStyle(d,null)||{}).marginRight)),g.removeChild(c))}),b):b}({});var pb,qb,rb=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,sb=/([A-Z])/g;e.uid=1,e.accepts=function(a){return a.nodeType?1===a.nodeType||9===a.nodeType:!0},e.prototype={key:function(a){if(!e.accepts(a))return 0;var b={},c=a[this.expando];if(!c){c=e.uid++;try{b[this.expando]={value:c},Object.defineProperties(a,b)}catch(d){b[this.expando]=c,fb.extend(a,b)}}return this.cache[c]||(this.cache[c]={}),c},set:function(a,b,c){var d,e=this.key(a),f=this.cache[e];if("string"==typeof b)f[b]=c;else if(fb.isEmptyObject(f))fb.extend(this.cache[e],b);else for(d in b)f[d]=b[d];return f},get:function(a,c){var d=this.cache[this.key(a)];return c===b?d:d[c]},access:function(a,c,d){return c===b||c&&"string"==typeof c&&d===b?this.get(a,c):(this.set(a,c,d),d!==b?d:c)},remove:function(a,c){var d,e,f,g=this.key(a),h=this.cache[g];if(c===b)this.cache[g]={};else{fb.isArray(c)?e=c.concat(c.map(fb.camelCase)):(f=fb.camelCase(c),c in h?e=[c,f]:(e=f,e=e in h?[e]:e.match(hb)||[])),d=e.length;for(;d--;)delete h[e[d]]}},hasData:function(a){return!fb.isEmptyObject(this.cache[a[this.expando]]||{})},discard:function(a){a[this.expando]&&delete this.cache[a[this.expando]]}},pb=new e,qb=new e,fb.extend({acceptData:e.accepts,hasData:function(a){return pb.hasData(a)||qb.hasData(a)},data:function(a,b,c){return pb.access(a,b,c)},removeData:function(a,b){pb.remove(a,b)},_data:function(a,b,c){return qb.access(a,b,c)},_removeData:function(a,b){qb.remove(a,b)}}),fb.fn.extend({data:function(a,c){var d,e,g=this[0],h=0,i=null;if(a===b){if(this.length&&(i=pb.get(g),1===g.nodeType&&!qb.get(g,"hasDataAttrs"))){for(d=g.attributes;h<d.length;h++)e=d[h].name,0===e.indexOf("data-")&&(e=fb.camelCase(e.slice(5)),f(g,e,i[e]));qb.set(g,"hasDataAttrs",!0)}return i}return"object"==typeof a?this.each(function(){pb.set(this,a)}):fb.access(this,function(c){var d,e=fb.camelCase(a);if(g&&c===b){if(d=pb.get(g,a),d!==b)return d;if(d=pb.get(g,e),d!==b)return d;if(d=f(g,e,b),d!==b)return d}else this.each(function(){var d=pb.get(this,e);pb.set(this,e,c),-1!==a.indexOf("-")&&d!==b&&pb.set(this,a,c)})},null,c,arguments.length>1,null,!0)},removeData:function(a){return this.each(function(){pb.remove(this,a)})}}),fb.extend({queue:function(a,b,c){var d;return a?(b=(b||"fx")+"queue",d=qb.get(a,b),c&&(!d||fb.isArray(c)?d=qb.access(a,b,fb.makeArray(c)):d.push(c)),d||[]):void 0},dequeue:function(a,b){b=b||"fx";var c=fb.queue(a,b),d=c.length,e=c.shift(),f=fb._queueHooks(a,b),g=function(){fb.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--),f.cur=e,e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return qb.get(a,c)||qb.access(a,c,{empty:fb.Callbacks("once memory").add(function(){qb.remove(a,[b+"queue",c])})})}}),fb.fn.extend({queue:function(a,c){var d=2;return"string"!=typeof a&&(c=a,a="fx",d--),arguments.length<d?fb.queue(this[0],a):c===b?this:this.each(function(){var b=fb.queue(this,a,c);fb._queueHooks(this,a),"fx"===a&&"inprogress"!==b[0]&&fb.dequeue(this,a)})},dequeue:function(a){return this.each(function(){fb.dequeue(this,a)})},delay:function(a,b){return a=fb.fx?fb.fx.speeds[a]||a:a,b=b||"fx",this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,c){var d,e=1,f=fb.Deferred(),g=this,h=this.length,i=function(){--e||f.resolveWith(g,[g])};for("string"!=typeof a&&(c=a,a=b),a=a||"fx";h--;)d=qb.get(g[h],a+"queueHooks"),d&&d.empty&&(e++,d.empty.add(i));return i(),f.promise(c)}});var tb,ub,vb=/[\t\r\n\f]/g,wb=/\r/g,xb=/^(?:input|select|textarea|button)$/i;fb.fn.extend({attr:function(a,b){return fb.access(this,fb.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){fb.removeAttr(this,a)})},prop:function(a,b){return fb.access(this,fb.prop,a,b,arguments.length>1)},removeProp:function(a){return this.each(function(){delete this[fb.propFix[a]||a]})},addClass:function(a){var b,c,d,e,f,g=0,h=this.length,i="string"==typeof a&&a;if(fb.isFunction(a))return this.each(function(b){fb(this).addClass(a.call(this,b,this.className))});if(i)for(b=(a||"").match(hb)||[];h>g;g++)if(c=this[g],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(vb," "):" ")){for(f=0;e=b[f++];)d.indexOf(" "+e+" ")<0&&(d+=e+" ");c.className=fb.trim(d)}return this},removeClass:function(a){var b,c,d,e,f,g=0,h=this.length,i=0===arguments.length||"string"==typeof a&&a;if(fb.isFunction(a))return this.each(function(b){fb(this).removeClass(a.call(this,b,this.className))});if(i)for(b=(a||"").match(hb)||[];h>g;g++)if(c=this[g],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(vb," "):"")){for(f=0;e=b[f++];)for(;d.indexOf(" "+e+" ")>=0;)d=d.replace(" "+e+" "," ");c.className=a?fb.trim(d):""}return this},toggleClass:function(a,b){var c=typeof a,d="boolean"==typeof b;return fb.isFunction(a)?this.each(function(c){fb(this).toggleClass(a.call(this,c,this.className,b),b)}):this.each(function(){if("string"===c)for(var e,f=0,g=fb(this),h=b,i=a.match(hb)||[];e=i[f++];)h=d?h:!g.hasClass(e),g[h?"addClass":"removeClass"](e);else(c===R||"boolean"===c)&&(this.className&&qb.set(this,"__className__",this.className),this.className=this.className||a===!1?"":qb.get(this,"__className__")||"")})},hasClass:function(a){for(var b=" "+a+" ",c=0,d=this.length;d>c;c++)if(1===this[c].nodeType&&(" "+this[c].className+" ").replace(vb," ").indexOf(b)>=0)return!0;return!1},val:function(a){var c,d,e,f=this[0];{if(arguments.length)return e=fb.isFunction(a),this.each(function(d){var f;1===this.nodeType&&(f=e?a.call(this,d,fb(this).val()):a,null==f?f="":"number"==typeof f?f+="":fb.isArray(f)&&(f=fb.map(f,function(a){return null==a?"":a+""})),c=fb.valHooks[this.type]||fb.valHooks[this.nodeName.toLowerCase()],c&&"set"in c&&c.set(this,f,"value")!==b||(this.value=f))});if(f)return c=fb.valHooks[f.type]||fb.valHooks[f.nodeName.toLowerCase()],c&&"get"in c&&(d=c.get(f,"value"))!==b?d:(d=f.value,"string"==typeof d?d.replace(wb,""):null==d?"":d)}}}),fb.extend({valHooks:{option:{get:function(a){var b=a.attributes.value;return!b||b.specified?a.value:a.text}},select:{get:function(a){for(var b,c,d=a.options,e=a.selectedIndex,f="select-one"===a.type||0>e,g=f?null:[],h=f?e+1:d.length,i=0>e?h:f?e:0;h>i;i++)if(c=d[i],!(!c.selected&&i!==e||(fb.support.optDisabled?c.disabled:null!==c.getAttribute("disabled"))||c.parentNode.disabled&&fb.nodeName(c.parentNode,"optgroup"))){if(b=fb(c).val(),f)return b;g.push(b)}return g},set:function(a,b){for(var c,d,e=a.options,f=fb.makeArray(b),g=e.length;g--;)d=e[g],(d.selected=fb.inArray(fb(d).val(),f)>=0)&&(c=!0);return c||(a.selectedIndex=-1),f}}},attr:function(a,c,d){var e,f,g=a.nodeType;if(a&&3!==g&&8!==g&&2!==g)return typeof a.getAttribute===R?fb.prop(a,c,d):(1===g&&fb.isXMLDoc(a)||(c=c.toLowerCase(),e=fb.attrHooks[c]||(fb.expr.match.bool.test(c)?ub:tb)),d===b?e&&"get"in e&&null!==(f=e.get(a,c))?f:(f=fb.find.attr(a,c),null==f?b:f):null!==d?e&&"set"in e&&(f=e.set(a,d,c))!==b?f:(a.setAttribute(c,d+""),d):(fb.removeAttr(a,c),void 0))},removeAttr:function(a,b){var c,d,e=0,f=b&&b.match(hb);if(f&&1===a.nodeType)for(;c=f[e++];)d=fb.propFix[c]||c,fb.expr.match.bool.test(c)&&(a[d]=!1),a.removeAttribute(c)},attrHooks:{type:{set:function(a,b){if(!fb.support.radioValue&&"radio"===b&&fb.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}},propFix:{"for":"htmlFor","class":"className"},prop:function(a,c,d){var e,f,g,h=a.nodeType;if(a&&3!==h&&8!==h&&2!==h)return g=1!==h||!fb.isXMLDoc(a),g&&(c=fb.propFix[c]||c,f=fb.propHooks[c]),d!==b?f&&"set"in f&&(e=f.set(a,d,c))!==b?e:a[c]=d:f&&"get"in f&&null!==(e=f.get(a,c))?e:a[c]},propHooks:{tabIndex:{get:function(a){return a.hasAttribute("tabindex")||xb.test(a.nodeName)||a.href?a.tabIndex:-1}}}}),ub={set:function(a,b,c){return b===!1?fb.removeAttr(a,c):a.setAttribute(c,c),c}},fb.each(fb.expr.match.bool.source.match(/\w+/g),function(a,c){var d=fb.expr.attrHandle[c]||fb.find.attr;fb.expr.attrHandle[c]=function(a,c,e){var f=fb.expr.attrHandle[c],g=e?b:(fb.expr.attrHandle[c]=b)!=d(a,c,e)?c.toLowerCase():null;return fb.expr.attrHandle[c]=f,g}}),fb.support.optSelected||(fb.propHooks.selected={get:function(a){var b=a.parentNode;return b&&b.parentNode&&b.parentNode.selectedIndex,null}}),fb.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){fb.propFix[this.toLowerCase()]=this}),fb.each(["radio","checkbox"],function(){fb.valHooks[this]={set:function(a,b){return fb.isArray(b)?a.checked=fb.inArray(fb(a).val(),b)>=0:void 0}},fb.support.checkOn||(fb.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})});var yb=/^key/,zb=/^(?:mouse|contextmenu)|click/,Ab=/^(?:focusinfocus|focusoutblur)$/,Bb=/^([^.]*)(?:\.(.+)|)$/;fb.event={global:{},add:function(a,c,d,e,f){var g,h,i,j,k,l,m,n,o,p,q,r=qb.get(a);if(r){for(d.handler&&(g=d,d=g.handler,f=g.selector),d.guid||(d.guid=fb.guid++),(j=r.events)||(j=r.events={}),(h=r.handle)||(h=r.handle=function(a){return typeof fb===R||a&&fb.event.triggered===a.type?b:fb.event.dispatch.apply(h.elem,arguments)},h.elem=a),c=(c||"").match(hb)||[""],k=c.length;k--;)i=Bb.exec(c[k])||[],o=q=i[1],p=(i[2]||"").split(".").sort(),o&&(m=fb.event.special[o]||{},o=(f?m.delegateType:m.bindType)||o,m=fb.event.special[o]||{},l=fb.extend({type:o,origType:q,data:e,handler:d,guid:d.guid,selector:f,needsContext:f&&fb.expr.match.needsContext.test(f),namespace:p.join(".")},g),(n=j[o])||(n=j[o]=[],n.delegateCount=0,m.setup&&m.setup.call(a,e,p,h)!==!1||a.addEventListener&&a.addEventListener(o,h,!1)),m.add&&(m.add.call(a,l),l.handler.guid||(l.handler.guid=d.guid)),f?n.splice(n.delegateCount++,0,l):n.push(l),fb.event.global[o]=!0);a=null}},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=qb.hasData(a)&&qb.get(a);if(q&&(i=q.events)){for(b=(b||"").match(hb)||[""],j=b.length;j--;)if(h=Bb.exec(b[j])||[],n=p=h[1],o=(h[2]||"").split(".").sort(),n){for(l=fb.event.special[n]||{},n=(d?l.delegateType:l.bindType)||n,m=i[n]||[],h=h[2]&&new RegExp("(^|\\.)"+o.join("\\.(?:.*\\.|)")+"(\\.|$)"),g=f=m.length;f--;)k=m[f],!e&&p!==k.origType||c&&c.guid!==k.guid||h&&!h.test(k.namespace)||d&&d!==k.selector&&("**"!==d||!k.selector)||(m.splice(f,1),k.selector&&m.delegateCount--,l.remove&&l.remove.call(a,k));g&&!m.length&&(l.teardown&&l.teardown.call(a,o,q.handle)!==!1||fb.removeEvent(a,n,q.handle),delete i[n])}else for(n in i)fb.event.remove(a,n+b[j],c,d,!0);fb.isEmptyObject(i)&&(delete q.handle,qb.remove(a,"events"))}},trigger:function(c,d,e,f){var g,h,i,j,k,l,m,n=[e||T],o=db.call(c,"type")?c.type:c,p=db.call(c,"namespace")?c.namespace.split("."):[];if(h=i=e=e||T,3!==e.nodeType&&8!==e.nodeType&&!Ab.test(o+fb.event.triggered)&&(o.indexOf(".")>=0&&(p=o.split("."),o=p.shift(),p.sort()),k=o.indexOf(":")<0&&"on"+o,c=c[fb.expando]?c:new fb.Event(o,"object"==typeof c&&c),c.isTrigger=f?2:3,c.namespace=p.join("."),c.namespace_re=c.namespace?new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,c.result=b,c.target||(c.target=e),d=null==d?[c]:fb.makeArray(d,[c]),m=fb.event.special[o]||{},f||!m.trigger||m.trigger.apply(e,d)!==!1)){if(!f&&!m.noBubble&&!fb.isWindow(e)){for(j=m.delegateType||o,Ab.test(j+o)||(h=h.parentNode);h;h=h.parentNode)n.push(h),i=h;i===(e.ownerDocument||T)&&n.push(i.defaultView||i.parentWindow||a)}for(g=0;(h=n[g++])&&!c.isPropagationStopped();)c.type=g>1?j:m.bindType||o,l=(qb.get(h,"events")||{})[c.type]&&qb.get(h,"handle"),l&&l.apply(h,d),l=k&&h[k],l&&fb.acceptData(h)&&l.apply&&l.apply(h,d)===!1&&c.preventDefault();return c.type=o,f||c.isDefaultPrevented()||m._default&&m._default.apply(n.pop(),d)!==!1||!fb.acceptData(e)||k&&fb.isFunction(e[o])&&!fb.isWindow(e)&&(i=e[k],i&&(e[k]=null),fb.event.triggered=o,e[o](),fb.event.triggered=b,i&&(e[k]=i)),c.result}},dispatch:function(a){a=fb.event.fix(a);var c,d,e,f,g,h=[],i=ab.call(arguments),j=(qb.get(this,"events")||{})[a.type]||[],k=fb.event.special[a.type]||{};if(i[0]=a,a.delegateTarget=this,!k.preDispatch||k.preDispatch.call(this,a)!==!1){for(h=fb.event.handlers.call(this,a,j),c=0;(f=h[c++])&&!a.isPropagationStopped();)for(a.currentTarget=f.elem,d=0;(g=f.handlers[d++])&&!a.isImmediatePropagationStopped();)(!a.namespace_re||a.namespace_re.test(g.namespace))&&(a.handleObj=g,a.data=g.data,e=((fb.event.special[g.origType]||{}).handle||g.handler).apply(f.elem,i),e!==b&&(a.result=e)===!1&&(a.preventDefault(),a.stopPropagation()));return k.postDispatch&&k.postDispatch.call(this,a),a.result}},handlers:function(a,c){var d,e,f,g,h=[],i=c.delegateCount,j=a.target;if(i&&j.nodeType&&(!a.button||"click"!==a.type))for(;j!==this;j=j.parentNode||this)if(j.disabled!==!0||"click"!==a.type){for(e=[],d=0;i>d;d++)g=c[d],f=g.selector+" ",e[f]===b&&(e[f]=g.needsContext?fb(f,this).index(j)>=0:fb.find(f,this,null,[j]).length),e[f]&&e.push(g);e.length&&h.push({elem:j,handlers:e})}return i<c.length&&h.push({elem:this,handlers:c.slice(i)}),h},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,c){var d,e,f,g=c.button;return null==a.pageX&&null!=c.clientX&&(d=a.target.ownerDocument||T,e=d.documentElement,f=d.body,a.pageX=c.clientX+(e&&e.scrollLeft||f&&f.scrollLeft||0)-(e&&e.clientLeft||f&&f.clientLeft||0),a.pageY=c.clientY+(e&&e.scrollTop||f&&f.scrollTop||0)-(e&&e.clientTop||f&&f.clientTop||0)),a.which||g===b||(a.which=1&g?1:2&g?3:4&g?2:0),a}},fix:function(a){if(a[fb.expando])return a;var b,c,d,e=a.type,f=a,g=this.fixHooks[e];for(g||(this.fixHooks[e]=g=zb.test(e)?this.mouseHooks:yb.test(e)?this.keyHooks:{}),d=g.props?this.props.concat(g.props):this.props,a=new fb.Event(f),b=d.length;b--;)c=d[b],a[c]=f[c];return a.target||(a.target=T),3===a.target.nodeType&&(a.target=a.target.parentNode),g.filter?g.filter(a,f):a},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==i()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===i()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&fb.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(a){return fb.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){a.result!==b&&(a.originalEvent.returnValue=a.result)}}},simulate:function(a,b,c,d){var e=fb.extend(new fb.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?fb.event.trigger(e,null,b):fb.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},fb.removeEvent=function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)},fb.Event=function(a,b){return this instanceof fb.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||a.getPreventDefault&&a.getPreventDefault()?g:h):this.type=a,b&&fb.extend(this,b),this.timeStamp=a&&a.timeStamp||fb.now(),this[fb.expando]=!0,void 0):new fb.Event(a,b)
},fb.Event.prototype={isDefaultPrevented:h,isPropagationStopped:h,isImmediatePropagationStopped:h,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=g,a&&a.preventDefault&&a.preventDefault()},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=g,a&&a.stopPropagation&&a.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=g,this.stopPropagation()}},fb.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){fb.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;return(!e||e!==d&&!fb.contains(d,e))&&(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),fb.support.focusinBubbles||fb.each({focus:"focusin",blur:"focusout"},function(a,b){var c=0,d=function(a){fb.event.simulate(b,a.target,fb.event.fix(a),!0)};fb.event.special[b]={setup:function(){0===c++&&T.addEventListener(a,d,!0)},teardown:function(){0===--c&&T.removeEventListener(a,d,!0)}}}),fb.fn.extend({on:function(a,c,d,e,f){var g,i;if("object"==typeof a){"string"!=typeof c&&(d=d||c,c=b);for(i in a)this.on(i,c,d,a[i],f);return this}if(null==d&&null==e?(e=c,d=c=b):null==e&&("string"==typeof c?(e=d,d=b):(e=d,d=c,c=b)),e===!1)e=h;else if(!e)return this;return 1===f&&(g=e,e=function(a){return fb().off(a),g.apply(this,arguments)},e.guid=g.guid||(g.guid=fb.guid++)),this.each(function(){fb.event.add(this,a,e,d,c)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,c,d){var e,f;if(a&&a.preventDefault&&a.handleObj)return e=a.handleObj,fb(a.delegateTarget).off(e.namespace?e.origType+"."+e.namespace:e.origType,e.selector,e.handler),this;if("object"==typeof a){for(f in a)this.off(f,c,a[f]);return this}return(c===!1||"function"==typeof c)&&(d=c,c=b),d===!1&&(d=h),this.each(function(){fb.event.remove(this,a,d,c)})},trigger:function(a,b){return this.each(function(){fb.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];return c?fb.event.trigger(a,b,c,!0):void 0}});var Cb=/^.[^:#\[\.,]*$/,Db=/^(?:parents|prev(?:Until|All))/,Eb=fb.expr.match.needsContext,Fb={children:!0,contents:!0,next:!0,prev:!0};fb.fn.extend({find:function(a){var b,c=[],d=this,e=d.length;if("string"!=typeof a)return this.pushStack(fb(a).filter(function(){for(b=0;e>b;b++)if(fb.contains(d[b],this))return!0}));for(b=0;e>b;b++)fb.find(a,d[b],c);return c=this.pushStack(e>1?fb.unique(c):c),c.selector=this.selector?this.selector+" "+a:a,c},has:function(a){var b=fb(a,this),c=b.length;return this.filter(function(){for(var a=0;c>a;a++)if(fb.contains(this,b[a]))return!0})},not:function(a){return this.pushStack(k(this,a||[],!0))},filter:function(a){return this.pushStack(k(this,a||[],!1))},is:function(a){return!!k(this,"string"==typeof a&&Eb.test(a)?fb(a):a||[],!1).length},closest:function(a,b){for(var c,d=0,e=this.length,f=[],g=Eb.test(a)||"string"!=typeof a?fb(a,b||this.context):0;e>d;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(c.nodeType<11&&(g?g.index(c)>-1:1===c.nodeType&&fb.find.matchesSelector(c,a))){c=f.push(c);break}return this.pushStack(f.length>1?fb.unique(f):f)},index:function(a){return a?"string"==typeof a?bb.call(fb(a),this[0]):bb.call(this,a.jquery?a[0]:a):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){var c="string"==typeof a?fb(a,b):fb.makeArray(a&&a.nodeType?[a]:a),d=fb.merge(this.get(),c);return this.pushStack(fb.unique(d))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}}),fb.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return fb.dir(a,"parentNode")},parentsUntil:function(a,b,c){return fb.dir(a,"parentNode",c)},next:function(a){return j(a,"nextSibling")},prev:function(a){return j(a,"previousSibling")},nextAll:function(a){return fb.dir(a,"nextSibling")},prevAll:function(a){return fb.dir(a,"previousSibling")},nextUntil:function(a,b,c){return fb.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return fb.dir(a,"previousSibling",c)},siblings:function(a){return fb.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return fb.sibling(a.firstChild)},contents:function(a){return fb.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:fb.merge([],a.childNodes)}},function(a,b){fb.fn[a]=function(c,d){var e=fb.map(this,b,c);return"Until"!==a.slice(-5)&&(d=c),d&&"string"==typeof d&&(e=fb.filter(d,e)),this.length>1&&(Fb[a]||fb.unique(e),Db.test(a)&&e.reverse()),this.pushStack(e)}}),fb.extend({filter:function(a,b,c){var d=b[0];return c&&(a=":not("+a+")"),1===b.length&&1===d.nodeType?fb.find.matchesSelector(d,a)?[d]:[]:fb.find.matches(a,fb.grep(b,function(a){return 1===a.nodeType}))},dir:function(a,c,d){for(var e=[],f=d!==b;(a=a[c])&&9!==a.nodeType;)if(1===a.nodeType){if(f&&fb(a).is(d))break;e.push(a)}return e},sibling:function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c}});var Gb=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Hb=/<([\w:]+)/,Ib=/<|&#?\w+;/,Jb=/<(?:script|style|link)/i,Kb=/^(?:checkbox|radio)$/i,Lb=/checked\s*(?:[^=]|=\s*.checked.)/i,Mb=/^$|\/(?:java|ecma)script/i,Nb=/^true\/(.*)/,Ob=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Pb={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Pb.optgroup=Pb.option,Pb.tbody=Pb.tfoot=Pb.colgroup=Pb.caption=Pb.thead,Pb.th=Pb.td,fb.fn.extend({text:function(a){return fb.access(this,function(a){return a===b?fb.text(this):this.empty().append((this[0]&&this[0].ownerDocument||T).createTextNode(a))},null,a,arguments.length)},append:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=l(this,a);b.appendChild(a)}})},prepend:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=l(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},remove:function(a,b){for(var c,d=a?fb.filter(a,this):this,e=0;null!=(c=d[e]);e++)b||1!==c.nodeType||fb.cleanData(q(c)),c.parentNode&&(b&&fb.contains(c.ownerDocument,c)&&o(q(c,"script")),c.parentNode.removeChild(c));return this},empty:function(){for(var a,b=0;null!=(a=this[b]);b++)1===a.nodeType&&(fb.cleanData(q(a,!1)),a.textContent="");return this},clone:function(a,b){return a=null==a?!1:a,b=null==b?a:b,this.map(function(){return fb.clone(this,a,b)})},html:function(a){return fb.access(this,function(a){var c=this[0]||{},d=0,e=this.length;if(a===b&&1===c.nodeType)return c.innerHTML;if("string"==typeof a&&!Jb.test(a)&&!Pb[(Hb.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(Gb,"<$1></$2>");try{for(;e>d;d++)c=this[d]||{},1===c.nodeType&&(fb.cleanData(q(c,!1)),c.innerHTML=a);c=0}catch(f){}}c&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=fb.map(this,function(a){return[a.nextSibling,a.parentNode]}),b=0;return this.domManip(arguments,function(c){var d=a[b++],e=a[b++];e&&(d&&d.parentNode!==e&&(d=this.nextSibling),fb(this).remove(),e.insertBefore(c,d))},!0),b?this:this.remove()},detach:function(a){return this.remove(a,!0)},domManip:function(a,b,c){a=$.apply([],a);var d,e,f,g,h,i,j=0,k=this.length,l=this,o=k-1,p=a[0],r=fb.isFunction(p);if(r||!(1>=k||"string"!=typeof p||fb.support.checkClone)&&Lb.test(p))return this.each(function(d){var e=l.eq(d);r&&(a[0]=p.call(this,d,e.html())),e.domManip(a,b,c)});if(k&&(d=fb.buildFragment(a,this[0].ownerDocument,!1,!c&&this),e=d.firstChild,1===d.childNodes.length&&(d=e),e)){for(f=fb.map(q(d,"script"),m),g=f.length;k>j;j++)h=d,j!==o&&(h=fb.clone(h,!0,!0),g&&fb.merge(f,q(h,"script"))),b.call(this[j],h,j);if(g)for(i=f[f.length-1].ownerDocument,fb.map(f,n),j=0;g>j;j++)h=f[j],Mb.test(h.type||"")&&!qb.access(h,"globalEval")&&fb.contains(i,h)&&(h.src?fb._evalUrl(h.src):fb.globalEval(h.textContent.replace(Ob,"")))}return this}}),fb.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){fb.fn[a]=function(a){for(var c,d=[],e=fb(a),f=e.length-1,g=0;f>=g;g++)c=g===f?this:this.clone(!0),fb(e[g])[b](c),_.apply(d,c.get());return this.pushStack(d)}}),fb.extend({clone:function(a,b,c){var d,e,f,g,h=a.cloneNode(!0),i=fb.contains(a.ownerDocument,a);if(!(fb.support.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||fb.isXMLDoc(a)))for(g=q(h),f=q(a),d=0,e=f.length;e>d;d++)r(f[d],g[d]);if(b)if(c)for(f=f||q(a),g=g||q(h),d=0,e=f.length;e>d;d++)p(f[d],g[d]);else p(a,h);return g=q(h,"script"),g.length>0&&o(g,!i&&q(a,"script")),h},buildFragment:function(a,b,c,d){for(var e,f,g,h,i,j,k=0,l=a.length,m=b.createDocumentFragment(),n=[];l>k;k++)if(e=a[k],e||0===e)if("object"===fb.type(e))fb.merge(n,e.nodeType?[e]:e);else if(Ib.test(e)){for(f=f||m.appendChild(b.createElement("div")),g=(Hb.exec(e)||["",""])[1].toLowerCase(),h=Pb[g]||Pb._default,f.innerHTML=h[1]+e.replace(Gb,"<$1></$2>")+h[2],j=h[0];j--;)f=f.firstChild;fb.merge(n,f.childNodes),f=m.firstChild,f.textContent=""}else n.push(b.createTextNode(e));for(m.textContent="",k=0;e=n[k++];)if((!d||-1===fb.inArray(e,d))&&(i=fb.contains(e.ownerDocument,e),f=q(m.appendChild(e),"script"),i&&o(f),c))for(j=0;e=f[j++];)Mb.test(e.type||"")&&c.push(e);return m},cleanData:function(a){for(var c,d,f,g,h,i,j=fb.event.special,k=0;(d=a[k])!==b;k++){if(e.accepts(d)&&(h=d[qb.expando],h&&(c=qb.cache[h]))){if(f=Object.keys(c.events||{}),f.length)for(i=0;(g=f[i])!==b;i++)j[g]?fb.event.remove(d,g):fb.removeEvent(d,g,c.handle);qb.cache[h]&&delete qb.cache[h]}delete pb.cache[d[pb.expando]]}},_evalUrl:function(a){return fb.ajax({url:a,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})}}),fb.fn.extend({wrapAll:function(a){var b;return fb.isFunction(a)?this.each(function(b){fb(this).wrapAll(a.call(this,b))}):(this[0]&&(b=fb(a,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){for(var a=this;a.firstElementChild;)a=a.firstElementChild;return a}).append(this)),this)},wrapInner:function(a){return fb.isFunction(a)?this.each(function(b){fb(this).wrapInner(a.call(this,b))}):this.each(function(){var b=fb(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=fb.isFunction(a);return this.each(function(c){fb(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){fb.nodeName(this,"body")||fb(this).replaceWith(this.childNodes)}).end()}});var Qb,Rb,Sb=/^(none|table(?!-c[ea]).+)/,Tb=/^margin/,Ub=new RegExp("^("+gb+")(.*)$","i"),Vb=new RegExp("^("+gb+")(?!px)[a-z%]+$","i"),Wb=new RegExp("^([+-])=("+gb+")","i"),Xb={BODY:"block"},Yb={position:"absolute",visibility:"hidden",display:"block"},Zb={letterSpacing:0,fontWeight:400},$b=["Top","Right","Bottom","Left"],_b=["Webkit","O","Moz","ms"];fb.fn.extend({css:function(a,c){return fb.access(this,function(a,c,d){var e,f,g={},h=0;if(fb.isArray(c)){for(e=u(a),f=c.length;f>h;h++)g[c[h]]=fb.css(a,c[h],!1,e);return g}return d!==b?fb.style(a,c,d):fb.css(a,c)},a,c,arguments.length>1)},show:function(){return v(this,!0)},hide:function(){return v(this)},toggle:function(a){var b="boolean"==typeof a;return this.each(function(){(b?a:t(this))?fb(this).show():fb(this).hide()})}}),fb.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=Qb(a,"opacity");return""===c?"1":c}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(a,c,d,e){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var f,g,h,i=fb.camelCase(c),j=a.style;return c=fb.cssProps[i]||(fb.cssProps[i]=s(j,i)),h=fb.cssHooks[c]||fb.cssHooks[i],d===b?h&&"get"in h&&(f=h.get(a,!1,e))!==b?f:j[c]:(g=typeof d,"string"===g&&(f=Wb.exec(d))&&(d=(f[1]+1)*f[2]+parseFloat(fb.css(a,c)),g="number"),null==d||"number"===g&&isNaN(d)||("number"!==g||fb.cssNumber[i]||(d+="px"),fb.support.clearCloneStyle||""!==d||0!==c.indexOf("background")||(j[c]="inherit"),h&&"set"in h&&(d=h.set(a,d,e))===b||(j[c]=d)),void 0)}},css:function(a,c,d,e){var f,g,h,i=fb.camelCase(c);return c=fb.cssProps[i]||(fb.cssProps[i]=s(a.style,i)),h=fb.cssHooks[c]||fb.cssHooks[i],h&&"get"in h&&(f=h.get(a,!0,d)),f===b&&(f=Qb(a,c,e)),"normal"===f&&c in Zb&&(f=Zb[c]),""===d||d?(g=parseFloat(f),d===!0||fb.isNumeric(g)?g||0:f):f}}),Qb=function(a,c,d){var e,f,g,h=d||u(a),i=h?h.getPropertyValue(c)||h[c]:b,j=a.style;return h&&(""!==i||fb.contains(a.ownerDocument,a)||(i=fb.style(a,c)),Vb.test(i)&&Tb.test(c)&&(e=j.width,f=j.minWidth,g=j.maxWidth,j.minWidth=j.maxWidth=j.width=i,i=h.width,j.width=e,j.minWidth=f,j.maxWidth=g)),i},fb.each(["height","width"],function(a,b){fb.cssHooks[b]={get:function(a,c,d){return c?0===a.offsetWidth&&Sb.test(fb.css(a,"display"))?fb.swap(a,Yb,function(){return y(a,b,d)}):y(a,b,d):void 0},set:function(a,c,d){var e=d&&u(a);return w(a,c,d?x(a,b,d,fb.support.boxSizing&&"border-box"===fb.css(a,"boxSizing",!1,e),e):0)}}}),fb(function(){fb.support.reliableMarginRight||(fb.cssHooks.marginRight={get:function(a,b){return b?fb.swap(a,{display:"inline-block"},Qb,[a,"marginRight"]):void 0}}),!fb.support.pixelPosition&&fb.fn.position&&fb.each(["top","left"],function(a,b){fb.cssHooks[b]={get:function(a,c){return c?(c=Qb(a,b),Vb.test(c)?fb(a).position()[b]+"px":c):void 0}}})}),fb.expr&&fb.expr.filters&&(fb.expr.filters.hidden=function(a){return a.offsetWidth<=0&&a.offsetHeight<=0},fb.expr.filters.visible=function(a){return!fb.expr.filters.hidden(a)}),fb.each({margin:"",padding:"",border:"Width"},function(a,b){fb.cssHooks[a+b]={expand:function(c){for(var d=0,e={},f="string"==typeof c?c.split(" "):[c];4>d;d++)e[a+$b[d]+b]=f[d]||f[d-2]||f[0];return e}},Tb.test(a)||(fb.cssHooks[a+b].set=w)});var ac=/%20/g,bc=/\[\]$/,cc=/\r?\n/g,dc=/^(?:submit|button|image|reset|file)$/i,ec=/^(?:input|select|textarea|keygen)/i;fb.fn.extend({serialize:function(){return fb.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=fb.prop(this,"elements");return a?fb.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!fb(this).is(":disabled")&&ec.test(this.nodeName)&&!dc.test(a)&&(this.checked||!Kb.test(a))}).map(function(a,b){var c=fb(this).val();return null==c?null:fb.isArray(c)?fb.map(c,function(a){return{name:b.name,value:a.replace(cc,"\r\n")}}):{name:b.name,value:c.replace(cc,"\r\n")}}).get()}}),fb.param=function(a,c){var d,e=[],f=function(a,b){b=fb.isFunction(b)?b():null==b?"":b,e[e.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};if(c===b&&(c=fb.ajaxSettings&&fb.ajaxSettings.traditional),fb.isArray(a)||a.jquery&&!fb.isPlainObject(a))fb.each(a,function(){f(this.name,this.value)});else for(d in a)B(d,a[d],c,f);return e.join("&").replace(ac,"+")},fb.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){fb.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)}}),fb.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)}});var fc,gc,hc=fb.now(),ic=/\?/,jc=/#.*$/,kc=/([?&])_=[^&]*/,lc=/^(.*?):[ \t]*([^\r\n]*)$/gm,mc=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,nc=/^(?:GET|HEAD)$/,oc=/^\/\//,pc=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,qc=fb.fn.load,rc={},sc={},tc="*/".concat("*");try{gc=S.href}catch(uc){gc=T.createElement("a"),gc.href="",gc=gc.href}fc=pc.exec(gc.toLowerCase())||[],fb.fn.load=function(a,c,d){if("string"!=typeof a&&qc)return qc.apply(this,arguments);var e,f,g,h=this,i=a.indexOf(" ");return i>=0&&(e=a.slice(i),a=a.slice(0,i)),fb.isFunction(c)?(d=c,c=b):c&&"object"==typeof c&&(f="POST"),h.length>0&&fb.ajax({url:a,type:f,dataType:"html",data:c}).done(function(a){g=arguments,h.html(e?fb("<div>").append(fb.parseHTML(a)).find(e):a)}).complete(d&&function(a,b){h.each(d,g||[a.responseText,b,a])}),this},fb.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){fb.fn[b]=function(a){return this.on(b,a)}}),fb.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:gc,type:"GET",isLocal:mc.test(fc[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":tc,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":fb.parseJSON,"text xml":fb.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?E(E(a,fb.ajaxSettings),b):E(fb.ajaxSettings,a)},ajaxPrefilter:C(rc),ajaxTransport:C(sc),ajax:function(a,c){function d(a,c,d,h){var j,l,s,t,v,x=c;2!==u&&(u=2,i&&clearTimeout(i),e=b,g=h||"",w.readyState=a>0?4:0,j=a>=200&&300>a||304===a,d&&(t=F(m,w,d)),t=G(m,t,w,j),j?(m.ifModified&&(v=w.getResponseHeader("Last-Modified"),v&&(fb.lastModified[f]=v),v=w.getResponseHeader("etag"),v&&(fb.etag[f]=v)),204===a||"HEAD"===m.type?x="nocontent":304===a?x="notmodified":(x=t.state,l=t.data,s=t.error,j=!s)):(s=x,(a||!x)&&(x="error",0>a&&(a=0))),w.status=a,w.statusText=(c||x)+"",j?p.resolveWith(n,[l,x,w]):p.rejectWith(n,[w,x,s]),w.statusCode(r),r=b,k&&o.trigger(j?"ajaxSuccess":"ajaxError",[w,m,j?l:s]),q.fireWith(n,[w,x]),k&&(o.trigger("ajaxComplete",[w,m]),--fb.active||fb.event.trigger("ajaxStop")))}"object"==typeof a&&(c=a,a=b),c=c||{};var e,f,g,h,i,j,k,l,m=fb.ajaxSetup({},c),n=m.context||m,o=m.context&&(n.nodeType||n.jquery)?fb(n):fb.event,p=fb.Deferred(),q=fb.Callbacks("once memory"),r=m.statusCode||{},s={},t={},u=0,v="canceled",w={readyState:0,getResponseHeader:function(a){var b;if(2===u){if(!h)for(h={};b=lc.exec(g);)h[b[1].toLowerCase()]=b[2];b=h[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return 2===u?g:null},setRequestHeader:function(a,b){var c=a.toLowerCase();return u||(a=t[c]=t[c]||a,s[a]=b),this},overrideMimeType:function(a){return u||(m.mimeType=a),this},statusCode:function(a){var b;if(a)if(2>u)for(b in a)r[b]=[r[b],a[b]];else w.always(a[w.status]);return this},abort:function(a){var b=a||v;return e&&e.abort(b),d(0,b),this}};if(p.promise(w).complete=q.add,w.success=w.done,w.error=w.fail,m.url=((a||m.url||gc)+"").replace(jc,"").replace(oc,fc[1]+"//"),m.type=c.method||c.type||m.method||m.type,m.dataTypes=fb.trim(m.dataType||"*").toLowerCase().match(hb)||[""],null==m.crossDomain&&(j=pc.exec(m.url.toLowerCase()),m.crossDomain=!(!j||j[1]===fc[1]&&j[2]===fc[2]&&(j[3]||("http:"===j[1]?"80":"443"))===(fc[3]||("http:"===fc[1]?"80":"443")))),m.data&&m.processData&&"string"!=typeof m.data&&(m.data=fb.param(m.data,m.traditional)),D(rc,m,c,w),2===u)return w;k=m.global,k&&0===fb.active++&&fb.event.trigger("ajaxStart"),m.type=m.type.toUpperCase(),m.hasContent=!nc.test(m.type),f=m.url,m.hasContent||(m.data&&(f=m.url+=(ic.test(f)?"&":"?")+m.data,delete m.data),m.cache===!1&&(m.url=kc.test(f)?f.replace(kc,"$1_="+hc++):f+(ic.test(f)?"&":"?")+"_="+hc++)),m.ifModified&&(fb.lastModified[f]&&w.setRequestHeader("If-Modified-Since",fb.lastModified[f]),fb.etag[f]&&w.setRequestHeader("If-None-Match",fb.etag[f])),(m.data&&m.hasContent&&m.contentType!==!1||c.contentType)&&w.setRequestHeader("Content-Type",m.contentType),w.setRequestHeader("Accept",m.dataTypes[0]&&m.accepts[m.dataTypes[0]]?m.accepts[m.dataTypes[0]]+("*"!==m.dataTypes[0]?", "+tc+"; q=0.01":""):m.accepts["*"]);for(l in m.headers)w.setRequestHeader(l,m.headers[l]);if(m.beforeSend&&(m.beforeSend.call(n,w,m)===!1||2===u))return w.abort();v="abort";for(l in{success:1,error:1,complete:1})w[l](m[l]);if(e=D(sc,m,c,w)){w.readyState=1,k&&o.trigger("ajaxSend",[w,m]),m.async&&m.timeout>0&&(i=setTimeout(function(){w.abort("timeout")},m.timeout));try{u=1,e.send(s,d)}catch(x){if(!(2>u))throw x;d(-1,x)}}else d(-1,"No Transport");return w},getJSON:function(a,b,c){return fb.get(a,b,c,"json")},getScript:function(a,c){return fb.get(a,b,c,"script")}}),fb.each(["get","post"],function(a,c){fb[c]=function(a,d,e,f){return fb.isFunction(d)&&(f=f||e,e=d,d=b),fb.ajax({url:a,type:c,dataType:f,data:d,success:e})}}),fb.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(a){return fb.globalEval(a),a}}}),fb.ajaxPrefilter("script",function(a){a.cache===b&&(a.cache=!1),a.crossDomain&&(a.type="GET")}),fb.ajaxTransport("script",function(a){if(a.crossDomain){var b,c;return{send:function(d,e){b=fb("<script>").prop({async:!0,charset:a.scriptCharset,src:a.url}).on("load error",c=function(a){b.remove(),c=null,a&&e("error"===a.type?404:200,a.type)}),T.head.appendChild(b[0])},abort:function(){c&&c()}}}});var vc=[],wc=/(=)\?(?=&|$)|\?\?/;fb.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=vc.pop()||fb.expando+"_"+hc++;return this[a]=!0,a}}),fb.ajaxPrefilter("json jsonp",function(c,d,e){var f,g,h,i=c.jsonp!==!1&&(wc.test(c.url)?"url":"string"==typeof c.data&&!(c.contentType||"").indexOf("application/x-www-form-urlencoded")&&wc.test(c.data)&&"data");return i||"jsonp"===c.dataTypes[0]?(f=c.jsonpCallback=fb.isFunction(c.jsonpCallback)?c.jsonpCallback():c.jsonpCallback,i?c[i]=c[i].replace(wc,"$1"+f):c.jsonp!==!1&&(c.url+=(ic.test(c.url)?"&":"?")+c.jsonp+"="+f),c.converters["script json"]=function(){return h||fb.error(f+" was not called"),h[0]},c.dataTypes[0]="json",g=a[f],a[f]=function(){h=arguments},e.always(function(){a[f]=g,c[f]&&(c.jsonpCallback=d.jsonpCallback,vc.push(f)),h&&fb.isFunction(g)&&g(h[0]),h=g=b}),"script"):void 0}),fb.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(a){}};var xc=fb.ajaxSettings.xhr(),yc={0:200,1223:204},zc=0,Ac={};a.ActiveXObject&&fb(a).on("unload",function(){for(var a in Ac)Ac[a]();Ac=b}),fb.support.cors=!!xc&&"withCredentials"in xc,fb.support.ajax=xc=!!xc,fb.ajaxTransport(function(a){var c;return fb.support.cors||xc&&!a.crossDomain?{send:function(d,e){var f,g,h=a.xhr();if(h.open(a.type,a.url,a.async,a.username,a.password),a.xhrFields)for(f in a.xhrFields)h[f]=a.xhrFields[f];a.mimeType&&h.overrideMimeType&&h.overrideMimeType(a.mimeType),a.crossDomain||d["X-Requested-With"]||(d["X-Requested-With"]="XMLHttpRequest");for(f in d)h.setRequestHeader(f,d[f]);c=function(a){return function(){c&&(delete Ac[g],c=h.onload=h.onerror=null,"abort"===a?h.abort():"error"===a?e(h.status||404,h.statusText):e(yc[h.status]||h.status,h.statusText,"string"==typeof h.responseText?{text:h.responseText}:b,h.getAllResponseHeaders()))}},h.onload=c(),h.onerror=c("error"),c=Ac[g=zc++]=c("abort"),h.send(a.hasContent&&a.data||null)},abort:function(){c&&c()}}:void 0});var Bc,Cc,Dc=/^(?:toggle|show|hide)$/,Ec=new RegExp("^(?:([+-])=|)("+gb+")([a-z%]*)$","i"),Fc=/queueHooks$/,Gc=[L],Hc={"*":[function(a,b){var c=this.createTween(a,b),d=c.cur(),e=Ec.exec(b),f=e&&e[3]||(fb.cssNumber[a]?"":"px"),g=(fb.cssNumber[a]||"px"!==f&&+d)&&Ec.exec(fb.css(c.elem,a)),h=1,i=20;if(g&&g[3]!==f){f=f||g[3],e=e||[],g=+d||1;do h=h||".5",g/=h,fb.style(c.elem,a,g+f);while(h!==(h=c.cur()/d)&&1!==h&&--i)}return e&&(c.unit=f,c.start=+g||+d||0,c.end=e[1]?g+(e[1]+1)*e[2]:+e[2]),c}]};fb.Animation=fb.extend(J,{tweener:function(a,b){fb.isFunction(a)?(b=a,a=["*"]):a=a.split(" ");for(var c,d=0,e=a.length;e>d;d++)c=a[d],Hc[c]=Hc[c]||[],Hc[c].unshift(b)},prefilter:function(a,b){b?Gc.unshift(a):Gc.push(a)}}),fb.Tween=M,M.prototype={constructor:M,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||"swing",this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(fb.cssNumber[c]?"":"px")},cur:function(){var a=M.propHooks[this.prop];return a&&a.get?a.get(this):M.propHooks._default.get(this)},run:function(a){var b,c=M.propHooks[this.prop];return this.pos=b=this.options.duration?fb.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):M.propHooks._default.set(this),this}},M.prototype.init.prototype=M.prototype,M.propHooks={_default:{get:function(a){var b;return null==a.elem[a.prop]||a.elem.style&&null!=a.elem.style[a.prop]?(b=fb.css(a.elem,a.prop,""),b&&"auto"!==b?b:0):a.elem[a.prop]},set:function(a){fb.fx.step[a.prop]?fb.fx.step[a.prop](a):a.elem.style&&(null!=a.elem.style[fb.cssProps[a.prop]]||fb.cssHooks[a.prop])?fb.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}},M.propHooks.scrollTop=M.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},fb.each(["toggle","show","hide"],function(a,b){var c=fb.fn[b];fb.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(N(b,!0),a,d,e)}}),fb.fn.extend({fadeTo:function(a,b,c,d){return this.filter(t).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=fb.isEmptyObject(a),f=fb.speed(b,c,d),g=function(){var b=J(this,fb.extend({},a),f);g.finish=function(){b.stop(!0)},(e||qb.get(this,"finish"))&&b.stop(!0)};return g.finish=g,e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,c,d){var e=function(a){var b=a.stop;delete a.stop,b(d)};return"string"!=typeof a&&(d=c,c=a,a=b),c&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){var b=!0,c=null!=a&&a+"queueHooks",f=fb.timers,g=qb.get(this);if(c)g[c]&&g[c].stop&&e(g[c]);else for(c in g)g[c]&&g[c].stop&&Fc.test(c)&&e(g[c]);for(c=f.length;c--;)f[c].elem!==this||null!=a&&f[c].queue!==a||(f[c].anim.stop(d),b=!1,f.splice(c,1));(b||!d)&&fb.dequeue(this,a)})},finish:function(a){return a!==!1&&(a=a||"fx"),this.each(function(){var b,c=qb.get(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=fb.timers,g=d?d.length:0;for(c.finish=!0,fb.queue(this,a,[]),e&&e.cur&&e.cur.finish&&e.cur.finish.call(this),b=f.length;b--;)f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1));for(b=0;g>b;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}}),fb.each({slideDown:N("show"),slideUp:N("hide"),slideToggle:N("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){fb.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),fb.speed=function(a,b,c){var d=a&&"object"==typeof a?fb.extend({},a):{complete:c||!c&&b||fb.isFunction(a)&&a,duration:a,easing:c&&b||b&&!fb.isFunction(b)&&b};return d.duration=fb.fx.off?0:"number"==typeof d.duration?d.duration:d.duration in fb.fx.speeds?fb.fx.speeds[d.duration]:fb.fx.speeds._default,(null==d.queue||d.queue===!0)&&(d.queue="fx"),d.old=d.complete,d.complete=function(){fb.isFunction(d.old)&&d.old.call(this),d.queue&&fb.dequeue(this,d.queue)},d},fb.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2}},fb.timers=[],fb.fx=M.prototype.init,fb.fx.tick=function(){var a,c=fb.timers,d=0;for(Bc=fb.now();d<c.length;d++)a=c[d],a()||c[d]!==a||c.splice(d--,1);c.length||fb.fx.stop(),Bc=b},fb.fx.timer=function(a){a()&&fb.timers.push(a)&&fb.fx.start()},fb.fx.interval=13,fb.fx.start=function(){Cc||(Cc=setInterval(fb.fx.tick,fb.fx.interval))},fb.fx.stop=function(){clearInterval(Cc),Cc=null},fb.fx.speeds={slow:600,fast:200,_default:400},fb.fx.step={},fb.expr&&fb.expr.filters&&(fb.expr.filters.animated=function(a){return fb.grep(fb.timers,function(b){return a===b.elem}).length}),fb.fn.offset=function(a){if(arguments.length)return a===b?this:this.each(function(b){fb.offset.setOffset(this,a,b)});var c,d,e=this[0],f={top:0,left:0},g=e&&e.ownerDocument;if(g)return c=g.documentElement,fb.contains(c,e)?(typeof e.getBoundingClientRect!==R&&(f=e.getBoundingClientRect()),d=O(g),{top:f.top+d.pageYOffset-c.clientTop,left:f.left+d.pageXOffset-c.clientLeft}):f},fb.offset={setOffset:function(a,b,c){var d,e,f,g,h,i,j,k=fb.css(a,"position"),l=fb(a),m={};"static"===k&&(a.style.position="relative"),h=l.offset(),f=fb.css(a,"top"),i=fb.css(a,"left"),j=("absolute"===k||"fixed"===k)&&(f+i).indexOf("auto")>-1,j?(d=l.position(),g=d.top,e=d.left):(g=parseFloat(f)||0,e=parseFloat(i)||0),fb.isFunction(b)&&(b=b.call(a,c,h)),null!=b.top&&(m.top=b.top-h.top+g),null!=b.left&&(m.left=b.left-h.left+e),"using"in b?b.using.call(a,m):l.css(m)}},fb.fn.extend({position:function(){if(this[0]){var a,b,c=this[0],d={top:0,left:0};return"fixed"===fb.css(c,"position")?b=c.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),fb.nodeName(a[0],"html")||(d=a.offset()),d.top+=fb.css(a[0],"borderTopWidth",!0),d.left+=fb.css(a[0],"borderLeftWidth",!0)),{top:b.top-d.top-fb.css(c,"marginTop",!0),left:b.left-d.left-fb.css(c,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||U;a&&!fb.nodeName(a,"html")&&"static"===fb.css(a,"position");)a=a.offsetParent;return a||U})}}),fb.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(c,d){var e="pageYOffset"===d;fb.fn[c]=function(f){return fb.access(this,function(c,f,g){var h=O(c);return g===b?h?h[d]:c[f]:(h?h.scrollTo(e?a.pageXOffset:g,e?g:a.pageYOffset):c[f]=g,void 0)},c,f,arguments.length,null)}}),fb.each({Height:"height",Width:"width"},function(a,c){fb.each({padding:"inner"+a,content:c,"":"outer"+a},function(d,e){fb.fn[e]=function(e,f){var g=arguments.length&&(d||"boolean"!=typeof e),h=d||(e===!0||f===!0?"margin":"border");return fb.access(this,function(c,d,e){var f;return fb.isWindow(c)?c.document.documentElement["client"+a]:9===c.nodeType?(f=c.documentElement,Math.max(c.body["scroll"+a],f["scroll"+a],c.body["offset"+a],f["offset"+a],f["client"+a])):e===b?fb.css(c,d,h):fb.style(c,d,e,h)},c,g?e:b,g,null)}})}),fb.fn.size=function(){return this.length},fb.fn.andSelf=fb.fn.addBack,"object"==typeof module&&module&&"object"==typeof module.exports?module.exports=fb:"function"==typeof define&&define.amd&&define("jquery",[],function(){return fb}),"object"==typeof a&&"object"==typeof a.document&&(a.jQuery=a.$=fb)}(window),void 0===jQuery.migrateMute&&(jQuery.migrateMute=!0),function(a,b,c){function d(c){var d=b.console;f[c]||(f[c]=!0,a.migrateWarnings.push(c),d&&d.warn&&!a.migrateMute&&(d.warn("JQMIGRATE: "+c),a.migrateTrace&&d.trace&&d.trace()))}function e(b,e,f,g){if(Object.defineProperty)try{return Object.defineProperty(b,e,{configurable:!0,enumerable:!0,get:function(){return d(g),f},set:function(a){d(g),f=a}}),c}catch(h){}a._definePropertyBroken=!0,b[e]=f}var f={};a.migrateWarnings=[],!a.migrateMute&&b.console&&b.console.log&&b.console.log("JQMIGRATE: Logging is active"),a.migrateTrace===c&&(a.migrateTrace=!0),a.migrateReset=function(){f={},a.migrateWarnings.length=0},"BackCompat"===document.compatMode&&d("jQuery is not compatible with Quirks Mode");var g=a("<input/>",{size:1}).attr("size")&&a.attrFn,h=a.attr,i=a.attrHooks.value&&a.attrHooks.value.get||function(){return null},j=a.attrHooks.value&&a.attrHooks.value.set||function(){return c},k=/^(?:input|button)$/i,l=/^[238]$/,m=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,n=/^(?:checked|selected)$/i;e(a,"attrFn",g||{},"jQuery.attrFn is deprecated"),a.attr=function(b,e,f,i){var j=e.toLowerCase(),o=b&&b.nodeType;return i&&(4>h.length&&d("jQuery.fn.attr( props, pass ) is deprecated"),b&&!l.test(o)&&(g?e in g:a.isFunction(a.fn[e])))?a(b)[e](f):("type"===e&&f!==c&&k.test(b.nodeName)&&b.parentNode&&d("Can't change the 'type' of an input or button in IE 6/7/8"),!a.attrHooks[j]&&m.test(j)&&(a.attrHooks[j]={get:function(b,d){var e,f=a.prop(b,d);
return f===!0||"boolean"!=typeof f&&(e=b.getAttributeNode(d))&&e.nodeValue!==!1?d.toLowerCase():c},set:function(b,c,d){var e;return c===!1?a.removeAttr(b,d):(e=a.propFix[d]||d,e in b&&(b[e]=!0),b.setAttribute(d,d.toLowerCase())),d}},n.test(j)&&d("jQuery.fn.attr('"+j+"') may use property instead of attribute")),h.call(a,b,e,f))},a.attrHooks.value={get:function(a,b){var c=(a.nodeName||"").toLowerCase();return"button"===c?i.apply(this,arguments):("input"!==c&&"option"!==c&&d("jQuery.fn.attr('value') no longer gets properties"),b in a?a.value:null)},set:function(a,b){var e=(a.nodeName||"").toLowerCase();return"button"===e?j.apply(this,arguments):("input"!==e&&"option"!==e&&d("jQuery.fn.attr('value', val) no longer sets properties"),a.value=b,c)}};var o,p,q=a.fn.init,r=a.parseJSON,s=/^([^<]*)(<[\w\W]+>)([^>]*)$/;a.fn.init=function(b,c,e){var f;return b&&"string"==typeof b&&!a.isPlainObject(c)&&(f=s.exec(a.trim(b)))&&f[0]&&("<"!==b.charAt(0)&&d("$(html) HTML strings must start with '<' character"),f[3]&&d("$(html) HTML text after last tag is ignored"),"#"===f[0].charAt(0)&&(d("HTML string cannot start with a '#' character"),a.error("JQMIGRATE: Invalid selector string (XSS)")),c&&c.context&&(c=c.context),a.parseHTML)?q.call(this,a.parseHTML(f[2],c,!0),c,e):q.apply(this,arguments)},a.fn.init.prototype=a.fn,a.parseJSON=function(a){return a||null===a?r.apply(this,arguments):(d("jQuery.parseJSON requires a valid JSON string"),null)},a.uaMatch=function(a){a=a.toLowerCase();var b=/(chrome)[ \/]([\w.]+)/.exec(a)||/(webkit)[ \/]([\w.]+)/.exec(a)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(a)||/(msie) ([\w.]+)/.exec(a)||0>a.indexOf("compatible")&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(a)||[];return{browser:b[1]||"",version:b[2]||"0"}},a.browser||(o=a.uaMatch(navigator.userAgent),p={},o.browser&&(p[o.browser]=!0,p.version=o.version),p.chrome?p.webkit=!0:p.webkit&&(p.safari=!0),a.browser=p),e(a,"browser",a.browser,"jQuery.browser is deprecated"),a.sub=function(){function b(a,c){return new b.fn.init(a,c)}a.extend(!0,b,this),b.superclass=this,b.fn=b.prototype=this(),b.fn.constructor=b,b.sub=this.sub,b.fn.init=function(d,e){return e&&e instanceof a&&!(e instanceof b)&&(e=b(e)),a.fn.init.call(this,d,e,c)},b.fn.init.prototype=b.fn;var c=b(document);return d("jQuery.sub() is deprecated"),b},a.ajaxSetup({converters:{"text json":a.parseJSON}});var t=a.fn.data;a.fn.data=function(b){var e,f,g=this[0];return!g||"events"!==b||1!==arguments.length||(e=a.data(g,b),f=a._data(g,b),e!==c&&e!==f||f===c)?t.apply(this,arguments):(d("Use of jQuery.fn.data('events') is deprecated"),f)};var u=/\/(java|ecma)script/i,v=a.fn.andSelf||a.fn.addBack;a.fn.andSelf=function(){return d("jQuery.fn.andSelf() replaced by jQuery.fn.addBack()"),v.apply(this,arguments)},a.clean||(a.clean=function(b,e,f,g){e=e||document,e=!e.nodeType&&e[0]||e,e=e.ownerDocument||e,d("jQuery.clean() is deprecated");var h,i,j,k,l=[];if(a.merge(l,a.buildFragment(b,e).childNodes),f)for(j=function(a){return!a.type||u.test(a.type)?g?g.push(a.parentNode?a.parentNode.removeChild(a):a):f.appendChild(a):c},h=0;null!=(i=l[h]);h++)a.nodeName(i,"script")&&j(i)||(f.appendChild(i),i.getElementsByTagName!==c&&(k=a.grep(a.merge([],i.getElementsByTagName("script")),j),l.splice.apply(l,[h+1,0].concat(k)),h+=k.length));return l});var w=a.event.add,x=a.event.remove,y=a.event.trigger,z=a.fn.toggle,A=a.fn.live,B=a.fn.die,C="ajaxStart|ajaxStop|ajaxSend|ajaxComplete|ajaxError|ajaxSuccess",D=RegExp("\\b(?:"+C+")\\b"),E=/(?:^|\s)hover(\.\S+|)\b/,F=function(b){return"string"!=typeof b||a.event.special.hover?b:(E.test(b)&&d("'hover' pseudo-event is deprecated, use 'mouseenter mouseleave'"),b&&b.replace(E,"mouseenter$1 mouseleave$1"))};a.event.props&&"attrChange"!==a.event.props[0]&&a.event.props.unshift("attrChange","attrName","relatedNode","srcElement"),a.event.dispatch&&e(a.event,"handle",a.event.dispatch,"jQuery.event.handle is undocumented and deprecated"),a.event.add=function(a,b,c,e,f){a!==document&&D.test(b)&&d("AJAX events should be attached to document: "+b),w.call(this,a,F(b||""),c,e,f)},a.event.remove=function(a,b,c,d,e){x.call(this,a,F(b)||"",c,d,e)},a.fn.error=function(){var a=Array.prototype.slice.call(arguments,0);return d("jQuery.fn.error() is deprecated"),a.splice(0,0,"error"),arguments.length?this.bind.apply(this,a):(this.triggerHandler.apply(this,a),this)},a.fn.toggle=function(b,c){if(!a.isFunction(b)||!a.isFunction(c))return z.apply(this,arguments);d("jQuery.fn.toggle(handler, handler...) is deprecated");var e=arguments,f=b.guid||a.guid++,g=0,h=function(c){var d=(a._data(this,"lastToggle"+b.guid)||0)%g;return a._data(this,"lastToggle"+b.guid,d+1),c.preventDefault(),e[d].apply(this,arguments)||!1};for(h.guid=f;e.length>g;)e[g++].guid=f;return this.click(h)},a.fn.live=function(b,c,e){return d("jQuery.fn.live() is deprecated"),A?A.apply(this,arguments):(a(this.context).on(b,this.selector,c,e),this)},a.fn.die=function(b,c){return d("jQuery.fn.die() is deprecated"),B?B.apply(this,arguments):(a(this.context).off(b,this.selector||"**",c),this)},a.event.trigger=function(a,b,c,e){return c||D.test(a)||d("Global events are undocumented and deprecated"),y.call(this,a,b,c||document,e)},a.each(C.split("|"),function(b,c){a.event.special[c]={setup:function(){var b=this;return b!==document&&(a.event.add(document,c+"."+a.guid,function(){a.event.trigger(c,null,b,!0)}),a._data(this,c,a.guid++)),!1},teardown:function(){return this!==document&&a.event.remove(document,c+"."+a._data(this,c)),!1}}})}(jQuery,window),function(a,b){function c(b,c){var e,f,g,h=b.nodeName.toLowerCase();return"area"===h?(e=b.parentNode,f=e.name,b.href&&f&&"map"===e.nodeName.toLowerCase()?(g=a("img[usemap=#"+f+"]")[0],!!g&&d(g)):!1):(/input|select|textarea|button|object/.test(h)?!b.disabled:"a"===h?b.href||c:c)&&d(b)}function d(b){return a.expr.filters.visible(b)&&!a(b).parents().addBack().filter(function(){return"hidden"===a.css(this,"visibility")}).length}var e=0,f=/^ui-id-\d+$/;a.ui=a.ui||{},a.extend(a.ui,{version:"1.10.2",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),a.fn.extend({focus:function(b){return function(c,d){return"number"==typeof c?this.each(function(){var b=this;setTimeout(function(){a(b).focus(),d&&d.call(b)},c)}):b.apply(this,arguments)}}(a.fn.focus),scrollParent:function(){var b;return b=a.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(a.css(this,"position"))&&/(auto|scroll)/.test(a.css(this,"overflow")+a.css(this,"overflow-y")+a.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(a.css(this,"overflow")+a.css(this,"overflow-y")+a.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!b.length?a(document):b},zIndex:function(c){if(c!==b)return this.css("zIndex",c);if(this.length)for(var d,e,f=a(this[0]);f.length&&f[0]!==document;){if(d=f.css("position"),("absolute"===d||"relative"===d||"fixed"===d)&&(e=parseInt(f.css("zIndex"),10),!isNaN(e)&&0!==e))return e;f=f.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++e)})},removeUniqueId:function(){return this.each(function(){f.test(this.id)&&a(this).removeAttr("id")})}}),a.extend(a.expr[":"],{data:a.expr.createPseudo?a.expr.createPseudo(function(b){return function(c){return!!a.data(c,b)}}):function(b,c,d){return!!a.data(b,d[3])},focusable:function(b){return c(b,!isNaN(a.attr(b,"tabindex")))},tabbable:function(b){var d=a.attr(b,"tabindex"),e=isNaN(d);return(e||d>=0)&&c(b,!e)}}),a("<a>").outerWidth(1).jquery||a.each(["Width","Height"],function(c,d){function e(b,c,d,e){return a.each(f,function(){c-=parseFloat(a.css(b,"padding"+this))||0,d&&(c-=parseFloat(a.css(b,"border"+this+"Width"))||0),e&&(c-=parseFloat(a.css(b,"margin"+this))||0)}),c}var f="Width"===d?["Left","Right"]:["Top","Bottom"],g=d.toLowerCase(),h={innerWidth:a.fn.innerWidth,innerHeight:a.fn.innerHeight,outerWidth:a.fn.outerWidth,outerHeight:a.fn.outerHeight};a.fn["inner"+d]=function(c){return c===b?h["inner"+d].call(this):this.each(function(){a(this).css(g,e(this,c)+"px")})},a.fn["outer"+d]=function(b,c){return"number"!=typeof b?h["outer"+d].call(this,b):this.each(function(){a(this).css(g,e(this,b,!0,c)+"px")})}}),a.fn.addBack||(a.fn.addBack=function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}),a("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(a.fn.removeData=function(b){return function(c){return arguments.length?b.call(this,a.camelCase(c)):b.call(this)}}(a.fn.removeData)),a.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),a.support.selectstart="onselectstart"in document.createElement("div"),a.fn.extend({disableSelection:function(){return this.bind((a.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(a){a.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),a.extend(a.ui,{plugin:{add:function(b,c,d){var e,f=a.ui[b].prototype;for(e in d)f.plugins[e]=f.plugins[e]||[],f.plugins[e].push([c,d[e]])},call:function(a,b,c){var d,e=a.plugins[b];if(e&&a.element[0].parentNode&&11!==a.element[0].parentNode.nodeType)for(d=0;d<e.length;d++)a.options[e[d][0]]&&e[d][1].apply(a.element,c)}},hasScroll:function(b,c){if("hidden"===a(b).css("overflow"))return!1;var d=c&&"left"===c?"scrollLeft":"scrollTop",e=!1;return b[d]>0?!0:(b[d]=1,e=b[d]>0,b[d]=0,e)}})}(jQuery),function(a,b){var c=0,d=Array.prototype.slice,e=a.cleanData;a.cleanData=function(b){for(var c,d=0;null!=(c=b[d]);d++)try{a(c).triggerHandler("remove")}catch(f){}e(b)},a.widget=function(b,c,d){var e,f,g,h,i={},j=b.split(".")[0];b=b.split(".")[1],e=j+"-"+b,d||(d=c,c=a.Widget),a.expr[":"][e.toLowerCase()]=function(b){return!!a.data(b,e)},a[j]=a[j]||{},f=a[j][b],g=a[j][b]=function(a,b){return this._createWidget?(arguments.length&&this._createWidget(a,b),void 0):new g(a,b)},a.extend(g,f,{version:d.version,_proto:a.extend({},d),_childConstructors:[]}),h=new c,h.options=a.widget.extend({},h.options),a.each(d,function(b,d){return a.isFunction(d)?(i[b]=function(){var a=function(){return c.prototype[b].apply(this,arguments)},e=function(a){return c.prototype[b].apply(this,a)};return function(){var b,c=this._super,f=this._superApply;return this._super=a,this._superApply=e,b=d.apply(this,arguments),this._super=c,this._superApply=f,b}}(),void 0):(i[b]=d,void 0)}),g.prototype=a.widget.extend(h,{widgetEventPrefix:f?h.widgetEventPrefix:b},i,{constructor:g,namespace:j,widgetName:b,widgetFullName:e}),f?(a.each(f._childConstructors,function(b,c){var d=c.prototype;a.widget(d.namespace+"."+d.widgetName,g,c._proto)}),delete f._childConstructors):c._childConstructors.push(g),a.widget.bridge(b,g)},a.widget.extend=function(c){for(var e,f,g=d.call(arguments,1),h=0,i=g.length;i>h;h++)for(e in g[h])f=g[h][e],g[h].hasOwnProperty(e)&&f!==b&&(c[e]=a.isPlainObject(f)?a.isPlainObject(c[e])?a.widget.extend({},c[e],f):a.widget.extend({},f):f);return c},a.widget.bridge=function(c,e){var f=e.prototype.widgetFullName||c;a.fn[c]=function(g){var h="string"==typeof g,i=d.call(arguments,1),j=this;return g=!h&&i.length?a.widget.extend.apply(null,[g].concat(i)):g,h?this.each(function(){var d,e=a.data(this,f);return e?a.isFunction(e[g])&&"_"!==g.charAt(0)?(d=e[g].apply(e,i),d!==e&&d!==b?(j=d&&d.jquery?j.pushStack(d.get()):d,!1):void 0):a.error("no such method '"+g+"' for "+c+" widget instance"):a.error("cannot call methods on "+c+" prior to initialization; "+"attempted to call method '"+g+"'")}):this.each(function(){var b=a.data(this,f);b?b.option(g||{})._init():a.data(this,f,new e(g,this))}),j}},a.Widget=function(){},a.Widget._childConstructors=[],a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(b,d){d=a(d||this.defaultElement||this)[0],this.element=a(d),this.uuid=c++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=a.widget.extend({},this.options,this._getCreateOptions(),b),this.bindings=a(),this.hoverable=a(),this.focusable=a(),d!==this&&(a.data(d,this.widgetFullName,this),this._on(!0,this.element,{remove:function(a){a.target===d&&this.destroy()}}),this.document=a(d.style?d.ownerDocument:d.document||d),this.window=a(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:a.noop,_getCreateEventData:a.noop,_create:a.noop,_init:a.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(a.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled "+"ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:a.noop,widget:function(){return this.element},option:function(c,d){var e,f,g,h=c;if(0===arguments.length)return a.widget.extend({},this.options);if("string"==typeof c)if(h={},e=c.split("."),c=e.shift(),e.length){for(f=h[c]=a.widget.extend({},this.options[c]),g=0;g<e.length-1;g++)f[e[g]]=f[e[g]]||{},f=f[e[g]];if(c=e.pop(),d===b)return f[c]===b?null:f[c];f[c]=d}else{if(d===b)return this.options[c]===b?null:this.options[c];h[c]=d}return this._setOptions(h),this},_setOptions:function(a){var b;for(b in a)this._setOption(b,a[b]);return this},_setOption:function(a,b){return this.options[a]=b,"disabled"===a&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!b).attr("aria-disabled",b),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(b,c,d){var e,f=this;"boolean"!=typeof b&&(d=c,c=b,b=!1),d?(c=e=a(c),this.bindings=this.bindings.add(c)):(d=c,c=this.element,e=this.widget()),a.each(d,function(d,g){function h(){return b||f.options.disabled!==!0&&!a(this).hasClass("ui-state-disabled")?("string"==typeof g?f[g]:g).apply(f,arguments):void 0}"string"!=typeof g&&(h.guid=g.guid=g.guid||h.guid||a.guid++);var i=d.match(/^(\w+)\s*(.*)$/),j=i[1]+f.eventNamespace,k=i[2];k?e.delegate(k,j,h):c.bind(j,h)})},_off:function(a,b){b=(b||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,a.unbind(b).undelegate(b)},_delay:function(a,b){function c(){return("string"==typeof a?d[a]:a).apply(d,arguments)}var d=this;return setTimeout(c,b||0)},_hoverable:function(b){this.hoverable=this.hoverable.add(b),this._on(b,{mouseenter:function(b){a(b.currentTarget).addClass("ui-state-hover")},mouseleave:function(b){a(b.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(b){this.focusable=this.focusable.add(b),this._on(b,{focusin:function(b){a(b.currentTarget).addClass("ui-state-focus")},focusout:function(b){a(b.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(b,c,d){var e,f,g=this.options[b];if(d=d||{},c=a.Event(c),c.type=(b===this.widgetEventPrefix?b:this.widgetEventPrefix+b).toLowerCase(),c.target=this.element[0],f=c.originalEvent)for(e in f)e in c||(c[e]=f[e]);return this.element.trigger(c,d),!(a.isFunction(g)&&g.apply(this.element[0],[c].concat(d))===!1||c.isDefaultPrevented())}},a.each({show:"fadeIn",hide:"fadeOut"},function(b,c){a.Widget.prototype["_"+b]=function(d,e,f){"string"==typeof e&&(e={effect:e});var g,h=e?e===!0||"number"==typeof e?c:e.effect||c:b;e=e||{},"number"==typeof e&&(e={duration:e}),g=!a.isEmptyObject(e),e.complete=f,e.delay&&d.delay(e.delay),g&&a.effects&&a.effects.effect[h]?d[b](e):h!==b&&d[h]?d[h](e.duration,e.easing,f):d.queue(function(c){a(this)[b](),f&&f.call(d[0]),c()})}})}(jQuery),function(a){var b=!1;a(document).mouseup(function(){b=!1}),a.widget("ui.mouse",{version:"1.10.2",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var b=this;this.element.bind("mousedown."+this.widgetName,function(a){return b._mouseDown(a)}).bind("click."+this.widgetName,function(c){return!0===a.data(c.target,b.widgetName+".preventClickEvent")?(a.removeData(c.target,b.widgetName+".preventClickEvent"),c.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(c){if(!b){this._mouseStarted&&this._mouseUp(c),this._mouseDownEvent=c;var d=this,e=1===c.which,f="string"==typeof this.options.cancel&&c.target.nodeName?a(c.target).closest(this.options.cancel).length:!1;return e&&!f&&this._mouseCapture(c)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){d.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(c)&&this._mouseDelayMet(c)&&(this._mouseStarted=this._mouseStart(c)!==!1,!this._mouseStarted)?(c.preventDefault(),!0):(!0===a.data(c.target,this.widgetName+".preventClickEvent")&&a.removeData(c.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(a){return d._mouseMove(a)},this._mouseUpDelegate=function(a){return d._mouseUp(a)},a(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),c.preventDefault(),b=!0,!0)):!0}},_mouseMove:function(b){return a.ui.ie&&(!document.documentMode||document.documentMode<9)&&!b.button?this._mouseUp(b):this._mouseStarted?(this._mouseDrag(b),b.preventDefault()):(this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,b)!==!1,this._mouseStarted?this._mouseDrag(b):this._mouseUp(b)),!this._mouseStarted)},_mouseUp:function(b){return a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,b.target===this._mouseDownEvent.target&&a.data(b.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(b)),!1},_mouseDistanceMet:function(a){return Math.max(Math.abs(this._mouseDownEvent.pageX-a.pageX),Math.abs(this._mouseDownEvent.pageY-a.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(jQuery),function(a){var b=5;a.widget("ui.slider",a.ui.mouse,{version:"1.10.2",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget"+" ui-widget-content"+" ui-corner-all"),this._refresh(),this._setOption("disabled",this.options.disabled),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var b,c,d=this.options,e=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),f="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",g=[];for(c=d.values&&d.values.length||1,e.length>c&&(e.slice(c).remove(),e=e.slice(0,c)),b=e.length;c>b;b++)g.push(f);this.handles=e.add(a(g.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.each(function(b){a(this).data("ui-slider-handle-index",b)})},_createRange:function(){var b=this.options,c="";b.range?(b.range===!0&&(b.values?b.values.length&&2!==b.values.length?b.values=[b.values[0],b.values[0]]:a.isArray(b.values)&&(b.values=b.values.slice(0)):b.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({left:"",bottom:""}):(this.range=a("<div></div>").appendTo(this.element),c="ui-slider-range ui-widget-header ui-corner-all"),this.range.addClass(c+("min"===b.range||"max"===b.range?" ui-slider-range-"+b.range:""))):this.range=a([])},_setupEvents:function(){var a=this.handles.add(this.range).filter("a");this._off(a),this._on(a,this._handleEvents),this._hoverable(a),this._focusable(a)},_destroy:function(){this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(b){var c,d,e,f,g,h,i,j,k=this,l=this.options;return l.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),c={x:b.pageX,y:b.pageY},d=this._normValueFromMouse(c),e=this._valueMax()-this._valueMin()+1,this.handles.each(function(b){var c=Math.abs(d-k.values(b));(e>c||e===c&&(b===k._lastChangedValue||k.values(b)===l.min))&&(e=c,f=a(this),g=b)}),h=this._start(b,g),h===!1?!1:(this._mouseSliding=!0,this._handleIndex=g,f.addClass("ui-state-active").focus(),i=f.offset(),j=!a(b.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=j?{left:0,top:0}:{left:b.pageX-i.left-f.width()/2,top:b.pageY-i.top-f.height()/2-(parseInt(f.css("borderTopWidth"),10)||0)-(parseInt(f.css("borderBottomWidth"),10)||0)+(parseInt(f.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(b,g,d),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(a){var b={x:a.pageX,y:a.pageY},c=this._normValueFromMouse(b);return this._slide(a,this._handleIndex,c),!1},_mouseStop:function(a){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(a,this._handleIndex),this._change(a,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(a){var b,c,d,e,f;return"horizontal"===this.orientation?(b=this.elementSize.width,c=a.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(b=this.elementSize.height,c=a.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),d=c/b,d>1&&(d=1),0>d&&(d=0),"vertical"===this.orientation&&(d=1-d),e=this._valueMax()-this._valueMin(),f=this._valueMin()+d*e,this._trimAlignValue(f)},_start:function(a,b){var c={handle:this.handles[b],value:this.value()};return this.options.values&&this.options.values.length&&(c.value=this.values(b),c.values=this.values()),this._trigger("start",a,c)},_slide:function(a,b,c){var d,e,f;this.options.values&&this.options.values.length?(d=this.values(b?0:1),2===this.options.values.length&&this.options.range===!0&&(0===b&&c>d||1===b&&d>c)&&(c=d),c!==this.values(b)&&(e=this.values(),e[b]=c,f=this._trigger("slide",a,{handle:this.handles[b],value:c,values:e}),d=this.values(b?0:1),f!==!1&&this.values(b,c,!0))):c!==this.value()&&(f=this._trigger("slide",a,{handle:this.handles[b],value:c}),f!==!1&&this.value(c))},_stop:function(a,b){var c={handle:this.handles[b],value:this.value()};this.options.values&&this.options.values.length&&(c.value=this.values(b),c.values=this.values()),this._trigger("stop",a,c)},_change:function(a,b){if(!this._keySliding&&!this._mouseSliding){var c={handle:this.handles[b],value:this.value()};this.options.values&&this.options.values.length&&(c.value=this.values(b),c.values=this.values()),this._lastChangedValue=b,this._trigger("change",a,c)}},value:function(a){return arguments.length?(this.options.value=this._trimAlignValue(a),this._refreshValue(),this._change(null,0),void 0):this._value()},values:function(b,c){var d,e,f;if(arguments.length>1)return this.options.values[b]=this._trimAlignValue(c),this._refreshValue(),this._change(null,b),void 0;if(!arguments.length)return this._values();if(!a.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(b):this.value();for(d=this.options.values,e=arguments[0],f=0;f<d.length;f+=1)d[f]=this._trimAlignValue(e[f]),this._change(null,f);this._refreshValue()},_setOption:function(b,c){var d,e=0;switch("range"===b&&this.options.range===!0&&("min"===c?(this.options.value=this._values(0),this.options.values=null):"max"===c&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),a.isArray(this.options.values)&&(e=this.options.values.length),a.Widget.prototype._setOption.apply(this,arguments),b){case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),d=0;e>d;d+=1)this._change(null,d);this._animateOff=!1;break;case"min":case"max":this._animateOff=!0,this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_value:function(){var a=this.options.value;return a=this._trimAlignValue(a)},_values:function(a){var b,c,d;if(arguments.length)return b=this.options.values[a],b=this._trimAlignValue(b);if(this.options.values&&this.options.values.length){for(c=this.options.values.slice(),d=0;d<c.length;d+=1)c[d]=this._trimAlignValue(c[d]);return c}return[]},_trimAlignValue:function(a){if(a<=this._valueMin())return this._valueMin();if(a>=this._valueMax())return this._valueMax();var b=this.options.step>0?this.options.step:1,c=(a-this._valueMin())%b,d=a-c;return 2*Math.abs(c)>=b&&(d+=c>0?b:-b),parseFloat(d.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var b,c,d,e,f,g=this.options.range,h=this.options,i=this,j=this._animateOff?!1:h.animate,k={};this.options.values&&this.options.values.length?this.handles.each(function(d){c=100*((i.values(d)-i._valueMin())/(i._valueMax()-i._valueMin())),k["horizontal"===i.orientation?"left":"bottom"]=c+"%",a(this).stop(1,1)[j?"animate":"css"](k,h.animate),i.options.range===!0&&("horizontal"===i.orientation?(0===d&&i.range.stop(1,1)[j?"animate":"css"]({left:c+"%"},h.animate),1===d&&i.range[j?"animate":"css"]({width:c-b+"%"},{queue:!1,duration:h.animate})):(0===d&&i.range.stop(1,1)[j?"animate":"css"]({bottom:c+"%"},h.animate),1===d&&i.range[j?"animate":"css"]({height:c-b+"%"},{queue:!1,duration:h.animate}))),b=c}):(d=this.value(),e=this._valueMin(),f=this._valueMax(),c=f!==e?100*((d-e)/(f-e)):0,k["horizontal"===this.orientation?"left":"bottom"]=c+"%",this.handle.stop(1,1)[j?"animate":"css"](k,h.animate),"min"===g&&"horizontal"===this.orientation&&this.range.stop(1,1)[j?"animate":"css"]({width:c+"%"},h.animate),"max"===g&&"horizontal"===this.orientation&&this.range[j?"animate":"css"]({width:100-c+"%"},{queue:!1,duration:h.animate}),"min"===g&&"vertical"===this.orientation&&this.range.stop(1,1)[j?"animate":"css"]({height:c+"%"},h.animate),"max"===g&&"vertical"===this.orientation&&this.range[j?"animate":"css"]({height:100-c+"%"},{queue:!1,duration:h.animate}))},_handleEvents:{keydown:function(c){var d,e,f,g,h=a(c.target).data("ui-slider-handle-index");switch(c.keyCode){case a.ui.keyCode.HOME:case a.ui.keyCode.END:case a.ui.keyCode.PAGE_UP:case a.ui.keyCode.PAGE_DOWN:case a.ui.keyCode.UP:case a.ui.keyCode.RIGHT:case a.ui.keyCode.DOWN:case a.ui.keyCode.LEFT:if(c.preventDefault(),!this._keySliding&&(this._keySliding=!0,a(c.target).addClass("ui-state-active"),d=this._start(c,h),d===!1))return}switch(g=this.options.step,e=f=this.options.values&&this.options.values.length?this.values(h):this.value(),c.keyCode){case a.ui.keyCode.HOME:f=this._valueMin();break;case a.ui.keyCode.END:f=this._valueMax();break;case a.ui.keyCode.PAGE_UP:f=this._trimAlignValue(e+(this._valueMax()-this._valueMin())/b);break;case a.ui.keyCode.PAGE_DOWN:f=this._trimAlignValue(e-(this._valueMax()-this._valueMin())/b);break;case a.ui.keyCode.UP:case a.ui.keyCode.RIGHT:if(e===this._valueMax())return;f=this._trimAlignValue(e+g);break;case a.ui.keyCode.DOWN:case a.ui.keyCode.LEFT:if(e===this._valueMin())return;f=this._trimAlignValue(e-g)}this._slide(c,h,f)},click:function(a){a.preventDefault()},keyup:function(b){var c=a(b.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(b,c),this._change(b,c),a(b.target).removeClass("ui-state-active"))}}})}(jQuery),function(a){a.fn.extend({airport:function(b){function c(a,b){return a+new Array(b-a.length+1).join(" ")}function d(c,h,i,j){i>=b.length||j>=g||(a(e).find(".c"+c).html(" "==f[h]?"&nbsp;":f[h]),setTimeout(function(){h>f.length?d(c+1,0,i,j+1):f[h]!=b[i].substring(j,j+1)?d(c,h+1,i,j):d(c+1,0,i,j+1)},1))}var e=a(this),f=["a","b","c","d","e","f","g"," ","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","-",".",":","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","1","2","3","4","5","6","7","8","9","0"],g=0,h=items2=b.length;for(a(this).empty();h--;)b[h].length>g&&(g=b[h].length);for(;items2--;)b[items2]=c(b[items2],g);for(spans=g;spans--;)a(this).prepend("<span class='c"+spans+"'></span>");d(0,0,0,0)}})}(jQuery),function(a,b,c){!function(a){"use strict";"function"==typeof define&&define.amd?define(["jquery"],a):jQuery&&!jQuery.fn.qtip&&a(jQuery)}(function(d){function e(c){p={pageX:c.pageX,pageY:c.pageY,type:"mousemove",scrollX:a.pageXOffset||b.body.scrollLeft||b.documentElement.scrollLeft,scrollY:a.pageYOffset||b.body.scrollTop||b.documentElement.scrollTop}}function f(a){var b=function(a){return a===t||"object"!=typeof a},c=function(a){return!d.isFunction(a)&&(!a&&!a.attr||a.length<1||"object"==typeof a&&!a.jquery&&!a.then)};return a&&"object"==typeof a?(b(a.metadata)&&(a.metadata={type:a.metadata}),"content"in a&&((b(a.content)||a.content.jquery)&&(a.content={text:a.content}),c(a.content.text||s)&&(a.content.text=s),"title"in a.content&&(b(a.content.title)&&(a.content.title={text:a.content.title}),c(a.content.title.text||s)&&(a.content.title.text=s))),"position"in a&&b(a.position)&&(a.position={my:a.position,at:a.position}),"show"in a&&b(a.show)&&(a.show=a.show.jquery?{target:a.show}:{event:a.show}),"hide"in a&&b(a.hide)&&(a.hide=a.hide.jquery?{target:a.hide}:{event:a.hide}),"style"in a&&b(a.style)&&(a.style={classes:a.style}),d.each(o,function(){this.sanitize&&this.sanitize(a)}),a):s}function g(g,h,i,j){function k(a){for(var b,c=0,d=h,e=a.split(".");d=d[e[c++]];)c<e.length&&(b=d);return[b||h,e.pop()]}function l(a){return H.concat("").join(a?"-"+a+" ":" ")}function m(){var a=h.style.widget,b=W.hasClass(Y);W.removeClass(Y),Y=a?"ui-state-disabled":"qtip-disabled",W.toggleClass(Y,b),W.toggleClass("ui-helper-reset "+l(),a).toggleClass(J,h.style.def&&!a),Q.content&&Q.content.toggleClass(l("content"),a),Q.titlebar&&Q.titlebar.toggleClass(l("header"),a),Q.button&&Q.button.toggleClass(F+"-icon",!a)}function u(a){Q.title&&(Q.titlebar.remove(),Q.titlebar=Q.title=Q.button=t,a!==s&&S.reposition())}function v(){var a=h.content.title.button,b="string"==typeof a,c=b?a:"Close tooltip";Q.button&&Q.button.remove(),Q.button=a.jquery?a:d("<a />",{"class":"qtip-close "+(h.style.widget?"":F+"-icon"),title:c,"aria-label":c}).prepend(d("<span />",{"class":"ui-icon ui-icon-close",html:"&times;"})),Q.button.appendTo(Q.titlebar||W).attr("role","button").click(function(a){return W.hasClass(Y)||S.hide(a),s})}function w(){var a=T+"-title";Q.titlebar&&u(),Q.titlebar=d("<div />",{"class":F+"-titlebar "+(h.style.widget?l("header"):"")}).append(Q.title=d("<div />",{id:a,"class":F+"-title","aria-atomic":r})).insertBefore(Q.content).delegate(".qtip-close","mousedown keydown mouseup keyup mouseout",function(a){d(this).toggleClass("ui-state-active ui-state-focus","down"===a.type.substr(-4))
}).delegate(".qtip-close","mouseover mouseout",function(a){d(this).toggleClass("ui-state-hover","mouseover"===a.type)}),h.content.title.button&&v()}function x(a){var b=Q.button;return S.rendered?(a?v():b.remove(),void 0):s}function D(a,b){var c=Q.title;return S.rendered&&a?(d.isFunction(a)&&(a=a.call(g,R.event,S)),a===s||!a&&""!==a?u(s):(a.jquery&&a.length>0?c.empty().append(a.css({display:"block"})):c.html(a),b!==s&&S.rendered&&W[0].offsetWidth>0&&S.reposition(R.event),void 0)):s}function E(a){a&&d.isFunction(a.done)&&a.done(function(a){M(a,null,s)})}function M(a,b,e){function f(a){function e(c){c&&(delete g[c.src],clearTimeout(S.timers.img[c.src]),d(c).unbind(X)),d.isEmptyObject(g)&&(b!==s&&S.reposition(R.event),a())}var f,g={};return 0===(f=i.find("img[src]:not([height]):not([width])")).length?e():(f.each(function(a,b){if(g[b.src]===c){var f=0,h=3;!function i(){return b.height||b.width||f>h?e(b):(f+=1,S.timers.img[b.src]=setTimeout(i,700),void 0)}(),d(b).bind("error"+X+" load"+X,function(){e(this)}),g[b.src]=b}}),void 0)}var i=Q.content;return S.rendered&&a?(d.isFunction(a)&&(a=a.call(g,R.event,S)||""),e!==s&&E(h.content.deferred),a.jquery&&a.length>0?i.empty().append(a.css({display:"block"})):i.html(a),S.rendered<0?W.queue("fx",f):(V=0,f(d.noop)),S):s}function O(){function c(a){if(W.hasClass(Y))return s;clearTimeout(S.timers.show),clearTimeout(S.timers.hide);var b=function(){S.toggle(r,a)};h.show.delay>0?S.timers.show=setTimeout(b,h.show.delay):b()}function f(a){if(W.hasClass(Y)||U||V)return s;var b=d(a.relatedTarget||a.target),c=b.closest(I)[0]===W[0],e=b[0]===m.show[0];if(clearTimeout(S.timers.show),clearTimeout(S.timers.hide),"mouse"===l.target&&c||h.hide.fixed&&/mouse(out|leave|move)/.test(a.type)&&(c||e))try{a.preventDefault(),a.stopImmediatePropagation()}catch(f){}else h.hide.delay>0?S.timers.hide=setTimeout(function(){S.hide(a)},h.hide.delay):S.hide(a)}function j(a){return W.hasClass(Y)?s:(clearTimeout(S.timers.inactive),S.timers.inactive=setTimeout(function(){S.hide(a)},h.hide.inactive),void 0)}function k(a){S.rendered&&W[0].offsetWidth>0&&S.reposition(a)}var l=h.position,m={show:h.show.target,hide:h.hide.target,viewport:d(l.viewport),document:d(b),body:d(b.body),window:d(a)},o={show:d.trim(""+h.show.event).split(" "),hide:d.trim(""+h.hide.event).split(" ")};d.browser.msie&&6===parseInt(d.browser.version,10),W.bind("mouseenter"+X+" mouseleave"+X,function(a){var b="mouseenter"===a.type;b&&S.focus(a),W.toggleClass(L,b)}),/mouse(out|leave)/i.test(h.hide.event)&&"window"===h.hide.leave&&m.window.bind("mouseout"+X+" blur"+X,function(a){/select|option/.test(a.target.nodeName)||a.relatedTarget||S.hide(a)}),h.hide.fixed?(m.hide=m.hide.add(W),W.bind("mouseover"+X,function(){W.hasClass(Y)||clearTimeout(S.timers.hide)})):/mouse(over|enter)/i.test(h.show.event)&&m.hide.bind("mouseleave"+X,function(){clearTimeout(S.timers.show)}),(""+h.hide.event).indexOf("unfocus")>-1&&l.container.closest("html").bind("mousedown"+X+" touchstart"+X,function(a){var b=d(a.target),c=(S.rendered&&!W.hasClass(Y)&&W[0].offsetWidth>0,b.parents(I).filter(W[0]).length>0);b[0]===g[0]||b[0]===W[0]||c||g.has(b[0]).length||b.attr("disabled")||S.hide(a)}),"number"==typeof h.hide.inactive&&(m.show.bind("qtip-"+i+"-inactive",j),d.each(n.inactiveEvents,function(a,b){m.hide.add(Q.tooltip).bind(b+X+"-inactive",j)})),d.each(o.hide,function(a,b){var e=d.inArray(b,o.show),g=d(m.hide);e>-1&&g.add(m.show).length===g.length||"unfocus"===b?(m.show.bind(b+X,function(a){W[0].offsetWidth>0?f(a):c(a)}),delete o.show[e]):m.hide.bind(b+X,f)}),d.each(o.show,function(a,b){m.show.bind(b+X,c)}),"number"==typeof h.hide.distance&&m.show.add(W).bind("mousemove"+X,function(a){var b=R.origin||{},c=h.hide.distance,d=Math.abs;(d(a.pageX-b.pageX)>=c||d(a.pageY-b.pageY)>=c)&&S.hide(a)}),"mouse"===l.target&&(m.show.bind("mousemove"+X,e),l.adjust.mouse&&(h.hide.event&&(W.bind("mouseleave"+X,function(a){(a.relatedTarget||a.target)!==m.show[0]&&S.hide(a)}),Q.target.bind("mouseenter"+X+" mouseleave"+X,function(a){R.onTarget="mouseenter"===a.type})),m.document.bind("mousemove"+X,function(a){S.rendered&&R.onTarget&&!W.hasClass(Y)&&W[0].offsetWidth>0&&S.reposition(a||p)}))),(l.adjust.resize||m.viewport.length)&&(d.event.special.resize?m.viewport:m.window).bind("resize"+X,k),m.window.bind("scroll"+X,k)}function P(){var c=[h.show.target[0],h.hide.target[0],S.rendered&&Q.tooltip[0],h.position.container[0],h.position.viewport[0],h.position.container.closest("html")[0],a,b];S.rendered?d([]).pushStack(d.grep(c,function(a){return"object"==typeof a})).unbind(X):h.show.target.unbind(X+"-create")}var Q,R,S=this,T=(b.body,F+"-"+i),U=0,V=0,W=d(),X=".qtip-"+i,Y="qtip-disabled";S.id=i,S.rendered=s,S.destroyed=s,S.elements=Q={target:g},S.timers={img:{}},S.options=h,S.checks={},S.plugins={},S.cache=R={event:{},target:d(),disabled:s,attr:j,onTarget:s,lastClass:""},S.checks.builtin={"^id$":function(a,b,c){var e=c===r?n.nextid:c,f=F+"-"+e;e!==s&&e.length>0&&!d("#"+f).length&&(W[0].id=f,Q.content[0].id=f+"-content",Q.title[0].id=f+"-title")},"^content.text$":function(){M(h.content.text)},"^content.deferred$":function(){E(h.content.deferred)},"^content.title.text$":function(a,b,c){return c?(!Q.title&&c&&w(),D(c),void 0):u()},"^content.title.button$":function(a,b,c){x(c)},"^position.(my|at)$":function(a,b,c){"string"==typeof c&&(a[b]=new o.Corner(c))},"^position.container$":function(a,b,c){S.rendered&&W.appendTo(c)},"^show.ready$":function(){S.rendered?S.toggle(r):S.render(1)},"^style.classes$":function(a,b,c){W.attr("class",F+" qtip "+c)},"^style.width|height":function(a,b,c){W.css(b,c)},"^style.widget|content.title":m,"^events.(render|show|move|hide|focus|blur)$":function(a,b,c){W[(d.isFunction(c)?"":"un")+"bind"]("tooltip"+b,c)},"^(show|hide|position).(event|target|fixed|inactive|leave|distance|viewport|adjust)":function(){var a=h.position;W.attr("tracking","mouse"===a.target&&a.adjust.mouse),P(),O()}},d.extend(S,{_triggerEvent:function(a,b,c){var e=d.Event("tooltip"+a);return e.originalEvent=(c?d.extend({},c):t)||R.event||t,W.trigger(e,[S].concat(b||[])),!e.isDefaultPrevented()},render:function(a){if(S.rendered)return S;var b=h.content.text,c=h.content.title,e=h.position;return d.attr(g[0],"aria-describedby",T),W=Q.tooltip=d("<div/>",{id:T,"class":[F,J,h.style.classes,F+"-pos-"+h.position.my.abbrev()].join(" "),width:h.style.width||"",height:h.style.height||"",tracking:"mouse"===e.target&&e.adjust.mouse,role:"alert","aria-live":"polite","aria-atomic":s,"aria-describedby":T+"-content","aria-hidden":r}).toggleClass(Y,R.disabled).data("qtip",S).appendTo(h.position.container).append(Q.content=d("<div />",{"class":F+"-content",id:T+"-content","aria-atomic":r})),S.rendered=-1,U=1,c.text?(w(),d.isFunction(c.text)||D(c.text,s)):c.button&&v(),(!d.isFunction(b)||b.then)&&M(b,s),S.rendered=r,m(),d.each(h.events,function(a,b){d.isFunction(b)&&W.bind("toggle"===a?"tooltipshow tooltiphide":"tooltip"+a,b)}),d.each(o,function(){"render"===this.initialize&&this(S)}),O(),W.queue("fx",function(b){S._triggerEvent("render"),U=0,(h.show.ready||a)&&S.toggle(r,R.event,s),b()}),S},get:function(a){var b,c;switch(a.toLowerCase()){case"dimensions":b={height:W.outerHeight(s),width:W.outerWidth(s)};break;case"offset":b=o.offset(W,h.position.container);break;default:c=k(a.toLowerCase()),b=c[0][c[1]],b=b.precedance?b.string():b}return b},set:function(a,b){function c(a,b){var c,d,e;for(c in j)for(d in j[c])(e=new RegExp(d,"i").exec(a))&&(b.push(e),j[c][d].apply(S,b))}var e,g=/^position\.(my|at|adjust|target|container)|style|content|show\.ready/i,i=s,j=S.checks;return"string"==typeof a?(e=a,a={},a[e]=b):a=d.extend(r,{},a),d.each(a,function(b,c){var e,f=k(b.toLowerCase());e=f[0][f[1]],f[0][f[1]]="object"==typeof c&&c.nodeType?d(c):c,a[b]=[f[0],f[1],c,e],i=g.test(b)||i}),f(h),U=1,d.each(a,c),U=0,S.rendered&&W[0].offsetWidth>0&&i&&S.reposition("mouse"===h.position.target?t:R.event),S},toggle:function(a,c){function f(){a?(d.browser.msie&&W[0].style.removeAttribute("filter"),W.css("overflow",""),"string"==typeof j.autofocus&&d(j.autofocus,W).focus(),j.target.trigger("qtip-"+i+"-inactive")):W.css({display:"",visibility:"",opacity:"",left:"",top:""}),S._triggerEvent(a?"visible":"hidden")}if(c){if(/over|enter/.test(c.type)&&/out|leave/.test(R.event.type)&&h.show.target.add(c.target).length===h.show.target.length&&W.has(c.relatedTarget).length)return S;R.event=d.extend({},c)}if(!S.rendered)return a?S.render(1):S;var g=a?"show":"hide",j=h[g],k=(h[a?"hide":"show"],h.position),l=h.content,m=W[0].offsetWidth>0,n=a||1===j.target.length,o=!c||j.target.length<2||R.target[0]===c.target;return(typeof a).search("boolean|number")&&(a=!m),!W.is(":animated")&&m===a&&o?S:S._triggerEvent(g,[90])?(d.attr(W[0],"aria-hidden",!a),a?(R.origin=d.extend({},p),S.focus(c),d.isFunction(l.text)&&M(l.text,s),d.isFunction(l.title.text)&&D(l.title.text,s),!q&&"mouse"===k.target&&k.adjust.mouse&&(d(b).bind("mousemove.qtip",e),q=r),S.reposition(c,arguments[2]),j.solo&&d(I,j.solo).not(W).qtip("hide",d.Event("tooltipsolo"))):(clearTimeout(S.timers.show),delete R.origin,q&&!d(I+'[tracking="true"]:visible',j.solo).not(W).length&&(d(b).unbind("mousemove.qtip"),q=s),S.blur(c)),j.effect===s||n===s?(W[g](),f.call(W)):d.isFunction(j.effect)?(W.stop(1,1),j.effect.call(W,S),W.queue("fx",function(a){f(),a()})):W.fadeTo(90,a?1:0,f),a&&j.target.trigger("qtip-"+i+"-inactive"),S):S},show:function(a){return S.toggle(r,a)},hide:function(a){return S.toggle(s,a)},focus:function(a){if(!S.rendered)return S;var b=d(I),c=parseInt(W[0].style.zIndex,10),e=n.zindex+b.length,f=d.extend({},a);return W.hasClass(K)||S._triggerEvent("focus",[e],f)&&(c!==e&&(b.each(function(){this.style.zIndex>c&&(this.style.zIndex=this.style.zIndex-1)}),b.filter("."+K).qtip("blur",f)),W.addClass(K)[0].style.zIndex=e),S},blur:function(a){return W.removeClass(K),S._triggerEvent("blur",[W.css("zIndex")],a),S},reposition:function(c,e){if(!S.rendered||U)return S;U=1;var f,g,i=h.position.target,j=h.position,k=j.my,l=j.at,m=j.adjust,n=m.method.split(" "),q=W.outerWidth(s),r=W.outerHeight(s),t=0,u=0,v=W.css("position"),w=j.viewport,x={left:0,top:0},D=j.container,E=W[0].offsetWidth>0,F=c&&"scroll"===c.type,G=d(a);if(d.isArray(i)&&2===i.length)l={x:z,y:y},x={left:i[0],top:i[1]};else if("mouse"===i&&(c&&c.pageX||R.event.pageX))l={x:z,y:y},c=!p||!p.pageX||!m.mouse&&c&&c.pageX?(!c||"resize"!==c.type&&"scroll"!==c.type?c&&c.pageX&&"mousemove"===c.type?c:!m.mouse&&R.origin&&R.origin.pageX&&h.show.distance?R.origin:c:R.event)||c||R.event||p||{}:{pageX:p.pageX,pageY:p.pageY},"static"!==v&&(x=D.offset()),x={left:c.pageX-x.left,top:c.pageY-x.top},m.mouse&&F&&(x.left-=p.scrollX-G.scrollLeft(),x.top-=p.scrollY-G.scrollTop());else{if("event"===i&&c&&c.target&&"scroll"!==c.type&&"resize"!==c.type?R.target=d(c.target):"event"!==i&&(R.target=d(i.jquery?i:Q.target)),i=R.target,i=d(i).eq(0),0===i.length)return S;i[0]===b||i[0]===a?(t=o.iOS?a.innerWidth:i.width(),u=o.iOS?a.innerHeight:i.height(),i[0]===a&&(x={top:(w||i).scrollTop(),left:(w||i).scrollLeft()})):o.imagemap&&i.is("area")?f=o.imagemap(S,i,l,o.viewport?n:s):o.svg&&i[0].ownerSVGElement?f=o.svg(S,i,l,o.viewport?n:s):(t=i.outerWidth(s),u=i.outerHeight(s),x=o.offset(i,D)),f&&(t=f.width,u=f.height,g=f.offset,x=f.position),(o.iOS>3.1&&o.iOS<4.1||o.iOS>=4.3&&o.iOS<4.33||!o.iOS&&"fixed"===v)&&(x.left-=G.scrollLeft(),x.top-=G.scrollTop()),x.left+=l.x===B?t:l.x===C?t/2:0,x.top+=l.y===A?u:l.y===C?u/2:0}return x.left+=m.x+(k.x===B?-q:k.x===C?-q/2:0),x.top+=m.y+(k.y===A?-r:k.y===C?-r/2:0),o.viewport?(x.adjusted=o.viewport(S,x,j,t,u,q,r),g&&x.adjusted.left&&(x.left+=g.left),g&&x.adjusted.top&&(x.top+=g.top)):x.adjusted={left:0,top:0},S._triggerEvent("move",[x,w.elem||w],c)?(delete x.adjusted,e===s||!E||isNaN(x.left)||isNaN(x.top)||"mouse"===i||!d.isFunction(j.effect)?W.css(x):d.isFunction(j.effect)&&(j.effect.call(W,S,d.extend({},x)),W.queue(function(a){d(this).css({opacity:"",height:""}),d.browser.msie&&this.style.removeAttribute("filter"),a()})),U=0,S):S},disable:function(a){return"boolean"!=typeof a&&(a=!(W.hasClass(Y)||R.disabled)),S.rendered?(W.toggleClass(Y,a),d.attr(W[0],"aria-disabled",a)):R.disabled=!!a,S},enable:function(){return S.disable(s)},destroy:function(){var a=g[0],b=d.attr(a,N),c=g.data("qtip");return S.destroyed=r,S.rendered&&(W.stop(1,0).remove(),d.each(S.plugins,function(){this.destroy&&this.destroy()})),clearTimeout(S.timers.show),clearTimeout(S.timers.hide),P(),c&&S!==c||(d.removeData(a,"qtip"),h.suppress&&b&&(d.attr(a,"title",b),g.removeAttr(N)),g.removeAttr("aria-describedby")),g.unbind(".qtip-"+i),delete G[S.id],g}})}function h(a,c){var e,h,i,j,k,l=d(this),m=d(b.body),p=this===b?m:l,q=l.metadata?l.metadata(c.metadata):t,u="html5"===c.metadata.type&&q?q[c.metadata.name]:t,v=l.data(c.metadata.name||"qtipopts");try{v="string"==typeof v?d.parseJSON(v):v}catch(w){}if(j=d.extend(r,{},n.defaults,c,"object"==typeof v?f(v):t,f(u||q)),h=j.position,j.id=a,"boolean"==typeof j.content.text){if(i=l.attr(j.content.attr),j.content.attr===s||!i)return s;j.content.text=i}if(h.container.length||(h.container=m),h.target===s&&(h.target=p),j.show.target===s&&(j.show.target=p),j.show.solo===r&&(j.show.solo=h.container.closest("body")),j.hide.target===s&&(j.hide.target=p),j.position.viewport===r&&(j.position.viewport=h.container),h.container=h.container.eq(0),h.at=new o.Corner(h.at),h.my=new o.Corner(h.my),d.data(this,"qtip"))if(j.overwrite)l.qtip("destroy");else if(j.overwrite===s)return s;return j.suppress&&(k=d.attr(this,"title"))&&d(this).removeAttr("title").attr(N,k).attr("title",""),e=new g(l,j,a,!!i),d.data(this,"qtip",e),l.bind("remove.qtip-"+a+" removeqtip.qtip-"+a,function(){e.destroy()}),e}function i(a){var b,c=this,e=a.elements.tooltip,f=a.options.content.ajax,g=n.defaults.content.ajax,h=".qtip-ajax",i=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,j=r,k=s;a.checks.ajax={"^content.ajax":function(a,b,d){"ajax"===b&&(f=d),"once"===b?c.init():f&&f.url?c.load():e.unbind(h)}},d.extend(c,{init:function(){return f&&f.url&&e.unbind(h)[f.once?"one":"bind"]("tooltipshow"+h,c.load),c},load:function(e){function h(){var b;a.destroyed||(j=s,q&&(k=r,a.show(e.originalEvent)),(b=g.complete||f.complete)&&d.isFunction(b)&&b.apply(f.context||a,arguments))}function l(b,c,e){var h;a.destroyed||(n&&"string"==typeof b&&(b=d("<div/>").append(b.replace(i,"")).find(n)),(h=g.success||f.success)&&d.isFunction(h)?h.call(f.context||a,b,c,e):a.set("content.text",b))}function m(b,c,d){a.destroyed||0===b.status||a.set("content.text",c+": "+d)}if(k)return k=s,void 0;var n,o=f.url.lastIndexOf(" "),p=f.url,q=!f.loading&&j;if(q)try{e.preventDefault()}catch(t){}else if(e&&e.isDefaultPrevented())return c;b&&b.abort&&b.abort(),o>-1&&(n=p.substr(o),p=p.substr(0,o)),b=d.ajax(d.extend({error:g.error||m,context:a},f,{url:p,success:l,complete:h}))},destroy:function(){b&&b.abort&&b.abort(),a.destroyed=r}}),c.init()}function j(a,b,c){var d=Math.ceil(b/2),e=Math.ceil(c/2),f={bottomright:[[0,0],[b,c],[b,0]],bottomleft:[[0,0],[b,0],[0,c]],topright:[[0,c],[b,0],[b,c]],topleft:[[0,0],[0,c],[b,c]],topcenter:[[0,c],[d,0],[b,c]],bottomcenter:[[0,0],[b,0],[d,c]],rightcenter:[[0,0],[b,e],[0,c]],leftcenter:[[b,0],[b,c],[0,e]]};return f.lefttop=f.bottomright,f.righttop=f.bottomleft,f.leftbottom=f.topright,f.rightbottom=f.topleft,f[a.string()]}function k(a){function b(a){var b=F.is(":visible");F.show(),a(),F.toggle(b)}function e(){H.width=q.height,H.height=q.width}function f(){H.width=q.width,H.height=q.height}function g(b,d,e){if(D.tip){var f,g,h=p.corner.clone(),j=e.adjusted,k=a.options.position.adjust.method.split(" "),l=k[0],m=k[1]||k[0],n={left:s,top:s,x:0,y:0},o={};p.corner.fixed!==r&&(l===E&&h.precedance===u&&j.left&&h.y!==C?h.precedance=h.precedance===u?v:u:l!==E&&j.left&&(h.x=h.x===C?j.left>0?z:B:h.x===z?B:z),m===E&&h.precedance===v&&j.top&&h.x!==C?h.precedance=h.precedance===v?u:v:m!==E&&j.top&&(h.y=h.y===C?j.top>0?y:A:h.y===y?A:y),h.string()===G.corner.string()||G.top===j.top&&G.left===j.left||p.update(h,s)),f=p.position(h,j),f[h.x]+=i(h,h.x),f[h.y]+=i(h,h.y),f.right!==c&&(f.left=-f.right),f.bottom!==c&&(f.top=-f.bottom),f.user=Math.max(0,q.offset),(n.left=l===E&&!!j.left)&&(h.x===C?o["margin-left"]=n.x=f["margin-left"]:(g=f.right!==c?[j.left,-f.left]:[-j.left,f.left],(n.x=Math.max(g[0],g[1]))>g[0]&&(e.left-=j.left,n.left=s),o[f.right!==c?B:z]=n.x)),(n.top=m===E&&!!j.top)&&(h.y===C?o["margin-top"]=n.y=f["margin-top"]:(g=f.bottom!==c?[j.top,-f.top]:[-j.top,f.top],(n.y=Math.max(g[0],g[1]))>g[0]&&(e.top-=j.top,n.top=s),o[f.bottom!==c?A:y]=n.y)),D.tip.css(o).toggle(!(n.x&&n.y||h.x===C&&n.y||h.y===C&&n.x)),e.left-=f.left.charAt?f.user:l!==E||n.top||!n.left&&!n.top?f.left:0,e.top-=f.top.charAt?f.user:m!==E||n.left||!n.left&&!n.top?f.top:0,G.left=j.left,G.top=j.top,G.corner=h.clone()}}function h(){var b=q.corner,c=a.options.position,d=c.at,e=c.my.string?c.my.string():c.my;return b===s||e===s&&d===s?s:(b===r?p.corner=new o.Corner(e):b.string||(p.corner=new o.Corner(b),p.corner.fixed=r),G.corner=new o.Corner(p.corner.string()),"centercenter"!==p.corner.string())}function i(a,c,d){c=c?c:a[a.precedance];var e,f=D.titlebar&&a.y===y,g=f?D.titlebar:F,h="border-"+c+"-width",i=function(a){return parseInt(a.css(h),10)};return b(function(){e=(d?i(d):i(D.content)||i(g)||i(F))||0}),e}function k(a){var c,e=D.titlebar&&a.y===y,f=e?D.titlebar:D.content,g=d.browser.mozilla,h=g?"-moz-":d.browser.webkit?"-webkit-":"",i="border-radius-"+a.y+a.x,j="border-"+a.y+"-"+a.x+"-radius",k=function(a){return parseInt(f.css(a),10)||parseInt(F.css(a),10)};return b(function(){c=k(j)||k(h+j)||k(h+i)||k(i)||0}),c}function l(a){function c(a,b,c){var d=a.css(b)||j;return c&&d===a.css(c)?s:g.test(d)?s:d}var e=D.tip.css("cssText",""),f=a||p.corner,g=/rgba?\(0, 0, 0(, 0)?\)|transparent|#123456/i,h="border-"+f[f.precedance]+"-color",i="background-color",j="transparent",k=" !important",l=D.titlebar,m=l&&(f.y===y||f.y===C&&e.position().top+H.height/2+q.offset<l.outerHeight(r)),n=m?l:D.content;b(function(){I.fill=c(e,i)||c(n,i)||c(D.content,i)||c(F,i)||e.css(i),I.border=c(e,h,"color")||c(n,h,"color")||c(D.content,h,"color")||c(F,h,"color")||F.css(h),d("*",e).add(e).css("cssText",i+":"+j+k+";border:0"+k+";")})}function m(a){var b,c,d,e=a.precedance===v,f=H[e?w:x],g=H[e?x:w],h=a.string().indexOf(C)>-1,i=f*(h?.5:1),j=Math.pow,k=Math.round,l=Math.sqrt(j(i,2)+j(g,2)),m=[J/i*l,J/g*l];return m[2]=Math.sqrt(j(m[0],2)-j(J,2)),m[3]=Math.sqrt(j(m[1],2)-j(J,2)),b=l+m[2]+m[3]+(h?0:m[0]),c=b/l,d=[k(c*g),k(c*f)],{height:d[e?0:1],width:d[e?1:0]}}function n(a,b,c){return"<qvml:"+a+' xmlns="urn:schemas-microsoft.com:vml" class="qtip-vml" '+(b||"")+' style="behavior: url(#default#VML); '+(c||"")+'" />'}var p=this,q=a.options.style.tip,D=a.elements,F=D.tooltip,G={top:0,left:0},H={width:q.width,height:q.height},I={},J=q.border||0,K=".qtip-tip",L=!!(d("<canvas />")[0]||{}).getContext;p.corner=t,p.mimic=t,p.border=J,p.offset=q.offset,p.size=H,a.checks.tip={"^position.my|style.tip.(corner|mimic|border)$":function(){p.init()||p.destroy(),a.reposition()},"^style.tip.(height|width)$":function(){H={width:q.width,height:q.height},p.create(),p.update(),a.reposition()},"^content.title.text|style.(classes|widget)$":function(){D.tip&&D.tip.length&&p.update()}},d.extend(p,{init:function(){var a=h()&&(L||d.browser.msie);return a&&(p.create(),p.update(),F.unbind(K).bind("tooltipmove"+K,g)),a},create:function(){var a,b=H.width,c=H.height;D.tip&&D.tip.remove(),D.tip=d("<div />",{"class":"qtip-tip"}).css({width:b,height:c}).prependTo(F),L?d("<canvas />").appendTo(D.tip)[0].getContext("2d").save():(a=n("shape",'coordorigin="0,0"',"position:absolute;"),D.tip.html(a+a),d("*",D.tip).bind("click mousedown",function(a){a.stopPropagation()}))},update:function(a,b){var c,g,h,k,w,x=D.tip,E=x.children(),K=H.width,M=H.height,N=q.mimic,O=Math.round;a||(a=G.corner||p.corner),N===s?N=a:(N=new o.Corner(N),N.precedance=a.precedance,"inherit"===N.x?N.x=a.x:"inherit"===N.y?N.y=a.y:N.x===N.y&&(N[a.precedance]=a[a.precedance])),c=N.precedance,a.precedance===u?e():f(),D.tip.css({width:K=H.width,height:M=H.height}),l(a),"transparent"!==I.border?(J=i(a,t),0===q.border&&J>0&&(I.fill=I.border),p.border=J=q.border!==r?q.border:J):p.border=J=0,h=j(N,K,M),p.size=w=m(a),x.css(w).css("line-height",w.height+"px"),k=a.precedance===v?[O(N.x===z?J:N.x===B?w.width-K-J:(w.width-K)/2),O(N.y===y?w.height-M:0)]:[O(N.x===z?w.width-K:0),O(N.y===y?J:N.y===A?w.height-M-J:(w.height-M)/2)],L?(E.attr(w),g=E[0].getContext("2d"),g.restore(),g.save(),g.clearRect(0,0,3e3,3e3),g.fillStyle=I.fill,g.strokeStyle=I.border,g.lineWidth=2*J,g.lineJoin="miter",g.miterLimit=100,g.translate(k[0],k[1]),g.beginPath(),g.moveTo(h[0][0],h[0][1]),g.lineTo(h[1][0],h[1][1]),g.lineTo(h[2][0],h[2][1]),g.closePath(),J&&("border-box"===F.css("background-clip")&&(g.strokeStyle=I.fill,g.stroke()),g.strokeStyle=I.border,g.stroke()),g.fill()):(h="m"+h[0][0]+","+h[0][1]+" l"+h[1][0]+","+h[1][1]+" "+h[2][0]+","+h[2][1]+" xe",k[2]=J&&/^(r|b)/i.test(a.string())?8===parseFloat(d.browser.version,10)?2:1:0,E.css({coordsize:K+J+" "+(M+J),antialias:""+(N.string().indexOf(C)>-1),left:k[0],top:k[1],width:K+J,height:M+J}).each(function(a){var b=d(this);b[b.prop?"prop":"attr"]({coordsize:K+J+" "+(M+J),path:h,fillcolor:I.fill,filled:!!a,stroked:!a}).toggle(!(!J&&!a)),a||""!==b.html()||b.html(n("stroke",'weight="'+2*J+'px" color="'+I.border+'" miterlimit="1000" joinstyle="miter"'))})),b!==s&&p.position(a)},position:function(a){var b,c,e,f=D.tip,g={},h=Math.max(0,q.offset);return q.corner!==s&&f?(a=a||p.corner,b=a.precedance,c=m(a),e=[a.x,a.y],b===u&&e.reverse(),d.each(e,function(d,e){var f,j,l;e===C?(f=b===v?z:y,g[f]="50%",g["margin-"+f]=-Math.round(c[b===v?w:x]/2)+h):(f=i(a,e),j=i(a,e,D.content),l=k(a),g[e]=d?j:h+(l>f?l:-f))}),g[a[b]]-=c[b===u?w:x],f.css({top:"",bottom:"",left:"",right:"",margin:""}).css(g),g):s},destroy:function(){D.tip&&D.tip.remove(),D.tip=!1,F.unbind(K)}}),p.init()}function l(c){function e(){v=d(u,l).not("[disabled]").map(function(){return"function"==typeof this.focus?this:null})}function f(a){v.length<1&&a.length?a.not("body").blur():v.first().focus()}function g(a){var b,c=d(a.target),e=c.closest(".qtip");b=e.length<1?s:parseInt(e[0].style.zIndex,10)>parseInt(l[0].style.zIndex,10),b||d(a.target).closest(I)[0]===l[0]||f(c)}var h,i=this,j=c.options.show.modal,k=c.elements,l=k.tooltip,m="#qtip-overlay",n=".qtipmodal",p=n+c.id,q="is-modal-qtip",t=d(b.body),u=o.modal.focusable.join(","),v={};c.checks.modal={"^show.modal.(on|blur)$":function(){i.init(),k.overlay.toggle(l.is(":visible"))},"^content.text$":function(){e()}},d.extend(i,{init:function(){return j.on?(h=i.create(),l.attr(q,r).css("z-index",o.modal.zindex+d(I+"["+q+"]").length).unbind(n).unbind(p).bind("tooltipshow"+n+" tooltiphide"+n,function(a,b,c){var e=a.originalEvent;if(a.target===l[0])if(e&&"tooltiphide"===a.type&&/mouse(leave|enter)/.test(e.type)&&d(e.relatedTarget).closest(h[0]).length)try{a.preventDefault()}catch(f){}else(!e||e&&!e.solo)&&i[a.type.replace("tooltip","")](a,c)}).bind("tooltipfocus"+n,function(a){if(!a.isDefaultPrevented()&&a.target===l[0]){var b=d(I).filter("["+q+"]"),c=o.modal.zindex+b.length,e=parseInt(l[0].style.zIndex,10);h[0].style.zIndex=c-2,b.each(function(){this.style.zIndex>e&&(this.style.zIndex-=1)}),b.end().filter("."+K).qtip("blur",a.originalEvent),l.addClass(K)[0].style.zIndex=c;try{a.preventDefault()}catch(f){}}}).bind("tooltiphide"+n,function(a){a.target===l[0]&&d("["+q+"]").filter(":visible").not(l).last().qtip("focus",a)}),j.escape&&d(b).unbind(p).bind("keydown"+p,function(a){27===a.keyCode&&l.hasClass(K)&&c.hide(a)}),j.blur&&k.overlay.unbind(p).bind("click"+p,function(a){l.hasClass(K)&&c.hide(a)}),e(),i):i},create:function(){function b(){h.css({height:e.height(),width:e.width()})}var c=d(m),e=d(a);return c.length?k.overlay=c.insertAfter(d(I).last()):(h=k.overlay=d("<div />",{id:m.substr(1),html:"<div></div>",mousedown:function(){return s}}).hide().insertAfter(d(I).last()),e.unbind(n).bind("resize"+n,b),b(),h)},toggle:function(a,b,c){if(a&&a.isDefaultPrevented())return i;var e=j.effect,k=b?"show":"hide",m=h.is(":visible"),n=d("["+q+"]").filter(":visible").not(l);return h||(h=i.create()),h.is(":animated")&&m===b&&h.data("toggleState")!==s||!b&&n.length?i:(b?(h.css({left:0,top:0}),h.toggleClass("blurs",j.blur),j.stealfocus!==s&&(t.bind("focusin"+p,g),f(d("body :focus")))):t.unbind("focusin"+p),h.stop(r,s).data("toggleState",b),d.isFunction(e)?e.call(h,b):e===s?h[k]():h.fadeTo(parseInt(c,10)||90,b?1:0,function(){b||d(this).hide()}),b||h.queue(function(a){h.css({left:"",top:""}).removeData("toggleState"),a()}),i)},show:function(a,b){return i.toggle(a,r,b)},hide:function(a,b){return i.toggle(a,s,b)},destroy:function(){var a=h;return a&&(a=d("["+q+"]").not(l).length<1,a?(k.overlay.remove(),d(b).unbind(n)):k.overlay.unbind(n+c.id),t.unbind("focusin"+p)),l.removeAttr(q).unbind(n)}}),i.init()}function m(c){var e,f=this,g=c.elements,h=c.options,i=g.tooltip,j=".ie6-"+c.id,k=d("select, object").length<1,l=0,m=s;c.checks.ie6={"^content|style$":function(){redraw()}},d.extend(f,{init:function(){var c,h=d(a);k&&(g.bgiframe=d('<iframe class="qtip-bgiframe" frameborder="0" tabindex="-1" src="javascript:\'\';"  style="display:block; position:absolute; z-index:-1; filter:alpha(opacity=0); -ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";"></iframe>'),g.bgiframe.appendTo(i),i.bind("tooltipmove"+j,f.adjustBGIFrame)),e=d("<div/>",{id:"qtip-rcontainer"}).appendTo(b.body),f.redraw(),g.overlay&&!m&&(c=function(){g.overlay[0].style.top=h.scrollTop()+"px"},h.bind("scroll.qtip-ie6, resize.qtip-ie6",c),c(),g.overlay.addClass("qtipmodal-ie6fix"),m=r)},adjustBGIFrame:function(){var a,b,d=c.get("dimensions"),e=c.plugins.tip,f=g.tip;b=parseInt(i.css("border-left-width"),10)||0,b={left:-b,top:-b},e&&f&&(a="x"===e.corner.precedance?["width","left"]:["height","top"],b[a[1]]-=f[a[0]]()),g.bgiframe.css(b).css(d)},redraw:function(){if(c.rendered<1||l)return f;var a,b,d,g,j=h.style,k=h.position.container;return l=1,j.height&&i.css(x,j.height),j.width?i.css(w,j.width):(i.css(w,"").appendTo(e),b=i.width(),1>b%2&&(b+=1),d=i.css("max-width")||"",g=i.css("min-width")||"",a=(d+g).indexOf("%")>-1?k.width()/100:0,d=(d.indexOf("%")>-1?a:1)*parseInt(d,10)||b,g=(g.indexOf("%")>-1?a:1)*parseInt(g,10)||0,b=d+g?Math.min(Math.max(b,g),d):b,i.css(w,Math.round(b)).appendTo(k)),l=0,f},destroy:function(){k&&g.bgiframe.remove(),i.unbind(j)}}),f.init()}var n,o,p,q,r=!0,s=!1,t=null,u="x",v="y",w="width",x="height",y="top",z="left",A="bottom",B="right",C="center",D="flipinvert",E="shift",F="qtip",G={},H=["ui-widget","ui-tooltip"],I="div.qtip."+F,J=F+"-default",K=F+"-focus",L=F+"-hover",M="_replacedByqTip",N="oldtitle";n=d.fn.qtip=function(a,b,e){var g=(""+a).toLowerCase(),h=t,i=d.makeArray(arguments).slice(1),j=i[i.length-1],k=this[0]?d.data(this[0],"qtip"):t;return!arguments.length&&k||"api"===g?k:"string"==typeof a?(this.each(function(){var a=d.data(this,"qtip");if(!a)return r;if(j&&j.timeStamp&&(a.cache.event=j),"option"!==g&&"options"!==g||!b)a[g]&&a[g].apply(a[g],i);else{if(!d.isPlainObject(b)&&e===c)return h=a.get(b),s;a.set(b,e)}}),h!==t?h:this):"object"!=typeof a&&arguments.length?void 0:(k=f(d.extend(r,{},a)),n.bind.call(this,k,j))},n.bind=function(a,b){return this.each(function(f){function g(a){function b(){m.render("object"==typeof a||i.show.ready),j.show.add(j.hide).unbind(l)}return m.cache.disabled?s:(m.cache.event=d.extend({},a),m.cache.target=a?d(a.target):[c],i.show.delay>0?(clearTimeout(m.timers.show),m.timers.show=setTimeout(b,i.show.delay),k.show!==k.hide&&j.hide.bind(k.hide,function(){clearTimeout(m.timers.show)})):b(),void 0)}var i,j,k,l,m,p;return p=d.isArray(a.id)?a.id[f]:a.id,p=!p||p===s||p.length<1||G[p]?n.nextid++:G[p]=p,l=".qtip-"+p+"-create",m=h.call(this,p,a),m===s?r:(i=m.options,d.each(o,function(){"initialize"===this.initialize&&this(m)}),j={show:i.show.target,hide:i.hide.target},k={show:d.trim(""+i.show.event).replace(/ /g,l+" ")+l,hide:d.trim(""+i.hide.event).replace(/ /g,l+" ")+l},/mouse(over|enter)/i.test(k.show)&&!/mouse(out|leave)/i.test(k.hide)&&(k.hide+=" mouseleave"+l),j.show.bind("mousemove"+l,function(a){e(a),m.cache.onTarget=r}),j.show.bind(k.show,g),(i.show.ready||i.prerender)&&g(b),void 0)}).attr("data-hasqtip",r)},o=n.plugins={Corner:function(a){a=(""+a).replace(/([A-Z])/," $1").replace(/middle/gi,C).toLowerCase(),this.x=(a.match(/left|right/i)||a.match(/center/)||["inherit"])[0].toLowerCase(),this.y=(a.match(/top|bottom|center/i)||["inherit"])[0].toLowerCase();var b=a.charAt(0);this.precedance="t"===b||"b"===b?v:u,this.string=function(){return this.precedance===v?this.y+this.x:this.x+this.y},this.abbrev=function(){var a=this.x.substr(0,1),b=this.y.substr(0,1);return a===b?a:this.precedance===v?b+a:a+b},this.invertx=function(a){this.x=this.x===z?B:this.x===B?z:a||this.x},this.inverty=function(a){this.y=this.y===y?A:this.y===A?y:a||this.y},this.clone=function(){return{x:this.x,y:this.y,precedance:this.precedance,string:this.string,abbrev:this.abbrev,clone:this.clone,invertx:this.invertx,inverty:this.inverty}}},offset:function(a,c){function e(a,b){i.left+=b*a.scrollLeft(),i.top+=b*a.scrollTop()}var f,g,h,i=a.offset(),j=a.closest("body"),k=d.browser.msie&&"CSS1Compat"!==b.compatMode,l=c;if(l){do"static"!==l.css("position")&&(g=l.position(),i.left-=g.left+(parseInt(l.css("borderLeftWidth"),10)||0)+(parseInt(l.css("marginLeft"),10)||0),i.top-=g.top+(parseInt(l.css("borderTopWidth"),10)||0)+(parseInt(l.css("marginTop"),10)||0),f||"hidden"===(h=l.css("overflow"))||"visible"===h||(f=l));while((l=d(l[0].offsetParent)).length);(f&&f[0]!==j[0]||k)&&e(f||j,1)}return i},iOS:parseFloat((""+(/CPU.*OS ([0-9_]{1,5})|(CPU like).*AppleWebKit.*Mobile/i.exec(navigator.userAgent)||[0,""])[1]).replace("undefined","3_2").replace("_",".").replace("_",""))||s,fn:{attr:function(a,b){if(this.length){var c=this[0],e="title",f=d.data(c,"qtip");if(a===e&&f&&"object"==typeof f&&f.options.suppress)return arguments.length<2?d.attr(c,N):(f&&f.options.content.attr===e&&f.cache.attr&&f.set("content.text",b),this.attr(N,b))}return d.fn["attr"+M].apply(this,arguments)},clone:function(a){var b=(d([]),d.fn["clone"+M].apply(this,arguments));return a||b.filter("["+N+"]").attr("title",function(){return d.attr(this,N)}).removeAttr(N),b}}},d.each(o.fn,function(a,b){if(!b||d.fn[a+M])return r;var c=d.fn[a+M]=d.fn[a];d.fn[a]=function(){return b.apply(this,arguments)||c.apply(this,arguments)}}),d.ui||(d["cleanData"+M]=d.cleanData,d.cleanData=function(a){for(var b,e=0;(b=a[e])!==c;e++)try{d(b).triggerHandler("removeqtip")}catch(f){}d["cleanData"+M](a)}),n.version="",n.nextid=0,n.inactiveEvents="click dblclick mousedown mouseup mousemove mouseleave mouseenter".split(" "),n.zindex=15e3,n.defaults={prerender:s,id:s,overwrite:r,suppress:r,content:{text:r,attr:"title",deferred:s,title:{text:s,button:s}},position:{my:"top left",at:"bottom right",target:s,container:s,viewport:s,adjust:{x:0,y:0,mouse:r,resize:r,method:"flipinvert flipinvert"},effect:function(a,b){d(this).animate(b,{duration:200,queue:s})}},show:{target:s,event:"mouseenter",effect:r,delay:90,solo:s,ready:s,autofocus:s},hide:{target:s,event:"mouseleave",effect:r,delay:0,fixed:s,inactive:s,leave:"window",distance:s},style:{classes:"",widget:s,width:s,height:s,def:r},events:{render:t,move:t,show:t,hide:t,toggle:t,visible:t,hidden:t,focus:t,blur:t}},o.svg=function(a,c){for(var e,f,g,h,i,j=d(b),k=c[0],l={width:0,height:0,position:{top:1e10,left:1e10}};!k.getBBox;)k=k.parentNode;if(k.getBBox&&k.parentNode){if(e=k.getBBox(),f=k.getScreenCTM(),g=k.farthestViewportElement||k,!g.createSVGPoint)return l;h=g.createSVGPoint(),h.x=e.x,h.y=e.y,i=h.matrixTransform(f),l.position.left=i.x,l.position.top=i.y,h.x+=e.width,h.y+=e.height,i=h.matrixTransform(f),l.width=i.x-l.position.left,l.height=i.y-l.position.top,l.position.left+=j.scrollLeft(),l.position.top+=j.scrollTop()}return l},o.ajax=function(a){var b=a.plugins.ajax;return"object"==typeof b?b:a.plugins.ajax=new i(a)
},o.ajax.initialize="render",o.ajax.sanitize=function(a){var b,c=a.content;c&&"ajax"in c&&(b=c.ajax,"object"!=typeof b&&(b=a.content.ajax={url:b}),"boolean"!=typeof b.once&&b.once&&(b.once=!!b.once))},d.extend(r,n.defaults,{content:{ajax:{loading:r,once:r}}}),o.tip=function(a){var b=a.plugins.tip;return"object"==typeof b?b:a.plugins.tip=new k(a)},o.tip.initialize="render",o.tip.sanitize=function(a){var b,c=a.style;c&&"tip"in c&&(b=a.style.tip,"object"!=typeof b&&(a.style.tip={corner:b}),/string|boolean/i.test(typeof b.corner)||(b.corner=r),"number"!=typeof b.width&&delete b.width,"number"!=typeof b.height&&delete b.height,"number"!=typeof b.border&&b.border!==r&&delete b.border,"number"!=typeof b.offset&&delete b.offset)},d.extend(r,n.defaults,{style:{tip:{corner:r,mimic:s,width:6,height:6,border:r,offset:0}}}),o.modal=function(a){var b=a.plugins.modal;return"object"==typeof b?b:a.plugins.modal=new l(a)},o.modal.initialize="render",o.modal.sanitize=function(a){a.show&&("object"!=typeof a.show.modal?a.show.modal={on:!!a.show.modal}:"undefined"==typeof a.show.modal.on&&(a.show.modal.on=r))},o.modal.zindex=n.zindex-200,o.modal.focusable=["a[href]","area[href]","input","select","textarea","button","iframe","object","embed","[tabindex]","[contenteditable]"],d.extend(r,n.defaults,{show:{modal:{on:s,effect:r,blur:r,stealfocus:r,escape:r}}}),o.viewport=function(c,d,e,f,g,h,i){function j(a,b,c,e,f,g,h,i,j){var k=d[f],m=p[a],n=q[a],o=c===E,r=-I.offset[f]+H.offset[f]+H["scroll"+f],s=m===f?j:m===g?-j:-j/2,t=n===f?i:n===g?-i:-i/2,u=K&&K.size?K.size[h]||0:0,v=K&&K.corner&&K.corner.precedance===a&&!o?u:0,w=r-k+v,x=k+j-H[h]-r+v,y=s-(p.precedance===a||m===p[b]?t:0)-(n===C?i/2:0);return o?(v=K&&K.corner&&K.corner.precedance===b?u:0,y=(m===f?1:-1)*s-v,d[f]+=w>0?w:x>0?-x:0,d[f]=Math.max(-I.offset[f]+H.offset[f]+(v&&K.corner[a]===C?K.offset:0),k-y,Math.min(Math.max(-I.offset[f]+H.offset[f]+H[h],k+y),d[f]))):(e*=c===D?2:0,w>0&&(m!==f||x>0)?(d[f]-=y+e,l["invert"+a](f)):x>0&&(m!==g||w>0)&&(d[f]-=(m===C?-y:y)+e,l["invert"+a](g)),d[f]<r&&-d[f]>x&&(d[f]=k,l=p.clone())),d[f]-k}var k,l,m,n=e.target,o=c.elements.tooltip,p=e.my,q=e.at,r=e.adjust,s=r.method.split(" "),t=s[0],G=s[1]||s[0],H=e.viewport,I=e.container,J=c.cache,K=c.plugins.tip,L={left:0,top:0};return H.jquery&&n[0]!==a&&n[0]!==b.body&&"none"!==r.method?(k="fixed"===o.css("position"),H={elem:H,height:H[(H[0]===a?"h":"outerH")+"eight"](),width:H[(H[0]===a?"w":"outerW")+"idth"](),scrollleft:k?0:H.scrollLeft(),scrolltop:k?0:H.scrollTop(),offset:H.offset()||{left:0,top:0}},I={elem:I,scrollLeft:I.scrollLeft(),scrollTop:I.scrollTop(),offset:I.offset()||{left:0,top:0}},("shift"!==t||"shift"!==G)&&(l=p.clone()),L={left:"none"!==t?j(u,v,t,r.x,z,B,w,f,h):0,top:"none"!==G?j(v,u,G,r.y,y,A,x,g,i):0},l&&J.lastClass!==(m=F+"-pos-"+l.abbrev())&&o.removeClass(c.cache.lastClass).addClass(c.cache.lastClass=m),L):L},o.imagemap=function(a,b,c,e){function f(a,b,c){for(var d=0,e=1,f=1,g=0,h=0,i=a.width,j=a.height;i>0&&j>0&&e>0&&f>0;)for(i=Math.floor(i/2),j=Math.floor(j/2),c.x===z?e=i:c.x===B?e=a.width-i:e+=Math.floor(i/2),c.y===y?f=j:c.y===A?f=a.height-j:f+=Math.floor(j/2),d=b.length;d--&&!(b.length<2);)g=b[d][0]-a.position.left,h=b[d][1]-a.position.top,(c.x===z&&g>=e||c.x===B&&e>=g||c.x===C&&(e>g||g>a.width-e)||c.y===y&&h>=f||c.y===A&&f>=h||c.y===C&&(f>h||h>a.height-f))&&b.splice(d,1);return{left:b[0][0],top:b[0][1]}}b.jquery||(b=d(b));var g=a.cache.areas={},h=(b[0].shape||b.attr("shape")).toLowerCase(),i=b[0].coords||b.attr("coords"),j=i.split(","),k=[],l=d('img[usemap="#'+b.parent("map").attr("name")+'"]'),m=l.offset(),n={width:0,height:0,position:{top:1e10,right:0,bottom:0,left:1e10}},o=0,p=0;if(m.left+=Math.ceil((l.outerWidth()-l.width())/2),m.top+=Math.ceil((l.outerHeight()-l.height())/2),"poly"===h)for(o=j.length;o--;)p=[parseInt(j[--o],10),parseInt(j[o+1],10)],p[0]>n.position.right&&(n.position.right=p[0]),p[0]<n.position.left&&(n.position.left=p[0]),p[1]>n.position.bottom&&(n.position.bottom=p[1]),p[1]<n.position.top&&(n.position.top=p[1]),k.push(p);else for(o=-1;o++<j.length;)k.push(parseInt(j[o],10));switch(h){case"rect":n={width:Math.abs(k[2]-k[0]),height:Math.abs(k[3]-k[1]),position:{left:Math.min(k[0],k[2]),top:Math.min(k[1],k[3])}};break;case"circle":n={width:k[2]+2,height:k[2]+2,position:{left:k[0],top:k[1]}};break;case"poly":n.width=Math.abs(n.position.right-n.position.left),n.height=Math.abs(n.position.bottom-n.position.top),"c"===c.abbrev()?n.position={left:n.position.left+n.width/2,top:n.position.top+n.height/2}:(g[c+i]||(n.position=f(n,k.slice(),c),!e||"flip"!==e[0]&&"flip"!==e[1]||(n.offset=f(n,k.slice(),{x:c.x===z?B:c.x===B?z:C,y:c.y===y?A:c.y===A?y:C}),n.offset.left-=n.position.left,n.offset.top-=n.position.top),g[c+i]=n),n=g[c+i]),n.width=n.height=0}return n.position.left+=m.left,n.position.top+=m.top,n},o.ie6=function(a){var b=d.browser,c=a.plugins.ie6;return b.msie&&"6"===(""+b.version).charAt(0)?"object"==typeof c?c:a.plugins.ie6=new m(a):s},o.ie6.initialize="render"})}(window,document),function(a,b,c){var d,e;typeof exports!=c+""?d=exports:(e=a.L,d={},d.noConflict=function(){return a.L=e,this},a.L=d),d.version="0.5.1",d.Util={extend:function(a){var b,c,d,e,f=Array.prototype.slice.call(arguments,1);for(c=0,d=f.length;d>c;c++){e=f[c]||{};for(b in e)e.hasOwnProperty(b)&&(a[b]=e[b])}return a},bind:function(a,b){var c=arguments.length>2?Array.prototype.slice.call(arguments,2):null;return function(){return a.apply(b,c||arguments)}},stamp:function(){var a=0,b="_leaflet_id";return function(c){return c[b]=c[b]||++a,c[b]}}(),limitExecByInterval:function(a,b,d){var e,f;return function g(){var h=arguments;return e?(f=!0,c):(e=!0,setTimeout(function(){e=!1,f&&(g.apply(d,h),f=!1)},b),a.apply(d,h),c)}},falseFn:function(){return!1},formatNum:function(a,b){var c=Math.pow(10,b||5);return Math.round(a*c)/c},splitWords:function(a){return a.replace(/^\s+|\s+$/g,"").split(/\s+/)},setOptions:function(a,b){return a.options=d.extend({},a.options,b),a.options},getParamString:function(a,b){var c=[];for(var d in a)a.hasOwnProperty(d)&&c.push(d+"="+a[d]);return(b&&-1!==b.indexOf("?")?"&":"?")+c.join("&")},template:function(a,b){return a.replace(/\{ *([\w_]+) *\}/g,function(a,c){var d=b[c];if(!b.hasOwnProperty(c))throw Error("No value provided for variable "+a);return d})},isArray:function(a){return"[object Array]"===Object.prototype.toString.call(a)},emptyImageUrl:"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="},function(){function b(b){var c,d,e=["webkit","moz","o","ms"];for(c=0;e.length>c&&!d;c++)d=a[e[c]+b];return d}function e(b){var c=+new Date,d=Math.max(0,16-(c-f));return f=c+d,a.setTimeout(b,d)}var f=0,g=a.requestAnimationFrame||b("RequestAnimationFrame")||e,h=a.cancelAnimationFrame||b("CancelAnimationFrame")||b("CancelRequestAnimationFrame")||function(b){a.clearTimeout(b)};d.Util.requestAnimFrame=function(b,f,h,i){return b=d.bind(b,f),h&&g===e?(b(),c):g.call(a,b,i)},d.Util.cancelAnimFrame=function(b){b&&h.call(a,b)}}(),d.extend=d.Util.extend,d.bind=d.Util.bind,d.stamp=d.Util.stamp,d.setOptions=d.Util.setOptions,d.Class=function(){},d.Class.extend=function(a){var b=function(){this.initialize&&this.initialize.apply(this,arguments),this._initHooks&&this.callInitHooks()},c=function(){};c.prototype=this.prototype;var e=new c;e.constructor=b,b.prototype=e;for(var f in this)this.hasOwnProperty(f)&&"prototype"!==f&&(b[f]=this[f]);a.statics&&(d.extend(b,a.statics),delete a.statics),a.includes&&(d.Util.extend.apply(null,[e].concat(a.includes)),delete a.includes),a.options&&e.options&&(a.options=d.extend({},e.options,a.options)),d.extend(e,a),e._initHooks=[];var g=this;return e.callInitHooks=function(){if(!this._initHooksCalled){g.prototype.callInitHooks&&g.prototype.callInitHooks.call(this),this._initHooksCalled=!0;for(var a=0,b=e._initHooks.length;b>a;a++)e._initHooks[a].call(this)}},b},d.Class.include=function(a){d.extend(this.prototype,a)},d.Class.mergeOptions=function(a){d.extend(this.prototype.options,a)},d.Class.addInitHook=function(a){var b=Array.prototype.slice.call(arguments,1),c="function"==typeof a?a:function(){this[a].apply(this,b)};this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(c)};var f="_leaflet_events";d.Mixin={},d.Mixin.Events={addEventListener:function(a,b,c){var e,g,h,i=this[f]=this[f]||{};if("object"==typeof a){for(e in a)a.hasOwnProperty(e)&&this.addEventListener(e,a[e],b);return this}for(a=d.Util.splitWords(a),g=0,h=a.length;h>g;g++)i[a[g]]=i[a[g]]||[],i[a[g]].push({action:b,context:c||this});return this},hasEventListeners:function(a){return f in this&&a in this[f]&&this[f][a].length>0},removeEventListener:function(a,b,c){var e,g,h,i,j,k=this[f];if("object"==typeof a){for(e in a)a.hasOwnProperty(e)&&this.removeEventListener(e,a[e],b);return this}for(a=d.Util.splitWords(a),g=0,h=a.length;h>g;g++)if(this.hasEventListeners(a[g]))for(i=k[a[g]],j=i.length-1;j>=0;j--)b&&i[j].action!==b||c&&i[j].context!==c||i.splice(j,1);return this},fireEvent:function(a,b){if(!this.hasEventListeners(a))return this;for(var c=d.extend({type:a,target:this},b),e=this[f][a].slice(),g=0,h=e.length;h>g;g++)e[g].action.call(e[g].context||this,c);return this}},d.Mixin.Events.on=d.Mixin.Events.addEventListener,d.Mixin.Events.off=d.Mixin.Events.removeEventListener,d.Mixin.Events.fire=d.Mixin.Events.fireEvent,function(){var e=!!a.ActiveXObject,f=e&&!a.XMLHttpRequest,g=e&&!b.querySelector,h=navigator.userAgent.toLowerCase(),i=-1!==h.indexOf("webkit"),j=-1!==h.indexOf("chrome"),k=-1!==h.indexOf("android"),l=-1!==h.search("android [23]"),m=typeof orientation!=c+"",n=a.navigator&&a.navigator.msPointerEnabled&&a.navigator.msMaxTouchPoints,o="devicePixelRatio"in a&&a.devicePixelRatio>1||"matchMedia"in a&&a.matchMedia("(min-resolution:144dpi)")&&a.matchMedia("(min-resolution:144dpi)").matches,p=b.documentElement,q=e&&"transition"in p.style,r="WebKitCSSMatrix"in a&&"m11"in new a.WebKitCSSMatrix,s="MozPerspective"in p.style,t="OTransition"in p.style,u=!a.L_DISABLE_3D&&(q||r||s||t),v=!a.L_NO_TOUCH&&function(){var a="ontouchstart";if(n||a in p)return!0;var c=b.createElement("div"),d=!1;return c.setAttribute?(c.setAttribute(a,"return;"),"function"==typeof c[a]&&(d=!0),c.removeAttribute(a),c=null,d):!1}();d.Browser={ie:e,ie6:f,ie7:g,webkit:i,android:k,android23:l,chrome:j,ie3d:q,webkit3d:r,gecko3d:s,opera3d:t,any3d:u,mobile:m,mobileWebkit:m&&i,mobileWebkit3d:m&&r,mobileOpera:m&&a.opera,touch:v,msTouch:n,retina:o}}(),d.Point=function(a,b,c){this.x=c?Math.round(a):a,this.y=c?Math.round(b):b},d.Point.prototype={clone:function(){return new d.Point(this.x,this.y)},add:function(a){return this.clone()._add(d.point(a))},_add:function(a){return this.x+=a.x,this.y+=a.y,this},subtract:function(a){return this.clone()._subtract(d.point(a))},_subtract:function(a){return this.x-=a.x,this.y-=a.y,this},divideBy:function(a){return this.clone()._divideBy(a)},_divideBy:function(a){return this.x/=a,this.y/=a,this},multiplyBy:function(a){return this.clone()._multiplyBy(a)},_multiplyBy:function(a){return this.x*=a,this.y*=a,this},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},distanceTo:function(a){a=d.point(a);var b=a.x-this.x,c=a.y-this.y;return Math.sqrt(b*b+c*c)},equals:function(a){return a.x===this.x&&a.y===this.y},toString:function(){return"Point("+d.Util.formatNum(this.x)+", "+d.Util.formatNum(this.y)+")"}},d.point=function(a,b,c){return a instanceof d.Point?a:d.Util.isArray(a)?new d.Point(a[0],a[1]):isNaN(a)?a:new d.Point(a,b,c)},d.Bounds=function(a,b){if(a)for(var c=b?[a,b]:a,d=0,e=c.length;e>d;d++)this.extend(c[d])},d.Bounds.prototype={extend:function(a){return a=d.point(a),this.min||this.max?(this.min.x=Math.min(a.x,this.min.x),this.max.x=Math.max(a.x,this.max.x),this.min.y=Math.min(a.y,this.min.y),this.max.y=Math.max(a.y,this.max.y)):(this.min=a.clone(),this.max=a.clone()),this},getCenter:function(a){return new d.Point((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,a)},getBottomLeft:function(){return new d.Point(this.min.x,this.max.y)},getTopRight:function(){return new d.Point(this.max.x,this.min.y)},getSize:function(){return this.max.subtract(this.min)},contains:function(a){var b,c;return a="number"==typeof a[0]||a instanceof d.Point?d.point(a):d.bounds(a),a instanceof d.Bounds?(b=a.min,c=a.max):b=c=a,b.x>=this.min.x&&c.x<=this.max.x&&b.y>=this.min.y&&c.y<=this.max.y},intersects:function(a){a=d.bounds(a);var b=this.min,c=this.max,e=a.min,f=a.max,g=f.x>=b.x&&e.x<=c.x,h=f.y>=b.y&&e.y<=c.y;return g&&h},isValid:function(){return!(!this.min||!this.max)}},d.bounds=function(a,b){return!a||a instanceof d.Bounds?a:new d.Bounds(a,b)},d.Transformation=function(a,b,c,d){this._a=a,this._b=b,this._c=c,this._d=d},d.Transformation.prototype={transform:function(a,b){return this._transform(a.clone(),b)},_transform:function(a,b){return b=b||1,a.x=b*(this._a*a.x+this._b),a.y=b*(this._c*a.y+this._d),a},untransform:function(a,b){return b=b||1,new d.Point((a.x/b-this._b)/this._a,(a.y/b-this._d)/this._c)}},d.DomUtil={get:function(a){return"string"==typeof a?b.getElementById(a):a},getStyle:function(a,c){var d=a.style[c];if(!d&&a.currentStyle&&(d=a.currentStyle[c]),(!d||"auto"===d)&&b.defaultView){var e=b.defaultView.getComputedStyle(a,null);d=e?e[c]:null}return"auto"===d?null:d},getViewportOffset:function(a){var c,e=0,f=0,g=a,h=b.body,i=d.Browser.ie7;do{if(e+=g.offsetTop||0,f+=g.offsetLeft||0,e+=parseInt(d.DomUtil.getStyle(g,"borderTopWidth"),10)||0,f+=parseInt(d.DomUtil.getStyle(g,"borderLeftWidth"),10)||0,c=d.DomUtil.getStyle(g,"position"),g.offsetParent===h&&"absolute"===c)break;if("fixed"===c){e+=h.scrollTop||0,f+=h.scrollLeft||0;break}g=g.offsetParent}while(g);g=a;do{if(g===h)break;e-=g.scrollTop||0,f-=g.scrollLeft||0,d.DomUtil.documentIsLtr()||!d.Browser.webkit&&!i||(f+=g.scrollWidth-g.clientWidth,i&&"hidden"!==d.DomUtil.getStyle(g,"overflow-y")&&"hidden"!==d.DomUtil.getStyle(g,"overflow")&&(f+=17)),g=g.parentNode}while(g);return new d.Point(f,e)},documentIsLtr:function(){return d.DomUtil._docIsLtrCached||(d.DomUtil._docIsLtrCached=!0,d.DomUtil._docIsLtr="ltr"===d.DomUtil.getStyle(b.body,"direction")),d.DomUtil._docIsLtr},create:function(a,c,d){var e=b.createElement(a);return e.className=c,d&&d.appendChild(e),e},disableTextSelection:function(){b.selection&&b.selection.empty&&b.selection.empty(),this._onselectstart||(this._onselectstart=b.onselectstart||null,b.onselectstart=d.Util.falseFn)},enableTextSelection:function(){b.onselectstart===d.Util.falseFn&&(b.onselectstart=this._onselectstart,this._onselectstart=null)},hasClass:function(a,b){return a.className.length>0&&RegExp("(^|\\s)"+b+"(\\s|$)").test(a.className)},addClass:function(a,b){d.DomUtil.hasClass(a,b)||(a.className+=(a.className?" ":"")+b)},removeClass:function(a,b){function c(a,c){return c===b?"":a}a.className=a.className.replace(/(\S+)\s*/g,c).replace(/(^\s+|\s+$)/,"")},setOpacity:function(a,b){if("opacity"in a.style)a.style.opacity=b;else if("filter"in a.style){var c=!1,d="DXImageTransform.Microsoft.Alpha";try{c=a.filters.item(d)}catch(e){}b=Math.round(100*b),c?(c.Enabled=100!==b,c.Opacity=b):a.style.filter+=" progid:"+d+"(opacity="+b+")"}},testProp:function(a){for(var c=b.documentElement.style,d=0;a.length>d;d++)if(a[d]in c)return a[d];return!1},getTranslateString:function(a){var b=d.Browser.webkit3d,c="translate"+(b?"3d":"")+"(",e=(b?",0":"")+")";return c+a.x+"px,"+a.y+"px"+e},getScaleString:function(a,b){var c=d.DomUtil.getTranslateString(b.add(b.multiplyBy(-1*a))),e=" scale("+a+") ";return c+e},setPosition:function(a,b,c){a._leaflet_pos=b,!c&&d.Browser.any3d?(a.style[d.DomUtil.TRANSFORM]=d.DomUtil.getTranslateString(b),d.Browser.mobileWebkit3d&&(a.style.WebkitBackfaceVisibility="hidden")):(a.style.left=b.x+"px",a.style.top=b.y+"px")},getPosition:function(a){return a._leaflet_pos}},d.DomUtil.TRANSFORM=d.DomUtil.testProp(["transform","WebkitTransform","OTransform","MozTransform","msTransform"]),d.DomUtil.TRANSITION=d.DomUtil.testProp(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),d.DomUtil.TRANSITION_END="webkitTransition"===d.DomUtil.TRANSITION||"OTransition"===d.DomUtil.TRANSITION?d.DomUtil.TRANSITION+"End":"transitionend",d.LatLng=function(a,b){var c=parseFloat(a),d=parseFloat(b);if(isNaN(c)||isNaN(d))throw Error("Invalid LatLng object: ("+a+", "+b+")");this.lat=c,this.lng=d},d.extend(d.LatLng,{DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,MAX_MARGIN:1e-9}),d.LatLng.prototype={equals:function(a){if(!a)return!1;a=d.latLng(a);var b=Math.max(Math.abs(this.lat-a.lat),Math.abs(this.lng-a.lng));return d.LatLng.MAX_MARGIN>=b},toString:function(a){return"LatLng("+d.Util.formatNum(this.lat,a)+", "+d.Util.formatNum(this.lng,a)+")"},distanceTo:function(a){a=d.latLng(a);var b=6378137,c=d.LatLng.DEG_TO_RAD,e=(a.lat-this.lat)*c,f=(a.lng-this.lng)*c,g=this.lat*c,h=a.lat*c,i=Math.sin(e/2),j=Math.sin(f/2),k=i*i+j*j*Math.cos(g)*Math.cos(h);return 2*b*Math.atan2(Math.sqrt(k),Math.sqrt(1-k))},wrap:function(a,b){var c=this.lng;return a=a||-180,b=b||180,c=(c+b)%(b-a)+(a>c||c===b?b:a),new d.LatLng(this.lat,c)}},d.latLng=function(a,b){return a instanceof d.LatLng?a:d.Util.isArray(a)?new d.LatLng(a[0],a[1]):isNaN(a)?a:new d.LatLng(a,b)},d.LatLngBounds=function(a,b){if(a)for(var c=b?[a,b]:a,d=0,e=c.length;e>d;d++)this.extend(c[d])},d.LatLngBounds.prototype={extend:function(a){return a="number"==typeof a[0]||"string"==typeof a[0]||a instanceof d.LatLng?d.latLng(a):d.latLngBounds(a),a instanceof d.LatLng?this._southWest||this._northEast?(this._southWest.lat=Math.min(a.lat,this._southWest.lat),this._southWest.lng=Math.min(a.lng,this._southWest.lng),this._northEast.lat=Math.max(a.lat,this._northEast.lat),this._northEast.lng=Math.max(a.lng,this._northEast.lng)):(this._southWest=new d.LatLng(a.lat,a.lng),this._northEast=new d.LatLng(a.lat,a.lng)):a instanceof d.LatLngBounds&&(this.extend(a._southWest),this.extend(a._northEast)),this},pad:function(a){var b=this._southWest,c=this._northEast,e=Math.abs(b.lat-c.lat)*a,f=Math.abs(b.lng-c.lng)*a;return new d.LatLngBounds(new d.LatLng(b.lat-e,b.lng-f),new d.LatLng(c.lat+e,c.lng+f))},getCenter:function(){return new d.LatLng((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new d.LatLng(this._northEast.lat,this._southWest.lng)},getSouthEast:function(){return new d.LatLng(this._southWest.lat,this._northEast.lng)},contains:function(a){a="number"==typeof a[0]||a instanceof d.LatLng?d.latLng(a):d.latLngBounds(a);var b,c,e=this._southWest,f=this._northEast;return a instanceof d.LatLngBounds?(b=a.getSouthWest(),c=a.getNorthEast()):b=c=a,b.lat>=e.lat&&c.lat<=f.lat&&b.lng>=e.lng&&c.lng<=f.lng},intersects:function(a){a=d.latLngBounds(a);var b=this._southWest,c=this._northEast,e=a.getSouthWest(),f=a.getNorthEast(),g=f.lat>=b.lat&&e.lat<=c.lat,h=f.lng>=b.lng&&e.lng<=c.lng;return g&&h},toBBoxString:function(){var a=this._southWest,b=this._northEast;return[a.lng,a.lat,b.lng,b.lat].join(",")},equals:function(a){return a?(a=d.latLngBounds(a),this._southWest.equals(a.getSouthWest())&&this._northEast.equals(a.getNorthEast())):!1},isValid:function(){return!(!this._southWest||!this._northEast)}},d.latLngBounds=function(a,b){return!a||a instanceof d.LatLngBounds?a:new d.LatLngBounds(a,b)},d.Projection={},d.Projection.SphericalMercator={MAX_LATITUDE:85.0511287798,project:function(a){var b=d.LatLng.DEG_TO_RAD,c=this.MAX_LATITUDE,e=Math.max(Math.min(c,a.lat),-c),f=a.lng*b,g=e*b;return g=Math.log(Math.tan(Math.PI/4+g/2)),new d.Point(f,g)},unproject:function(a){var b=d.LatLng.RAD_TO_DEG,c=a.x*b,e=(2*Math.atan(Math.exp(a.y))-Math.PI/2)*b;return new d.LatLng(e,c)}},d.Projection.LonLat={project:function(a){return new d.Point(a.lng,a.lat)},unproject:function(a){return new d.LatLng(a.y,a.x)}},d.CRS={latLngToPoint:function(a,b){var c=this.projection.project(a),d=this.scale(b);return this.transformation._transform(c,d)},pointToLatLng:function(a,b){var c=this.scale(b),d=this.transformation.untransform(a,c);return this.projection.unproject(d)},project:function(a){return this.projection.project(a)},scale:function(a){return 256*Math.pow(2,a)}},d.CRS.Simple=d.extend({},d.CRS,{projection:d.Projection.LonLat,transformation:new d.Transformation(1,0,-1,0),scale:function(a){return Math.pow(2,a)}}),d.CRS.EPSG3857=d.extend({},d.CRS,{code:"EPSG:3857",projection:d.Projection.SphericalMercator,transformation:new d.Transformation(.5/Math.PI,.5,-.5/Math.PI,.5),project:function(a){var b=this.projection.project(a),c=6378137;return b.multiplyBy(c)}}),d.CRS.EPSG900913=d.extend({},d.CRS.EPSG3857,{code:"EPSG:900913"}),d.CRS.EPSG4326=d.extend({},d.CRS,{code:"EPSG:4326",projection:d.Projection.LonLat,transformation:new d.Transformation(1/360,.5,-1/360,.5)}),d.Map=d.Class.extend({includes:d.Mixin.Events,options:{crs:d.CRS.EPSG3857,fadeAnimation:d.DomUtil.TRANSITION&&!d.Browser.android23,trackResize:!0,markerZoomAnimation:d.DomUtil.TRANSITION&&d.Browser.any3d},initialize:function(a,b){b=d.setOptions(this,b),this._initContainer(a),this._initLayout(),this.callInitHooks(),this._initEvents(),b.maxBounds&&this.setMaxBounds(b.maxBounds),b.center&&b.zoom!==c&&this.setView(d.latLng(b.center),b.zoom,!0),this._initLayers(b.layers)},setView:function(a,b){return this._resetView(d.latLng(a),this._limitZoom(b)),this},setZoom:function(a){return this.setView(this.getCenter(),a)},zoomIn:function(a){return this.setZoom(this._zoom+(a||1))},zoomOut:function(a){return this.setZoom(this._zoom-(a||1))},fitBounds:function(a){var b=this.getBoundsZoom(a);return this.setView(d.latLngBounds(a).getCenter(),b)},fitWorld:function(){var a=new d.LatLng(-60,-170),b=new d.LatLng(85,179);return this.fitBounds(new d.LatLngBounds(a,b))},panTo:function(a){return this.setView(a,this._zoom)},panBy:function(a){return this.fire("movestart"),this._rawPanBy(d.point(a)),this.fire("move"),this.fire("moveend")},setMaxBounds:function(a){if(a=d.latLngBounds(a),this.options.maxBounds=a,!a)return this._boundsMinZoom=null,this;var b=this.getBoundsZoom(a,!0);return this._boundsMinZoom=b,this._loaded&&(b>this._zoom?this.setView(a.getCenter(),b):this.panInsideBounds(a)),this},panInsideBounds:function(a){a=d.latLngBounds(a);var b=this.getBounds(),c=this.project(b.getSouthWest()),e=this.project(b.getNorthEast()),f=this.project(a.getSouthWest()),g=this.project(a.getNorthEast()),h=0,i=0;return e.y<g.y&&(i=g.y-e.y),e.x>g.x&&(h=g.x-e.x),c.y>f.y&&(i=f.y-c.y),c.x<f.x&&(h=f.x-c.x),this.panBy(new d.Point(h,i,!0))},addLayer:function(a){var b=d.stamp(a);return this._layers[b]?this:(this._layers[b]=a,!a.options||isNaN(a.options.maxZoom)&&isNaN(a.options.minZoom)||(this._zoomBoundLayers[b]=a,this._updateZoomLevels()),this.options.zoomAnimation&&d.TileLayer&&a instanceof d.TileLayer&&(this._tileLayersNum++,this._tileLayersToLoad++,a.on("load",this._onTileLayerLoad,this)),this.whenReady(function(){a.onAdd(this),this.fire("layeradd",{layer:a})},this),this)},removeLayer:function(a){var b=d.stamp(a);return this._layers[b]?(a.onRemove(this),delete this._layers[b],this._zoomBoundLayers[b]&&(delete this._zoomBoundLayers[b],this._updateZoomLevels()),this.options.zoomAnimation&&d.TileLayer&&a instanceof d.TileLayer&&(this._tileLayersNum--,this._tileLayersToLoad--,a.off("load",this._onTileLayerLoad,this)),this.fire("layerremove",{layer:a})):void 0},hasLayer:function(a){var b=d.stamp(a);return this._layers.hasOwnProperty(b)},invalidateSize:function(a){var b=this.getSize();if(this._sizeChanged=!0,this.options.maxBounds&&this.setMaxBounds(this.options.maxBounds),!this._loaded)return this;var c=b._subtract(this.getSize())._divideBy(2)._round();return a===!0?this.panBy(c):(this._rawPanBy(c),this.fire("move"),clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(d.bind(this.fire,this,"moveend"),200)),this},addHandler:function(a,b){return b?(this[a]=new b(this),this.options[a]&&this[a].enable(),this):c},getCenter:function(){return this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var a=this.getPixelBounds(),b=this.unproject(a.getBottomLeft()),c=this.unproject(a.getTopRight());return new d.LatLngBounds(b,c)},getMinZoom:function(){var a=this.options.minZoom||0,b=this._layersMinZoom||0,c=this._boundsMinZoom||0;return Math.max(a,b,c)},getMaxZoom:function(){var a=this.options.maxZoom===c?1/0:this.options.maxZoom,b=this._layersMaxZoom===c?1/0:this._layersMaxZoom;return Math.min(a,b)},getBoundsZoom:function(a,b){a=d.latLngBounds(a);var c,e,f,g=this.getSize(),h=this.options.minZoom||0,i=this.getMaxZoom(),j=a.getNorthEast(),k=a.getSouthWest(),l=!0;b&&h--;do h++,e=this.project(j,h),f=this.project(k,h),c=new d.Point(Math.abs(e.x-f.x),Math.abs(f.y-e.y)),l=b?c.x<g.x||c.y<g.y:c.x<=g.x&&c.y<=g.y;while(l&&i>=h);return l&&b?null:b?h:h-1},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new d.Point(this._container.clientWidth,this._container.clientHeight),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(){var a=this._getTopLeftPoint();return new d.Bounds(a,a.add(this.getSize()))},getPixelOrigin:function(){return this._initialTopLeftPoint},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(a){var b=this.options.crs;return b.scale(a)/b.scale(this._zoom)},getScaleZoom:function(a){return this._zoom+Math.log(a)/Math.LN2},project:function(a,b){return b=b===c?this._zoom:b,this.options.crs.latLngToPoint(d.latLng(a),b)},unproject:function(a,b){return b=b===c?this._zoom:b,this.options.crs.pointToLatLng(d.point(a),b)},layerPointToLatLng:function(a){var b=d.point(a).add(this._initialTopLeftPoint);return this.unproject(b)},latLngToLayerPoint:function(a){var b=this.project(d.latLng(a))._round();return b._subtract(this._initialTopLeftPoint)},containerPointToLayerPoint:function(a){return d.point(a).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(a){return d.point(a).add(this._getMapPanePos())},containerPointToLatLng:function(a){var b=this.containerPointToLayerPoint(d.point(a));return this.layerPointToLatLng(b)},latLngToContainerPoint:function(a){return this.layerPointToContainerPoint(this.latLngToLayerPoint(d.latLng(a)))},mouseEventToContainerPoint:function(a){return d.DomEvent.getMousePosition(a,this._container)},mouseEventToLayerPoint:function(a){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(a))},mouseEventToLatLng:function(a){return this.layerPointToLatLng(this.mouseEventToLayerPoint(a))},_initContainer:function(a){var b=this._container=d.DomUtil.get(a);if(b._leaflet)throw Error("Map container is already initialized.");b._leaflet=!0},_initLayout:function(){var a=this._container;d.DomUtil.addClass(a,"leaflet-container"),d.Browser.touch&&d.DomUtil.addClass(a,"leaflet-touch"),this.options.fadeAnimation&&d.DomUtil.addClass(a,"leaflet-fade-anim");var b=d.DomUtil.getStyle(a,"position");"absolute"!==b&&"relative"!==b&&"fixed"!==b&&(a.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var a=this._panes={};this._mapPane=a.mapPane=this._createPane("leaflet-map-pane",this._container),this._tilePane=a.tilePane=this._createPane("leaflet-tile-pane",this._mapPane),a.objectsPane=this._createPane("leaflet-objects-pane",this._mapPane),a.shadowPane=this._createPane("leaflet-shadow-pane"),a.overlayPane=this._createPane("leaflet-overlay-pane"),a.markerPane=this._createPane("leaflet-marker-pane"),a.popupPane=this._createPane("leaflet-popup-pane");var b=" leaflet-zoom-hide";this.options.markerZoomAnimation||(d.DomUtil.addClass(a.markerPane,b),d.DomUtil.addClass(a.shadowPane,b),d.DomUtil.addClass(a.popupPane,b))},_createPane:function(a,b){return d.DomUtil.create("div",a,b||this._panes.objectsPane)},_initLayers:function(a){a=a?d.Util.isArray(a)?a:[a]:[],this._layers={},this._zoomBoundLayers={},this._tileLayersNum=0;var b,c;for(b=0,c=a.length;c>b;b++)this.addLayer(a[b])},_resetView:function(a,b,c,e){var f=this._zoom!==b;e||(this.fire("movestart"),f&&this.fire("zoomstart")),this._zoom=b,this._initialTopLeftPoint=this._getNewTopLeftPoint(a),c?this._initialTopLeftPoint._add(this._getMapPanePos()):d.DomUtil.setPosition(this._mapPane,new d.Point(0,0)),this._tileLayersToLoad=this._tileLayersNum;var g=!this._loaded;this._loaded=!0,this.fire("viewreset",{hard:!c}),this.fire("move"),(f||e)&&this.fire("zoomend"),this.fire("moveend",{hard:!c}),g&&this.fire("load")},_rawPanBy:function(a){d.DomUtil.setPosition(this._mapPane,this._getMapPanePos().subtract(a))},_updateZoomLevels:function(){var a,b=1/0,d=-1/0;for(a in this._zoomBoundLayers)if(this._zoomBoundLayers.hasOwnProperty(a)){var e=this._zoomBoundLayers[a];isNaN(e.options.minZoom)||(b=Math.min(b,e.options.minZoom)),isNaN(e.options.maxZoom)||(d=Math.max(d,e.options.maxZoom))}a===c?this._layersMaxZoom=this._layersMinZoom=c:(this._layersMaxZoom=d,this._layersMinZoom=b)},_initEvents:function(){if(d.DomEvent){d.DomEvent.on(this._container,"click",this._onMouseClick,this);var b,c,e=["dblclick","mousedown","mouseup","mouseenter","mouseleave","mousemove","contextmenu"];for(b=0,c=e.length;c>b;b++)d.DomEvent.on(this._container,e[b],this._fireMouseEvent,this);this.options.trackResize&&d.DomEvent.on(a,"resize",this._onResize,this)}},_onResize:function(){d.Util.cancelAnimFrame(this._resizeRequest),this._resizeRequest=d.Util.requestAnimFrame(this.invalidateSize,this,!1,this._container)},_onMouseClick:function(a){!this._loaded||this.dragging&&this.dragging.moved()||(this.fire("preclick"),this._fireMouseEvent(a))},_fireMouseEvent:function(a){if(this._loaded){var b=a.type;if(b="mouseenter"===b?"mouseover":"mouseleave"===b?"mouseout":b,this.hasEventListeners(b)){"contextmenu"===b&&d.DomEvent.preventDefault(a);var c=this.mouseEventToContainerPoint(a),e=this.containerPointToLayerPoint(c),f=this.layerPointToLatLng(e);this.fire(b,{latlng:f,layerPoint:e,containerPoint:c,originalEvent:a})}}},_onTileLayerLoad:function(){this._tileLayersToLoad--,this._tileLayersNum&&!this._tileLayersToLoad&&this._tileBg&&(clearTimeout(this._clearTileBgTimer),this._clearTileBgTimer=setTimeout(d.bind(this._clearTileBg,this),500))},whenReady:function(a,b){return this._loaded?a.call(b||this,this):this.on("load",a,b),this},_getMapPanePos:function(){return d.DomUtil.getPosition(this._mapPane)},_getTopLeftPoint:function(){if(!this._loaded)throw Error("Set map center and zoom first.");return this._initialTopLeftPoint.subtract(this._getMapPanePos())},_getNewTopLeftPoint:function(a,b){var c=this.getSize()._divideBy(2);return this.project(a,b)._subtract(c)._round()},_latLngToNewLayerPoint:function(a,b,c){var d=this._getNewTopLeftPoint(c,b).add(this._getMapPanePos());return this.project(a,b)._subtract(d)},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(a){return this.latLngToLayerPoint(a).subtract(this._getCenterLayerPoint())},_limitZoom:function(a){var b=this.getMinZoom(),c=this.getMaxZoom();return Math.max(b,Math.min(c,a))}}),d.map=function(a,b){return new d.Map(a,b)},d.Projection.Mercator={MAX_LATITUDE:85.0840591556,R_MINOR:6356752.3142,R_MAJOR:6378137,project:function(a){var b=d.LatLng.DEG_TO_RAD,c=this.MAX_LATITUDE,e=Math.max(Math.min(c,a.lat),-c),f=this.R_MAJOR,g=this.R_MINOR,h=a.lng*b*f,i=e*b,j=g/f,k=Math.sqrt(1-j*j),l=k*Math.sin(i);l=Math.pow((1-l)/(1+l),.5*k);var m=Math.tan(.5*(.5*Math.PI-i))/l;return i=-g*Math.log(m),new d.Point(h,i)},unproject:function(a){for(var b,c=d.LatLng.RAD_TO_DEG,e=this.R_MAJOR,f=this.R_MINOR,g=a.x*c/e,h=f/e,i=Math.sqrt(1-h*h),j=Math.exp(-a.y/f),k=Math.PI/2-2*Math.atan(j),l=15,m=1e-7,n=l,o=.1;Math.abs(o)>m&&--n>0;)b=i*Math.sin(k),o=Math.PI/2-2*Math.atan(j*Math.pow((1-b)/(1+b),.5*i))-k,k+=o;return new d.LatLng(k*c,g)}},d.CRS.EPSG3395=d.extend({},d.CRS,{code:"EPSG:3395",projection:d.Projection.Mercator,transformation:function(){var a=d.Projection.Mercator,b=a.R_MAJOR,c=a.R_MINOR;
return new d.Transformation(.5/(Math.PI*b),.5,-.5/(Math.PI*c),.5)}()}),d.TileLayer=d.Class.extend({includes:d.Mixin.Events,options:{minZoom:0,maxZoom:18,tileSize:256,subdomains:"abc",errorTileUrl:"",attribution:"",zoomOffset:0,opacity:1,unloadInvisibleTiles:d.Browser.mobile,updateWhenIdle:d.Browser.mobile},initialize:function(a,b){b=d.setOptions(this,b),b.detectRetina&&d.Browser.retina&&b.maxZoom>0&&(b.tileSize=Math.floor(b.tileSize/2),b.zoomOffset++,b.minZoom>0&&b.minZoom--,this.options.maxZoom--),this._url=a;var c=this.options.subdomains;"string"==typeof c&&(this.options.subdomains=c.split(""))},onAdd:function(a){this._map=a,this._initContainer(),this._createTileProto(),a.on({viewreset:this._resetCallback,moveend:this._update},this),this.options.updateWhenIdle||(this._limitedUpdate=d.Util.limitExecByInterval(this._update,150,this),a.on("move",this._limitedUpdate,this)),this._reset(),this._update()},addTo:function(a){return a.addLayer(this),this},onRemove:function(a){this._container.parentNode.removeChild(this._container),a.off({viewreset:this._resetCallback,moveend:this._update},this),this.options.updateWhenIdle||a.off("move",this._limitedUpdate,this),this._container=null,this._map=null},bringToFront:function(){var a=this._map._panes.tilePane;return this._container&&(a.appendChild(this._container),this._setAutoZIndex(a,Math.max)),this},bringToBack:function(){var a=this._map._panes.tilePane;return this._container&&(a.insertBefore(this._container,a.firstChild),this._setAutoZIndex(a,Math.min)),this},getAttribution:function(){return this.options.attribution},setOpacity:function(a){return this.options.opacity=a,this._map&&this._updateOpacity(),this},setZIndex:function(a){return this.options.zIndex=a,this._updateZIndex(),this},setUrl:function(a,b){return this._url=a,b||this.redraw(),this},redraw:function(){return this._map&&(this._map._panes.tilePane.empty=!1,this._reset(!0),this._update()),this},_updateZIndex:function(){this._container&&this.options.zIndex!==c&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(a,b){var c,d,e,f=a.children,g=-b(1/0,-1/0);for(d=0,e=f.length;e>d;d++)f[d]!==this._container&&(c=parseInt(f[d].style.zIndex,10),isNaN(c)||(g=b(g,c)));this.options.zIndex=this._container.style.zIndex=(isFinite(g)?g:0)+b(1,-1)},_updateOpacity:function(){d.DomUtil.setOpacity(this._container,this.options.opacity);var a,b=this._tiles;if(d.Browser.webkit)for(a in b)b.hasOwnProperty(a)&&(b[a].style.webkitTransform+=" translate(0,0)")},_initContainer:function(){var a=this._map._panes.tilePane;(!this._container||a.empty)&&(this._container=d.DomUtil.create("div","leaflet-layer"),this._updateZIndex(),a.appendChild(this._container),1>this.options.opacity&&this._updateOpacity())},_resetCallback:function(a){this._reset(a.hard)},_reset:function(a){var b=this._tiles;for(var c in b)b.hasOwnProperty(c)&&this.fire("tileunload",{tile:b[c]});this._tiles={},this._tilesToLoad=0,this.options.reuseTiles&&(this._unusedTiles=[]),a&&this._container&&(this._container.innerHTML=""),this._initContainer()},_update:function(){if(this._map){var a=this._map.getPixelBounds(),b=this._map.getZoom(),c=this.options.tileSize;if(!(b>this.options.maxZoom||this.options.minZoom>b)){var e=new d.Point(Math.floor(a.min.x/c),Math.floor(a.min.y/c)),f=new d.Point(Math.floor(a.max.x/c),Math.floor(a.max.y/c)),g=new d.Bounds(e,f);this._addTilesFromCenterOut(g),(this.options.unloadInvisibleTiles||this.options.reuseTiles)&&this._removeOtherTiles(g)}}},_addTilesFromCenterOut:function(a){var c,e,f,g=[],h=a.getCenter();for(c=a.min.y;a.max.y>=c;c++)for(e=a.min.x;a.max.x>=e;e++)f=new d.Point(e,c),this._tileShouldBeLoaded(f)&&g.push(f);var i=g.length;if(0!==i){g.sort(function(a,b){return a.distanceTo(h)-b.distanceTo(h)});var j=b.createDocumentFragment();for(this._tilesToLoad||this.fire("loading"),this._tilesToLoad+=i,e=0;i>e;e++)this._addTile(g[e],j);this._container.appendChild(j)}},_tileShouldBeLoaded:function(a){if(a.x+":"+a.y in this._tiles)return!1;if(!this.options.continuousWorld){var b=this._getWrapTileNum();if(this.options.noWrap&&(0>a.x||a.x>=b)||0>a.y||a.y>=b)return!1}return!0},_removeOtherTiles:function(a){var b,c,d,e;for(e in this._tiles)this._tiles.hasOwnProperty(e)&&(b=e.split(":"),c=parseInt(b[0],10),d=parseInt(b[1],10),(a.min.x>c||c>a.max.x||a.min.y>d||d>a.max.y)&&this._removeTile(e))},_removeTile:function(a){var b=this._tiles[a];this.fire("tileunload",{tile:b,url:b.src}),this.options.reuseTiles?(d.DomUtil.removeClass(b,"leaflet-tile-loaded"),this._unusedTiles.push(b)):b.parentNode===this._container&&this._container.removeChild(b),d.Browser.android||(b.src=d.Util.emptyImageUrl),delete this._tiles[a]},_addTile:function(a,b){var c=this._getTilePos(a),e=this._getTile();d.DomUtil.setPosition(e,c,d.Browser.chrome||d.Browser.android23),this._tiles[a.x+":"+a.y]=e,this._loadTile(e,a),e.parentNode!==this._container&&b.appendChild(e)},_getZoomForUrl:function(){var a=this.options,b=this._map.getZoom();return a.zoomReverse&&(b=a.maxZoom-b),b+a.zoomOffset},_getTilePos:function(a){var b=this._map.getPixelOrigin(),c=this.options.tileSize;return a.multiplyBy(c).subtract(b)},getTileUrl:function(a){return this._adjustTilePoint(a),d.Util.template(this._url,d.extend({s:this._getSubdomain(a),z:this._getZoomForUrl(),x:a.x,y:a.y},this.options))},_getWrapTileNum:function(){return Math.pow(2,this._getZoomForUrl())},_adjustTilePoint:function(a){var b=this._getWrapTileNum();this.options.continuousWorld||this.options.noWrap||(a.x=(a.x%b+b)%b),this.options.tms&&(a.y=b-a.y-1)},_getSubdomain:function(a){var b=(a.x+a.y)%this.options.subdomains.length;return this.options.subdomains[b]},_createTileProto:function(){var a=this._tileImg=d.DomUtil.create("img","leaflet-tile");a.style.width=a.style.height=this.options.tileSize+"px",a.galleryimg="no"},_getTile:function(){if(this.options.reuseTiles&&this._unusedTiles.length>0){var a=this._unusedTiles.pop();return this._resetTile(a),a}return this._createTile()},_resetTile:function(){},_createTile:function(){var a=this._tileImg.cloneNode(!1);return a.onselectstart=a.onmousemove=d.Util.falseFn,a},_loadTile:function(a,b){a._layer=this,a.onload=this._tileOnLoad,a.onerror=this._tileOnError,a.src=this.getTileUrl(b)},_tileLoaded:function(){this._tilesToLoad--,this._tilesToLoad||this.fire("load")},_tileOnLoad:function(){var a=this._layer;this.src!==d.Util.emptyImageUrl&&(d.DomUtil.addClass(this,"leaflet-tile-loaded"),a.fire("tileload",{tile:this,url:this.src})),a._tileLoaded()},_tileOnError:function(){var a=this._layer;a.fire("tileerror",{tile:this,url:this.src});var b=a.options.errorTileUrl;b&&(this.src=b),a._tileLoaded()}}),d.tileLayer=function(a,b){return new d.TileLayer(a,b)},d.TileLayer.WMS=d.TileLayer.extend({defaultWmsParams:{service:"WMS",request:"GetMap",version:"1.1.1",layers:"",styles:"",format:"image/jpeg",transparent:!1},initialize:function(a,b){this._url=a;var c=d.extend({},this.defaultWmsParams);c.width=c.height=b.detectRetina&&d.Browser.retina?2*this.options.tileSize:this.options.tileSize;for(var e in b)this.options.hasOwnProperty(e)||(c[e]=b[e]);this.wmsParams=c,d.setOptions(this,b)},onAdd:function(a){var b=parseFloat(this.wmsParams.version)>=1.3?"crs":"srs";this.wmsParams[b]=a.options.crs.code,d.TileLayer.prototype.onAdd.call(this,a)},getTileUrl:function(a,b){this._adjustTilePoint(a);var c=this._map,e=c.options.crs,f=this.options.tileSize,g=a.multiplyBy(f),h=g.add(new d.Point(f,f)),i=e.project(c.unproject(g,b)),j=e.project(c.unproject(h,b)),k=[i.x,j.y,j.x,i.y].join(","),l=d.Util.template(this._url,{s:this._getSubdomain(a)});return l+d.Util.getParamString(this.wmsParams,l)+"&bbox="+k},setParams:function(a,b){return d.extend(this.wmsParams,a),b||this.redraw(),this}}),d.tileLayer.wms=function(a,b){return new d.TileLayer.WMS(a,b)},d.TileLayer.Canvas=d.TileLayer.extend({options:{async:!1},initialize:function(a){d.setOptions(this,a)},redraw:function(){var a=this._tiles;for(var b in a)a.hasOwnProperty(b)&&this._redrawTile(a[b])},_redrawTile:function(a){this.drawTile(a,a._tilePoint,this._map._zoom)},_createTileProto:function(){var a=this._canvasProto=d.DomUtil.create("canvas","leaflet-tile");a.width=a.height=this.options.tileSize},_createTile:function(){var a=this._canvasProto.cloneNode(!1);return a.onselectstart=a.onmousemove=d.Util.falseFn,a},_loadTile:function(a,b){a._layer=this,a._tilePoint=b,this._redrawTile(a),this.options.async||this.tileDrawn(a)},drawTile:function(){},tileDrawn:function(a){this._tileOnLoad.call(a)}}),d.tileLayer.canvas=function(a){return new d.TileLayer.Canvas(a)},d.ImageOverlay=d.Class.extend({includes:d.Mixin.Events,options:{opacity:1},initialize:function(a,b,c){this._url=a,this._bounds=d.latLngBounds(b),d.setOptions(this,c)},onAdd:function(a){this._map=a,this._image||this._initImage(),a._panes.overlayPane.appendChild(this._image),a.on("viewreset",this._reset,this),a.options.zoomAnimation&&d.Browser.any3d&&a.on("zoomanim",this._animateZoom,this),this._reset()},onRemove:function(a){a.getPanes().overlayPane.removeChild(this._image),a.off("viewreset",this._reset,this),a.options.zoomAnimation&&a.off("zoomanim",this._animateZoom,this)},addTo:function(a){return a.addLayer(this),this},setOpacity:function(a){return this.options.opacity=a,this._updateOpacity(),this},bringToFront:function(){return this._image&&this._map._panes.overlayPane.appendChild(this._image),this},bringToBack:function(){var a=this._map._panes.overlayPane;return this._image&&a.insertBefore(this._image,a.firstChild),this},_initImage:function(){this._image=d.DomUtil.create("img","leaflet-image-layer"),this._map.options.zoomAnimation&&d.Browser.any3d?d.DomUtil.addClass(this._image,"leaflet-zoom-animated"):d.DomUtil.addClass(this._image,"leaflet-zoom-hide"),this._updateOpacity(),d.extend(this._image,{galleryimg:"no",onselectstart:d.Util.falseFn,onmousemove:d.Util.falseFn,onload:d.bind(this._onImageLoad,this),src:this._url})},_animateZoom:function(a){var b=this._map,c=this._image,e=b.getZoomScale(a.zoom),f=this._bounds.getNorthWest(),g=this._bounds.getSouthEast(),h=b._latLngToNewLayerPoint(f,a.zoom,a.center),i=b._latLngToNewLayerPoint(g,a.zoom,a.center)._subtract(h),j=h._add(i._multiplyBy(.5*(1-1/e)));c.style[d.DomUtil.TRANSFORM]=d.DomUtil.getTranslateString(j)+" scale("+e+") "},_reset:function(){var a=this._image,b=this._map.latLngToLayerPoint(this._bounds.getNorthWest()),c=this._map.latLngToLayerPoint(this._bounds.getSouthEast())._subtract(b);d.DomUtil.setPosition(a,b),a.style.width=c.x+"px",a.style.height=c.y+"px"},_onImageLoad:function(){this.fire("load")},_updateOpacity:function(){d.DomUtil.setOpacity(this._image,this.options.opacity)}}),d.imageOverlay=function(a,b,c){return new d.ImageOverlay(a,b,c)},d.Icon=d.Class.extend({options:{className:""},initialize:function(a){d.setOptions(this,a)},createIcon:function(){return this._createIcon("icon")},createShadow:function(){return this._createIcon("shadow")},_createIcon:function(a){var b=this._getIconUrl(a);if(!b){if("icon"===a)throw Error("iconUrl not set in Icon options (see the docs).");return null}var c=this._createImg(b);return this._setIconStyles(c,a),c},_setIconStyles:function(a,b){var c,e=this.options,f=d.point(e[b+"Size"]);c="shadow"===b?d.point(e.shadowAnchor||e.iconAnchor):d.point(e.iconAnchor),!c&&f&&(c=f.divideBy(2,!0)),a.className="leaflet-marker-"+b+" "+e.className,c&&(a.style.marginLeft=-c.x+"px",a.style.marginTop=-c.y+"px"),f&&(a.style.width=f.x+"px",a.style.height=f.y+"px")},_createImg:function(a){var c;return d.Browser.ie6?(c=b.createElement("div"),c.style.filter='progid:DXImageTransform.Microsoft.AlphaImageLoader(src="'+a+'")'):(c=b.createElement("img"),c.src=a),c},_getIconUrl:function(a){return d.Browser.retina&&this.options[a+"RetinaUrl"]?this.options[a+"RetinaUrl"]:this.options[a+"Url"]}}),d.icon=function(a){return new d.Icon(a)},d.Icon.Default=d.Icon.extend({options:{iconSize:new d.Point(25,41),iconAnchor:new d.Point(12,41),popupAnchor:new d.Point(1,-34),shadowSize:new d.Point(41,41)},_getIconUrl:function(a){var b=a+"Url";if(this.options[b])return this.options[b];d.Browser.retina&&"icon"===a&&(a+="@2x");var c=d.Icon.Default.imagePath;if(!c)throw Error("Couldn't autodetect L.Icon.Default.imagePath, set it manually.");return c+"/marker-"+a+".png"}}),d.Icon.Default.imagePath=function(){var a,c,d,e,f=b.getElementsByTagName("script"),g=/\/?leaflet[\-\._]?([\w\-\._]*)\.js\??/;for(a=0,c=f.length;c>a;a++)if(d=f[a].src,e=d.match(g))return d.split(g)[0]+"/images"}(),d.Marker=d.Class.extend({includes:d.Mixin.Events,options:{icon:new d.Icon.Default,title:"",clickable:!0,draggable:!1,zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250},initialize:function(a,b){d.setOptions(this,b),this._latlng=d.latLng(a)},onAdd:function(a){this._map=a,a.on("viewreset",this.update,this),this._initIcon(),this.update(),a.options.zoomAnimation&&a.options.markerZoomAnimation&&a.on("zoomanim",this._animateZoom,this)},addTo:function(a){return a.addLayer(this),this},onRemove:function(a){this._removeIcon(),this.fire("remove"),a.off({viewreset:this.update,zoomanim:this._animateZoom},this),this._map=null},getLatLng:function(){return this._latlng},setLatLng:function(a){return this._latlng=d.latLng(a),this.update(),this.fire("move",{latlng:this._latlng})},setZIndexOffset:function(a){return this.options.zIndexOffset=a,this.update(),this},setIcon:function(a){return this._map&&this._removeIcon(),this.options.icon=a,this._map&&(this._initIcon(),this.update()),this},update:function(){if(this._icon){var a=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(a)}return this},_initIcon:function(){var a=this.options,b=this._map,c=b.options.zoomAnimation&&b.options.markerZoomAnimation,e=c?"leaflet-zoom-animated":"leaflet-zoom-hide",f=!1;this._icon||(this._icon=a.icon.createIcon(),a.title&&(this._icon.title=a.title),this._initInteraction(),f=1>this.options.opacity,d.DomUtil.addClass(this._icon,e),a.riseOnHover&&d.DomEvent.on(this._icon,"mouseover",this._bringToFront,this).on(this._icon,"mouseout",this._resetZIndex,this)),this._shadow||(this._shadow=a.icon.createShadow(),this._shadow&&(d.DomUtil.addClass(this._shadow,e),f=1>this.options.opacity)),f&&this._updateOpacity();var g=this._map._panes;g.markerPane.appendChild(this._icon),this._shadow&&g.shadowPane.appendChild(this._shadow)},_removeIcon:function(){var a=this._map._panes;this.options.riseOnHover&&d.DomEvent.off(this._icon,"mouseover",this._bringToFront).off(this._icon,"mouseout",this._resetZIndex),a.markerPane.removeChild(this._icon),this._shadow&&a.shadowPane.removeChild(this._shadow),this._icon=this._shadow=null},_setPos:function(a){d.DomUtil.setPosition(this._icon,a),this._shadow&&d.DomUtil.setPosition(this._shadow,a),this._zIndex=a.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(a){this._icon.style.zIndex=this._zIndex+a},_animateZoom:function(a){var b=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center);this._setPos(b)},_initInteraction:function(){if(this.options.clickable){var a=this._icon,b=["dblclick","mousedown","mouseover","mouseout","contextmenu"];d.DomUtil.addClass(a,"leaflet-clickable"),d.DomEvent.on(a,"click",this._onMouseClick,this);for(var c=0;b.length>c;c++)d.DomEvent.on(a,b[c],this._fireMouseEvent,this);d.Handler.MarkerDrag&&(this.dragging=new d.Handler.MarkerDrag(this),this.options.draggable&&this.dragging.enable())}},_onMouseClick:function(a){var b=this.dragging&&this.dragging.moved();(this.hasEventListeners(a.type)||b)&&d.DomEvent.stopPropagation(a),b||(this.dragging&&this.dragging._enabled||!this._map.dragging||!this._map.dragging.moved())&&this.fire(a.type,{originalEvent:a})},_fireMouseEvent:function(a){this.fire(a.type,{originalEvent:a}),"contextmenu"===a.type&&this.hasEventListeners(a.type)&&d.DomEvent.preventDefault(a),"mousedown"!==a.type&&d.DomEvent.stopPropagation(a)},setOpacity:function(a){this.options.opacity=a,this._map&&this._updateOpacity()},_updateOpacity:function(){d.DomUtil.setOpacity(this._icon,this.options.opacity),this._shadow&&d.DomUtil.setOpacity(this._shadow,this.options.opacity)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)}}),d.marker=function(a,b){return new d.Marker(a,b)},d.DivIcon=d.Icon.extend({options:{iconSize:new d.Point(12,12),className:"leaflet-div-icon"},createIcon:function(){var a=b.createElement("div"),c=this.options;return c.html&&(a.innerHTML=c.html),c.bgPos&&(a.style.backgroundPosition=-c.bgPos.x+"px "+-c.bgPos.y+"px"),this._setIconStyles(a,"icon"),a},createShadow:function(){return null}}),d.divIcon=function(a){return new d.DivIcon(a)},d.Map.mergeOptions({closePopupOnClick:!0}),d.Popup=d.Class.extend({includes:d.Mixin.Events,options:{minWidth:50,maxWidth:300,maxHeight:null,autoPan:!0,closeButton:!0,offset:new d.Point(0,6),autoPanPadding:new d.Point(5,5),className:"",zoomAnimation:!0},initialize:function(a,b){d.setOptions(this,a),this._source=b,this._animated=d.Browser.any3d&&this.options.zoomAnimation},onAdd:function(a){this._map=a,this._container||this._initLayout(),this._updateContent();var b=a.options.fadeAnimation;b&&d.DomUtil.setOpacity(this._container,0),a._panes.popupPane.appendChild(this._container),a.on("viewreset",this._updatePosition,this),this._animated&&a.on("zoomanim",this._zoomAnimation,this),a.options.closePopupOnClick&&a.on("preclick",this._close,this),this._update(),b&&d.DomUtil.setOpacity(this._container,1)},addTo:function(a){return a.addLayer(this),this},openOn:function(a){return a.openPopup(this),this},onRemove:function(a){a._panes.popupPane.removeChild(this._container),d.Util.falseFn(this._container.offsetWidth),a.off({viewreset:this._updatePosition,preclick:this._close,zoomanim:this._zoomAnimation},this),a.options.fadeAnimation&&d.DomUtil.setOpacity(this._container,0),this._map=null},setLatLng:function(a){return this._latlng=d.latLng(a),this._update(),this},setContent:function(a){return this._content=a,this._update(),this},_close:function(){var a=this._map;a&&(a._popup=null,a.removeLayer(this).fire("popupclose",{popup:this}))},_initLayout:function(){var a,b="leaflet-popup",c=b+" "+this.options.className+" leaflet-zoom-"+(this._animated?"animated":"hide"),e=this._container=d.DomUtil.create("div",c);this.options.closeButton&&(a=this._closeButton=d.DomUtil.create("a",b+"-close-button",e),a.href="#close",a.innerHTML="&#215;",d.DomEvent.on(a,"click",this._onCloseButtonClick,this));var f=this._wrapper=d.DomUtil.create("div",b+"-content-wrapper",e);d.DomEvent.disableClickPropagation(f),this._contentNode=d.DomUtil.create("div",b+"-content",f),d.DomEvent.on(this._contentNode,"mousewheel",d.DomEvent.stopPropagation),this._tipContainer=d.DomUtil.create("div",b+"-tip-container",e),this._tip=d.DomUtil.create("div",b+"-tip",this._tipContainer)},_update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},_updateContent:function(){if(this._content){if("string"==typeof this._content)this._contentNode.innerHTML=this._content;else{for(;this._contentNode.hasChildNodes();)this._contentNode.removeChild(this._contentNode.firstChild);this._contentNode.appendChild(this._content)}this.fire("contentupdate")}},_updateLayout:function(){var a=this._contentNode,b=a.style;b.width="",b.whiteSpace="nowrap";var c=a.offsetWidth;c=Math.min(c,this.options.maxWidth),c=Math.max(c,this.options.minWidth),b.width=c+1+"px",b.whiteSpace="",b.height="";var e=a.offsetHeight,f=this.options.maxHeight,g="leaflet-popup-scrolled";f&&e>f?(b.height=f+"px",d.DomUtil.addClass(a,g)):d.DomUtil.removeClass(a,g),this._containerWidth=this._container.offsetWidth},_updatePosition:function(){if(this._map){var a=this._map.latLngToLayerPoint(this._latlng),b=this._animated,c=this.options.offset;b&&d.DomUtil.setPosition(this._container,a),this._containerBottom=-c.y-(b?0:a.y),this._containerLeft=-Math.round(this._containerWidth/2)+c.x+(b?0:a.x),this._container.style.bottom=this._containerBottom+"px",this._container.style.left=this._containerLeft+"px"}},_zoomAnimation:function(a){var b=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center);d.DomUtil.setPosition(this._container,b)},_adjustPan:function(){if(this.options.autoPan){var a=this._map,b=this._container.offsetHeight,c=this._containerWidth,e=new d.Point(this._containerLeft,-b-this._containerBottom);this._animated&&e._add(d.DomUtil.getPosition(this._container));var f=a.layerPointToContainerPoint(e),g=this.options.autoPanPadding,h=a.getSize(),i=0,j=0;0>f.x&&(i=f.x-g.x),f.x+c>h.x&&(i=f.x+c-h.x+g.x),0>f.y&&(j=f.y-g.y),f.y+b>h.y&&(j=f.y+b-h.y+g.y),(i||j)&&a.panBy(new d.Point(i,j))}},_onCloseButtonClick:function(a){this._close(),d.DomEvent.stop(a)}}),d.popup=function(a,b){return new d.Popup(a,b)},d.Marker.include({openPopup:function(){return this._popup&&this._map&&(this._popup.setLatLng(this._latlng),this._map.openPopup(this._popup)),this},closePopup:function(){return this._popup&&this._popup._close(),this},bindPopup:function(a,b){var c=d.point(this.options.icon.options.popupAnchor)||new d.Point(0,0);return c=c.add(d.Popup.prototype.options.offset),b&&b.offset&&(c=c.add(b.offset)),b=d.extend({offset:c},b),this._popup||this.on("click",this.openPopup,this).on("remove",this.closePopup,this).on("move",this._movePopup,this),this._popup=new d.Popup(b,this).setContent(a),this},unbindPopup:function(){return this._popup&&(this._popup=null,this.off("click",this.openPopup).off("remove",this.closePopup).off("move",this._movePopup)),this},_movePopup:function(a){this._popup.setLatLng(a.latlng)}}),d.Map.include({openPopup:function(a){return this.closePopup(),this._popup=a,this.addLayer(a).fire("popupopen",{popup:this._popup})},closePopup:function(){return this._popup&&this._popup._close(),this}}),d.LayerGroup=d.Class.extend({initialize:function(a){this._layers={};var b,c;if(a)for(b=0,c=a.length;c>b;b++)this.addLayer(a[b])},addLayer:function(a){var b=d.stamp(a);return this._layers[b]=a,this._map&&this._map.addLayer(a),this},removeLayer:function(a){var b=d.stamp(a);return delete this._layers[b],this._map&&this._map.removeLayer(a),this},clearLayers:function(){return this.eachLayer(this.removeLayer,this),this},invoke:function(a){var b,c,d=Array.prototype.slice.call(arguments,1);for(b in this._layers)this._layers.hasOwnProperty(b)&&(c=this._layers[b],c[a]&&c[a].apply(c,d));return this},onAdd:function(a){this._map=a,this.eachLayer(a.addLayer,a)},onRemove:function(a){this.eachLayer(a.removeLayer,a),this._map=null},addTo:function(a){return a.addLayer(this),this},eachLayer:function(a,b){for(var c in this._layers)this._layers.hasOwnProperty(c)&&a.call(b,this._layers[c])},setZIndex:function(a){return this.invoke("setZIndex",a)}}),d.layerGroup=function(a){return new d.LayerGroup(a)},d.FeatureGroup=d.LayerGroup.extend({includes:d.Mixin.Events,statics:{EVENTS:"click dblclick mouseover mouseout mousemove contextmenu"},addLayer:function(a){return this._layers[d.stamp(a)]?this:(a.on(d.FeatureGroup.EVENTS,this._propagateEvent,this),d.LayerGroup.prototype.addLayer.call(this,a),this._popupContent&&a.bindPopup&&a.bindPopup(this._popupContent,this._popupOptions),this.fire("layeradd",{layer:a}))},removeLayer:function(a){return a.off(d.FeatureGroup.EVENTS,this._propagateEvent,this),d.LayerGroup.prototype.removeLayer.call(this,a),this._popupContent&&this.invoke("unbindPopup"),this.fire("layerremove",{layer:a})},bindPopup:function(a,b){return this._popupContent=a,this._popupOptions=b,this.invoke("bindPopup",a,b)},setStyle:function(a){return this.invoke("setStyle",a)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var a=new d.LatLngBounds;return this.eachLayer(function(b){a.extend(b instanceof d.Marker?b.getLatLng():b.getBounds())}),a},_propagateEvent:function(a){a.layer=a.target,a.target=this,this.fire(a.type,a)}}),d.featureGroup=function(a){return new d.FeatureGroup(a)},d.Path=d.Class.extend({includes:[d.Mixin.Events],statics:{CLIP_PADDING:d.Browser.mobile?Math.max(0,Math.min(.5,(1280/Math.max(a.innerWidth,a.innerHeight)-1)/2)):.5},options:{stroke:!0,color:"#0033ff",dashArray:null,weight:5,opacity:.5,fill:!1,fillColor:null,fillOpacity:.2,clickable:!0},initialize:function(a){d.setOptions(this,a)},onAdd:function(a){this._map=a,this._container||(this._initElements(),this._initEvents()),this.projectLatlngs(),this._updatePath(),this._container&&this._map._pathRoot.appendChild(this._container),this.fire("add"),a.on({viewreset:this.projectLatlngs,moveend:this._updatePath},this)},addTo:function(a){return a.addLayer(this),this},onRemove:function(a){a._pathRoot.removeChild(this._container),this.fire("remove"),this._map=null,d.Browser.vml&&(this._container=null,this._stroke=null,this._fill=null),a.off({viewreset:this.projectLatlngs,moveend:this._updatePath},this)},projectLatlngs:function(){},setStyle:function(a){return d.setOptions(this,a),this._container&&this._updateStyle(),this},redraw:function(){return this._map&&(this.projectLatlngs(),this._updatePath()),this}}),d.Map.include({_updatePathViewport:function(){var a=d.Path.CLIP_PADDING,b=this.getSize(),c=d.DomUtil.getPosition(this._mapPane),e=c.multiplyBy(-1)._subtract(b.multiplyBy(a)._round()),f=e.add(b.multiplyBy(1+2*a)._round());this._pathViewport=new d.Bounds(e,f)}}),d.Path.SVG_NS="http://www.w3.org/2000/svg",d.Browser.svg=!(!b.createElementNS||!b.createElementNS(d.Path.SVG_NS,"svg").createSVGRect),d.Path=d.Path.extend({statics:{SVG:d.Browser.svg},bringToFront:function(){var a=this._map._pathRoot,b=this._container;return b&&a.lastChild!==b&&a.appendChild(b),this},bringToBack:function(){var a=this._map._pathRoot,b=this._container,c=a.firstChild;return b&&c!==b&&a.insertBefore(b,c),this},getPathString:function(){},_createElement:function(a){return b.createElementNS(d.Path.SVG_NS,a)},_initElements:function(){this._map._initPathRoot(),this._initPath(),this._initStyle()},_initPath:function(){this._container=this._createElement("g"),this._path=this._createElement("path"),this._container.appendChild(this._path)},_initStyle:function(){this.options.stroke&&(this._path.setAttribute("stroke-linejoin","round"),this._path.setAttribute("stroke-linecap","round")),this.options.fill&&this._path.setAttribute("fill-rule","evenodd"),this._updateStyle()},_updateStyle:function(){this.options.stroke?(this._path.setAttribute("stroke",this.options.color),this._path.setAttribute("stroke-opacity",this.options.opacity),this._path.setAttribute("stroke-width",this.options.weight),this.options.dashArray?this._path.setAttribute("stroke-dasharray",this.options.dashArray):this._path.removeAttribute("stroke-dasharray")):this._path.setAttribute("stroke","none"),this.options.fill?(this._path.setAttribute("fill",this.options.fillColor||this.options.color),this._path.setAttribute("fill-opacity",this.options.fillOpacity)):this._path.setAttribute("fill","none")},_updatePath:function(){var a=this.getPathString();a||(a="M0 0"),this._path.setAttribute("d",a)},_initEvents:function(){if(this.options.clickable){(d.Browser.svg||!d.Browser.vml)&&this._path.setAttribute("class","leaflet-clickable"),d.DomEvent.on(this._container,"click",this._onMouseClick,this);for(var a=["dblclick","mousedown","mouseover","mouseout","mousemove","contextmenu"],b=0;a.length>b;b++)d.DomEvent.on(this._container,a[b],this._fireMouseEvent,this)}},_onMouseClick:function(a){this._map.dragging&&this._map.dragging.moved()||this._fireMouseEvent(a)},_fireMouseEvent:function(a){if(this.hasEventListeners(a.type)){var b=this._map,c=b.mouseEventToContainerPoint(a),e=b.containerPointToLayerPoint(c),f=b.layerPointToLatLng(e);this.fire(a.type,{latlng:f,layerPoint:e,containerPoint:c,originalEvent:a}),"contextmenu"===a.type&&d.DomEvent.preventDefault(a),"mousemove"!==a.type&&d.DomEvent.stopPropagation(a)}}}),d.Map.include({_initPathRoot:function(){this._pathRoot||(this._pathRoot=d.Path.prototype._createElement("svg"),this._panes.overlayPane.appendChild(this._pathRoot),this.options.zoomAnimation&&d.Browser.any3d?(this._pathRoot.setAttribute("class"," leaflet-zoom-animated"),this.on({zoomanim:this._animatePathZoom,zoomend:this._endPathZoom})):this._pathRoot.setAttribute("class"," leaflet-zoom-hide"),this.on("moveend",this._updateSvgViewport),this._updateSvgViewport())},_animatePathZoom:function(a){var b=this.getZoomScale(a.zoom),c=this._getCenterOffset(a.center)._multiplyBy(-b)._add(this._pathViewport.min);this._pathRoot.style[d.DomUtil.TRANSFORM]=d.DomUtil.getTranslateString(c)+" scale("+b+") ",this._pathZooming=!0},_endPathZoom:function(){this._pathZooming=!1},_updateSvgViewport:function(){if(!this._pathZooming){this._updatePathViewport();var a=this._pathViewport,b=a.min,c=a.max,e=c.x-b.x,f=c.y-b.y,g=this._pathRoot,h=this._panes.overlayPane;d.Browser.mobileWebkit&&h.removeChild(g),d.DomUtil.setPosition(g,b),g.setAttribute("width",e),g.setAttribute("height",f),g.setAttribute("viewBox",[b.x,b.y,e,f].join(" ")),d.Browser.mobileWebkit&&h.appendChild(g)}}}),d.Path.include({bindPopup:function(a,b){return(!this._popup||b)&&(this._popup=new d.Popup(b,this)),this._popup.setContent(a),this._popupHandlersAdded||(this.on("click",this._openPopup,this).on("remove",this.closePopup,this),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this._popup=null,this.off("click",this._openPopup).off("remove",this.closePopup),this._popupHandlersAdded=!1),this},openPopup:function(a){return this._popup&&(a=a||this._latlng||this._latlngs[Math.floor(this._latlngs.length/2)],this._openPopup({latlng:a})),this},closePopup:function(){return this._popup&&this._popup._close(),this},_openPopup:function(a){this._popup.setLatLng(a.latlng),this._map.openPopup(this._popup)}}),d.Browser.vml=!d.Browser.svg&&function(){try{var a=b.createElement("div");a.innerHTML='<v:shape adj="1"/>';var c=a.firstChild;return c.style.behavior="url(#default#VML)",c&&"object"==typeof c.adj}catch(d){return!1}}(),d.Path=d.Browser.svg||!d.Browser.vml?d.Path:d.Path.extend({statics:{VML:!0,CLIP_PADDING:.02},_createElement:function(){try{return b.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(a){return b.createElement("<lvml:"+a+' class="lvml">')}}catch(a){return function(a){return b.createElement("<"+a+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}(),_initPath:function(){var a=this._container=this._createElement("shape");d.DomUtil.addClass(a,"leaflet-vml-shape"),this.options.clickable&&d.DomUtil.addClass(a,"leaflet-clickable"),a.coordsize="1 1",this._path=this._createElement("path"),a.appendChild(this._path),this._map._pathRoot.appendChild(a)},_initStyle:function(){this._updateStyle()},_updateStyle:function(){var a=this._stroke,b=this._fill,c=this.options,d=this._container;d.stroked=c.stroke,d.filled=c.fill,c.stroke?(a||(a=this._stroke=this._createElement("stroke"),a.endcap="round",d.appendChild(a)),a.weight=c.weight+"px",a.color=c.color,a.opacity=c.opacity,a.dashStyle=c.dashArray?c.dashArray instanceof Array?c.dashArray.join(" "):c.dashArray.replace(/ *, */g," "):""):a&&(d.removeChild(a),this._stroke=null),c.fill?(b||(b=this._fill=this._createElement("fill"),d.appendChild(b)),b.color=c.fillColor||c.color,b.opacity=c.fillOpacity):b&&(d.removeChild(b),this._fill=null)},_updatePath:function(){var a=this._container.style;a.display="none",this._path.v=this.getPathString()+" ",a.display=""}}),d.Map.include(d.Browser.svg||!d.Browser.vml?{}:{_initPathRoot:function(){if(!this._pathRoot){var a=this._pathRoot=b.createElement("div");a.className="leaflet-vml-container",this._panes.overlayPane.appendChild(a),this.on("moveend",this._updatePathViewport),this._updatePathViewport()}}}),d.Browser.canvas=function(){return!!b.createElement("canvas").getContext}(),d.Path=d.Path.SVG&&!a.L_PREFER_CANVAS||!d.Browser.canvas?d.Path:d.Path.extend({statics:{CANVAS:!0,SVG:!1},redraw:function(){return this._map&&(this.projectLatlngs(),this._requestUpdate()),this},setStyle:function(a){return d.setOptions(this,a),this._map&&(this._updateStyle(),this._requestUpdate()),this
},onRemove:function(a){a.off("viewreset",this.projectLatlngs,this).off("moveend",this._updatePath,this),this.options.clickable&&this._map.off("click",this._onClick,this),this._requestUpdate(),this._map=null},_requestUpdate:function(){this._map&&!d.Path._updateRequest&&(d.Path._updateRequest=d.Util.requestAnimFrame(this._fireMapMoveEnd,this._map))},_fireMapMoveEnd:function(){d.Path._updateRequest=null,this.fire("moveend")},_initElements:function(){this._map._initPathRoot(),this._ctx=this._map._canvasCtx},_updateStyle:function(){var a=this.options;a.stroke&&(this._ctx.lineWidth=a.weight,this._ctx.strokeStyle=a.color),a.fill&&(this._ctx.fillStyle=a.fillColor||a.color)},_drawPath:function(){var a,b,c,e,f,g;for(this._ctx.beginPath(),a=0,c=this._parts.length;c>a;a++){for(b=0,e=this._parts[a].length;e>b;b++)f=this._parts[a][b],g=(0===b?"move":"line")+"To",this._ctx[g](f.x,f.y);this instanceof d.Polygon&&this._ctx.closePath()}},_checkIfEmpty:function(){return!this._parts.length},_updatePath:function(){if(!this._checkIfEmpty()){var a=this._ctx,b=this.options;this._drawPath(),a.save(),this._updateStyle(),b.fill&&(a.globalAlpha=b.fillOpacity,a.fill()),b.stroke&&(a.globalAlpha=b.opacity,a.stroke()),a.restore()}},_initEvents:function(){this.options.clickable&&this._map.on("click",this._onClick,this)},_onClick:function(a){this._containsPoint(a.layerPoint)&&this.fire("click",{latlng:a.latlng,layerPoint:a.layerPoint,containerPoint:a.containerPoint,originalEvent:a})}}),d.Map.include(d.Path.SVG&&!a.L_PREFER_CANVAS||!d.Browser.canvas?{}:{_initPathRoot:function(){var a,c=this._pathRoot;c||(c=this._pathRoot=b.createElement("canvas"),c.style.position="absolute",a=this._canvasCtx=c.getContext("2d"),a.lineCap="round",a.lineJoin="round",this._panes.overlayPane.appendChild(c),this.options.zoomAnimation&&(this._pathRoot.className="leaflet-zoom-animated",this.on("zoomanim",this._animatePathZoom),this.on("zoomend",this._endPathZoom)),this.on("moveend",this._updateCanvasViewport),this._updateCanvasViewport())},_updateCanvasViewport:function(){if(!this._pathZooming){this._updatePathViewport();var a=this._pathViewport,b=a.min,c=a.max.subtract(b),e=this._pathRoot;d.DomUtil.setPosition(e,b),e.width=c.x,e.height=c.y,e.getContext("2d").translate(-b.x,-b.y)}}}),d.LineUtil={simplify:function(a,b){if(!b||!a.length)return a.slice();var c=b*b;return a=this._reducePoints(a,c),a=this._simplifyDP(a,c)},pointToSegmentDistance:function(a,b,c){return Math.sqrt(this._sqClosestPointOnSegment(a,b,c,!0))},closestPointOnSegment:function(a,b,c){return this._sqClosestPointOnSegment(a,b,c)},_simplifyDP:function(a,b){var d=a.length,e=typeof Uint8Array!=c+""?Uint8Array:Array,f=new e(d);f[0]=f[d-1]=1,this._simplifyDPStep(a,f,b,0,d-1);var g,h=[];for(g=0;d>g;g++)f[g]&&h.push(a[g]);return h},_simplifyDPStep:function(a,b,c,d,e){var f,g,h,i=0;for(g=d+1;e-1>=g;g++)h=this._sqClosestPointOnSegment(a[g],a[d],a[e],!0),h>i&&(f=g,i=h);i>c&&(b[f]=1,this._simplifyDPStep(a,b,c,d,f),this._simplifyDPStep(a,b,c,f,e))},_reducePoints:function(a,b){for(var c=[a[0]],d=1,e=0,f=a.length;f>d;d++)this._sqDist(a[d],a[e])>b&&(c.push(a[d]),e=d);return f-1>e&&c.push(a[f-1]),c},clipSegment:function(a,b,c,d){var e,f,g,h=d?this._lastCode:this._getBitCode(a,c),i=this._getBitCode(b,c);for(this._lastCode=i;;){if(!(h|i))return[a,b];if(h&i)return!1;e=h||i,f=this._getEdgeIntersection(a,b,e,c),g=this._getBitCode(f,c),e===h?(a=f,h=g):(b=f,i=g)}},_getEdgeIntersection:function(a,b,e,f){var g=b.x-a.x,h=b.y-a.y,i=f.min,j=f.max;return 8&e?new d.Point(a.x+g*(j.y-a.y)/h,j.y):4&e?new d.Point(a.x+g*(i.y-a.y)/h,i.y):2&e?new d.Point(j.x,a.y+h*(j.x-a.x)/g):1&e?new d.Point(i.x,a.y+h*(i.x-a.x)/g):c},_getBitCode:function(a,b){var c=0;return a.x<b.min.x?c|=1:a.x>b.max.x&&(c|=2),a.y<b.min.y?c|=4:a.y>b.max.y&&(c|=8),c},_sqDist:function(a,b){var c=b.x-a.x,d=b.y-a.y;return c*c+d*d},_sqClosestPointOnSegment:function(a,b,c,e){var f,g=b.x,h=b.y,i=c.x-g,j=c.y-h,k=i*i+j*j;return k>0&&(f=((a.x-g)*i+(a.y-h)*j)/k,f>1?(g=c.x,h=c.y):f>0&&(g+=i*f,h+=j*f)),i=a.x-g,j=a.y-h,e?i*i+j*j:new d.Point(g,h)}},d.Polyline=d.Path.extend({initialize:function(a,b){d.Path.prototype.initialize.call(this,b),this._latlngs=this._convertLatLngs(a)},options:{smoothFactor:1,noClip:!1},projectLatlngs:function(){this._originalPoints=[];for(var a=0,b=this._latlngs.length;b>a;a++)this._originalPoints[a]=this._map.latLngToLayerPoint(this._latlngs[a])},getPathString:function(){for(var a=0,b=this._parts.length,c="";b>a;a++)c+=this._getPathPartStr(this._parts[a]);return c},getLatLngs:function(){return this._latlngs},setLatLngs:function(a){return this._latlngs=this._convertLatLngs(a),this.redraw()},addLatLng:function(a){return this._latlngs.push(d.latLng(a)),this.redraw()},spliceLatLngs:function(){var a=[].splice.apply(this._latlngs,arguments);return this._convertLatLngs(this._latlngs),this.redraw(),a},closestLayerPoint:function(a){for(var b,c,e=1/0,f=this._parts,g=null,h=0,i=f.length;i>h;h++)for(var j=f[h],k=1,l=j.length;l>k;k++){b=j[k-1],c=j[k];var m=d.LineUtil._sqClosestPointOnSegment(a,b,c,!0);e>m&&(e=m,g=d.LineUtil._sqClosestPointOnSegment(a,b,c))}return g&&(g.distance=Math.sqrt(e)),g},getBounds:function(){var a,b,c=new d.LatLngBounds,e=this.getLatLngs();for(a=0,b=e.length;b>a;a++)c.extend(e[a]);return c},_convertLatLngs:function(a){var b,c;for(b=0,c=a.length;c>b;b++){if(d.Util.isArray(a[b])&&"number"!=typeof a[b][0])return;a[b]=d.latLng(a[b])}return a},_initEvents:function(){d.Path.prototype._initEvents.call(this)},_getPathPartStr:function(a){for(var b,c=d.Path.VML,e=0,f=a.length,g="";f>e;e++)b=a[e],c&&b._round(),g+=(e?"L":"M")+b.x+" "+b.y;return g},_clipPoints:function(){var a,b,e,f=this._originalPoints,g=f.length;if(this.options.noClip)return this._parts=[f],c;this._parts=[];var h=this._parts,i=this._map._pathViewport,j=d.LineUtil;for(a=0,b=0;g-1>a;a++)e=j.clipSegment(f[a],f[a+1],i,a),e&&(h[b]=h[b]||[],h[b].push(e[0]),(e[1]!==f[a+1]||a===g-2)&&(h[b].push(e[1]),b++))},_simplifyPoints:function(){for(var a=this._parts,b=d.LineUtil,c=0,e=a.length;e>c;c++)a[c]=b.simplify(a[c],this.options.smoothFactor)},_updatePath:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),d.Path.prototype._updatePath.call(this))}}),d.polyline=function(a,b){return new d.Polyline(a,b)},d.PolyUtil={},d.PolyUtil.clipPolygon=function(a,b){var c,e,f,g,h,i,j,k,l,m=[1,4,2,8],n=d.LineUtil;for(e=0,j=a.length;j>e;e++)a[e]._code=n._getBitCode(a[e],b);for(g=0;4>g;g++){for(k=m[g],c=[],e=0,j=a.length,f=j-1;j>e;f=e++)h=a[e],i=a[f],h._code&k?i._code&k||(l=n._getEdgeIntersection(i,h,k,b),l._code=n._getBitCode(l,b),c.push(l)):(i._code&k&&(l=n._getEdgeIntersection(i,h,k,b),l._code=n._getBitCode(l,b),c.push(l)),c.push(h));a=c}return a},d.Polygon=d.Polyline.extend({options:{fill:!0},initialize:function(a,b){d.Polyline.prototype.initialize.call(this,a,b),a&&d.Util.isArray(a[0])&&"number"!=typeof a[0][0]&&(this._latlngs=this._convertLatLngs(a[0]),this._holes=a.slice(1))},projectLatlngs:function(){if(d.Polyline.prototype.projectLatlngs.call(this),this._holePoints=[],this._holes){var a,b,c,e;for(a=0,c=this._holes.length;c>a;a++)for(this._holePoints[a]=[],b=0,e=this._holes[a].length;e>b;b++)this._holePoints[a][b]=this._map.latLngToLayerPoint(this._holes[a][b])}},_clipPoints:function(){var a=this._originalPoints,b=[];if(this._parts=[a].concat(this._holePoints),!this.options.noClip){for(var c=0,e=this._parts.length;e>c;c++){var f=d.PolyUtil.clipPolygon(this._parts[c],this._map._pathViewport);f.length&&b.push(f)}this._parts=b}},_getPathPartStr:function(a){var b=d.Polyline.prototype._getPathPartStr.call(this,a);return b+(d.Browser.svg?"z":"x")}}),d.polygon=function(a,b){return new d.Polygon(a,b)},function(){function a(a){return d.FeatureGroup.extend({initialize:function(a,b){this._layers={},this._options=b,this.setLatLngs(a)},setLatLngs:function(b){var c=0,d=b.length;for(this.eachLayer(function(a){d>c?a.setLatLngs(b[c++]):this.removeLayer(a)},this);d>c;)this.addLayer(new a(b[c++],this._options));return this}})}d.MultiPolyline=a(d.Polyline),d.MultiPolygon=a(d.Polygon),d.multiPolyline=function(a,b){return new d.MultiPolyline(a,b)},d.multiPolygon=function(a,b){return new d.MultiPolygon(a,b)}}(),d.Rectangle=d.Polygon.extend({initialize:function(a,b){d.Polygon.prototype.initialize.call(this,this._boundsToLatLngs(a),b)},setBounds:function(a){this.setLatLngs(this._boundsToLatLngs(a))},_boundsToLatLngs:function(a){return a=d.latLngBounds(a),[a.getSouthWest(),a.getNorthWest(),a.getNorthEast(),a.getSouthEast()]}}),d.rectangle=function(a,b){return new d.Rectangle(a,b)},d.Circle=d.Path.extend({initialize:function(a,b,c){d.Path.prototype.initialize.call(this,c),this._latlng=d.latLng(a),this._mRadius=b},options:{fill:!0},setLatLng:function(a){return this._latlng=d.latLng(a),this.redraw()},setRadius:function(a){return this._mRadius=a,this.redraw()},projectLatlngs:function(){var a=this._getLngRadius(),b=new d.LatLng(this._latlng.lat,this._latlng.lng-a),c=this._map.latLngToLayerPoint(b);this._point=this._map.latLngToLayerPoint(this._latlng),this._radius=Math.max(Math.round(this._point.x-c.x),1)},getBounds:function(){var a=this._getLngRadius(),b=360*(this._mRadius/40075017),c=this._latlng,e=new d.LatLng(c.lat-b,c.lng-a),f=new d.LatLng(c.lat+b,c.lng+a);return new d.LatLngBounds(e,f)},getLatLng:function(){return this._latlng},getPathString:function(){var a=this._point,b=this._radius;return this._checkIfEmpty()?"":d.Browser.svg?"M"+a.x+","+(a.y-b)+"A"+b+","+b+",0,1,1,"+(a.x-.1)+","+(a.y-b)+" z":(a._round(),b=Math.round(b),"AL "+a.x+","+a.y+" "+b+","+b+" 0,"+23592600)},getRadius:function(){return this._mRadius},_getLatRadius:function(){return 360*(this._mRadius/40075017)},_getLngRadius:function(){return this._getLatRadius()/Math.cos(d.LatLng.DEG_TO_RAD*this._latlng.lat)},_checkIfEmpty:function(){if(!this._map)return!1;var a=this._map._pathViewport,b=this._radius,c=this._point;return c.x-b>a.max.x||c.y-b>a.max.y||c.x+b<a.min.x||c.y+b<a.min.y}}),d.circle=function(a,b,c){return new d.Circle(a,b,c)},d.CircleMarker=d.Circle.extend({options:{radius:10,weight:2},initialize:function(a,b){d.Circle.prototype.initialize.call(this,a,null,b),this._radius=this.options.radius},projectLatlngs:function(){this._point=this._map.latLngToLayerPoint(this._latlng)},_updateStyle:function(){d.Circle.prototype._updateStyle.call(this),this.setRadius(this.options.radius)},setRadius:function(a){return this.options.radius=this._radius=a,this.redraw()}}),d.circleMarker=function(a,b){return new d.CircleMarker(a,b)},d.Polyline.include(d.Path.CANVAS?{_containsPoint:function(a,b){var c,e,f,g,h,i,j,k=this.options.weight/2;for(d.Browser.touch&&(k+=10),c=0,g=this._parts.length;g>c;c++)for(j=this._parts[c],e=0,h=j.length,f=h-1;h>e;f=e++)if((b||0!==e)&&(i=d.LineUtil.pointToSegmentDistance(a,j[f],j[e]),k>=i))return!0;return!1}}:{}),d.Polygon.include(d.Path.CANVAS?{_containsPoint:function(a){var b,c,e,f,g,h,i,j,k=!1;if(d.Polyline.prototype._containsPoint.call(this,a,!0))return!0;for(f=0,i=this._parts.length;i>f;f++)for(b=this._parts[f],g=0,j=b.length,h=j-1;j>g;h=g++)c=b[g],e=b[h],c.y>a.y!=e.y>a.y&&a.x<(e.x-c.x)*(a.y-c.y)/(e.y-c.y)+c.x&&(k=!k);return k}}:{}),d.Circle.include(d.Path.CANVAS?{_drawPath:function(){var a=this._point;this._ctx.beginPath(),this._ctx.arc(a.x,a.y,this._radius,0,2*Math.PI,!1)},_containsPoint:function(a){var b=this._point,c=this.options.stroke?this.options.weight/2:0;return a.distanceTo(b)<=this._radius+c}}:{}),d.GeoJSON=d.FeatureGroup.extend({initialize:function(a,b){d.setOptions(this,b),this._layers={},a&&this.addData(a)},addData:function(a){var b,c,e=d.Util.isArray(a)?a:a.features;if(e){for(b=0,c=e.length;c>b;b++)(e[b].geometries||e[b].geometry||e[b].features)&&this.addData(e[b]);return this}var f=this.options;if(!f.filter||f.filter(a)){var g=d.GeoJSON.geometryToLayer(a,f.pointToLayer);return g.feature=a,g.defaultOptions=g.options,this.resetStyle(g),f.onEachFeature&&f.onEachFeature(a,g),this.addLayer(g)}},resetStyle:function(a){var b=this.options.style;b&&(d.Util.extend(a.options,a.defaultOptions),this._setLayerStyle(a,b))},setStyle:function(a){this.eachLayer(function(b){this._setLayerStyle(b,a)},this)},_setLayerStyle:function(a,b){"function"==typeof b&&(b=b(a.feature)),a.setStyle&&a.setStyle(b)}}),d.extend(d.GeoJSON,{geometryToLayer:function(a,b){var c,e,f,g,h,i="Feature"===a.type?a.geometry:a,j=i.coordinates,k=[];switch(i.type){case"Point":return c=this.coordsToLatLng(j),b?b(a,c):new d.Marker(c);case"MultiPoint":for(f=0,g=j.length;g>f;f++)c=this.coordsToLatLng(j[f]),h=b?b(a,c):new d.Marker(c),k.push(h);return new d.FeatureGroup(k);case"LineString":return e=this.coordsToLatLngs(j),new d.Polyline(e);case"Polygon":return e=this.coordsToLatLngs(j,1),new d.Polygon(e);case"MultiLineString":return e=this.coordsToLatLngs(j,1),new d.MultiPolyline(e);case"MultiPolygon":return e=this.coordsToLatLngs(j,2),new d.MultiPolygon(e);case"GeometryCollection":for(f=0,g=i.geometries.length;g>f;f++)h=this.geometryToLayer({geometry:i.geometries[f],type:"Feature",properties:a.properties},b),k.push(h);return new d.FeatureGroup(k);default:throw Error("Invalid GeoJSON object.")}},coordsToLatLng:function(a,b){var c=parseFloat(a[b?0:1]),e=parseFloat(a[b?1:0]);return new d.LatLng(c,e)},coordsToLatLngs:function(a,b,c){var d,e,f,g=[];for(e=0,f=a.length;f>e;e++)d=b?this.coordsToLatLngs(a[e],b-1,c):this.coordsToLatLng(a[e],c),g.push(d);return g}}),d.geoJson=function(a,b){return new d.GeoJSON(a,b)},d.DomEvent={addListener:function(a,b,e,f){var g,h,i,j=d.stamp(e),k="_leaflet_"+b+j;return a[k]?this:(g=function(b){return e.call(f||a,b||d.DomEvent._getEvent())},d.Browser.msTouch&&0===b.indexOf("touch")?this.addMsTouchListener(a,b,g,j):(d.Browser.touch&&"dblclick"===b&&this.addDoubleTapListener&&this.addDoubleTapListener(a,g,j),"addEventListener"in a?"mousewheel"===b?(a.addEventListener("DOMMouseScroll",g,!1),a.addEventListener(b,g,!1)):"mouseenter"===b||"mouseleave"===b?(h=g,i="mouseenter"===b?"mouseover":"mouseout",g=function(b){return d.DomEvent._checkMouse(a,b)?h(b):c},a.addEventListener(i,g,!1)):a.addEventListener(b,g,!1):"attachEvent"in a&&a.attachEvent("on"+b,g),a[k]=g,this))},removeListener:function(a,b,c){var e=d.stamp(c),f="_leaflet_"+b+e,g=a[f];return g?(d.Browser.msTouch&&0===b.indexOf("touch")?this.removeMsTouchListener(a,b,e):d.Browser.touch&&"dblclick"===b&&this.removeDoubleTapListener?this.removeDoubleTapListener(a,e):"removeEventListener"in a?"mousewheel"===b?(a.removeEventListener("DOMMouseScroll",g,!1),a.removeEventListener(b,g,!1)):"mouseenter"===b||"mouseleave"===b?a.removeEventListener("mouseenter"===b?"mouseover":"mouseout",g,!1):a.removeEventListener(b,g,!1):"detachEvent"in a&&a.detachEvent("on"+b,g),a[f]=null,this):void 0},stopPropagation:function(a){return a.stopPropagation?a.stopPropagation():a.cancelBubble=!0,this},disableClickPropagation:function(a){for(var b=d.DomEvent.stopPropagation,c=d.Draggable.START.length-1;c>=0;c--)d.DomEvent.addListener(a,d.Draggable.START[c],b);return d.DomEvent.addListener(a,"click",b).addListener(a,"dblclick",b)},preventDefault:function(a){return a.preventDefault?a.preventDefault():a.returnValue=!1,this},stop:function(a){return d.DomEvent.preventDefault(a).stopPropagation(a)},getMousePosition:function(a,c){var e=b.body,f=b.documentElement,g=a.pageX?a.pageX:a.clientX+e.scrollLeft+f.scrollLeft,h=a.pageY?a.pageY:a.clientY+e.scrollTop+f.scrollTop,i=new d.Point(g,h);return c?i._subtract(d.DomUtil.getViewportOffset(c)):i},getWheelDelta:function(a){var b=0;return a.wheelDelta&&(b=a.wheelDelta/120),a.detail&&(b=-a.detail/3),b},_checkMouse:function(a,b){var c=b.relatedTarget;if(!c)return!0;try{for(;c&&c!==a;)c=c.parentNode}catch(d){return!1}return c!==a},_getEvent:function(){var b=a.event;if(!b)for(var c=arguments.callee.caller;c&&(b=c.arguments[0],!b||a.Event!==b.constructor);)c=c.caller;return b}},d.DomEvent.on=d.DomEvent.addListener,d.DomEvent.off=d.DomEvent.removeListener,d.Draggable=d.Class.extend({includes:d.Mixin.Events,statics:{START:d.Browser.touch?["touchstart","mousedown"]:["mousedown"],END:{mousedown:"mouseup",touchstart:"touchend",MSPointerDown:"touchend"},MOVE:{mousedown:"mousemove",touchstart:"touchmove",MSPointerDown:"touchmove"},TAP_TOLERANCE:15},initialize:function(a,b,c){this._element=a,this._dragStartTarget=b||a,this._longPress=c&&!d.Browser.msTouch},enable:function(){if(!this._enabled){for(var a=d.Draggable.START.length-1;a>=0;a--)d.DomEvent.on(this._dragStartTarget,d.Draggable.START[a],this._onDown,this);this._enabled=!0}},disable:function(){if(this._enabled){for(var a=d.Draggable.START.length-1;a>=0;a--)d.DomEvent.off(this._dragStartTarget,d.Draggable.START[a],this._onDown,this);this._enabled=!1,this._moved=!1}},_onDown:function(a){if(!(!d.Browser.touch&&a.shiftKey||1!==a.which&&1!==a.button&&!a.touches||(d.DomEvent.preventDefault(a),d.DomEvent.stopPropagation(a),d.Draggable._disabled))){if(this._simulateClick=!0,a.touches&&a.touches.length>1)return this._simulateClick=!1,clearTimeout(this._longPressTimeout),c;var e=a.touches&&1===a.touches.length?a.touches[0]:a,f=e.target;d.Browser.touch&&"a"===f.tagName.toLowerCase()&&d.DomUtil.addClass(f,"leaflet-active"),this._moved=!1,this._moving||(this._startPoint=new d.Point(e.clientX,e.clientY),this._startPos=this._newPos=d.DomUtil.getPosition(this._element),a.touches&&1===a.touches.length&&d.Browser.touch&&this._longPress&&(this._longPressTimeout=setTimeout(d.bind(function(){var a=this._newPos&&this._newPos.distanceTo(this._startPos)||0;d.Draggable.TAP_TOLERANCE>a&&(this._simulateClick=!1,this._onUp(),this._simulateEvent("contextmenu",e))},this),1e3)),d.DomEvent.on(b,d.Draggable.MOVE[a.type],this._onMove,this),d.DomEvent.on(b,d.Draggable.END[a.type],this._onUp,this))}},_onMove:function(a){if(!(a.touches&&a.touches.length>1)){var b=a.touches&&1===a.touches.length?a.touches[0]:a,c=new d.Point(b.clientX,b.clientY),e=c.subtract(this._startPoint);(e.x||e.y)&&(d.DomEvent.preventDefault(a),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=d.DomUtil.getPosition(this._element).subtract(e),d.Browser.touch||(d.DomUtil.disableTextSelection(),this._setMovingCursor())),this._newPos=this._startPos.add(e),this._moving=!0,d.Util.cancelAnimFrame(this._animRequest),this._animRequest=d.Util.requestAnimFrame(this._updatePosition,this,!0,this._dragStartTarget))}},_updatePosition:function(){this.fire("predrag"),d.DomUtil.setPosition(this._element,this._newPos),this.fire("drag")},_onUp:function(a){var c;if(clearTimeout(this._longPressTimeout),this._simulateClick&&a.changedTouches){var e=a.changedTouches[0],f=e.target,g=this._newPos&&this._newPos.distanceTo(this._startPos)||0;"a"===f.tagName.toLowerCase()&&d.DomUtil.removeClass(f,"leaflet-active"),d.Draggable.TAP_TOLERANCE>g&&(c=e)}d.Browser.touch||(d.DomUtil.enableTextSelection(),this._restoreCursor());for(var h in d.Draggable.MOVE)d.Draggable.MOVE.hasOwnProperty(h)&&(d.DomEvent.off(b,d.Draggable.MOVE[h],this._onMove),d.DomEvent.off(b,d.Draggable.END[h],this._onUp));this._moved&&(d.Util.cancelAnimFrame(this._animRequest),this.fire("dragend")),this._moving=!1,c&&(this._moved=!1,this._simulateEvent("click",c))},_setMovingCursor:function(){d.DomUtil.addClass(b.body,"leaflet-dragging")},_restoreCursor:function(){d.DomUtil.removeClass(b.body,"leaflet-dragging")},_simulateEvent:function(c,d){var e=b.createEvent("MouseEvents");e.initMouseEvent(c,!0,!0,a,1,d.screenX,d.screenY,d.clientX,d.clientY,!1,!1,!1,!1,0,null),d.target.dispatchEvent(e)}}),d.Handler=d.Class.extend({initialize:function(a){this._map=a},enable:function(){this._enabled||(this._enabled=!0,this.addHooks())},disable:function(){this._enabled&&(this._enabled=!1,this.removeHooks())},enabled:function(){return!!this._enabled}}),d.Map.mergeOptions({dragging:!0,inertia:!d.Browser.android23,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,inertiaThreshold:d.Browser.touch?32:18,easeLinearity:.25,longPress:!0,worldCopyJump:!1}),d.Map.Drag=d.Handler.extend({addHooks:function(){if(!this._draggable){var a=this._map;this._draggable=new d.Draggable(a._mapPane,a._container,a.options.longPress),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),a.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDrag,this),a.on("viewreset",this._onViewReset,this))}this._draggable.enable()},removeHooks:function(){this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){var a=this._map;a._panAnim&&a._panAnim.stop(),a.fire("movestart").fire("dragstart"),a.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(){if(this._map.options.inertia){var a=this._lastTime=+new Date,b=this._lastPos=this._draggable._newPos;this._positions.push(b),this._times.push(a),a-this._times[0]>200&&(this._positions.shift(),this._times.shift())}this._map.fire("move").fire("drag")},_onViewReset:function(){var a=this._map.getSize()._divideBy(2),b=this._map.latLngToLayerPoint(new d.LatLng(0,0));this._initialWorldOffset=b.subtract(a).x,this._worldWidth=this._map.project(new d.LatLng(0,180)).x},_onPreDrag:function(){var a=this._worldWidth,b=Math.round(a/2),c=this._initialWorldOffset,d=this._draggable._newPos.x,e=(d-b+c)%a+b-c,f=(d+b+c)%a-b-c,g=Math.abs(e+c)<Math.abs(f+c)?e:f;this._draggable._newPos.x=g},_onDragEnd:function(){var a=this._map,b=a.options,c=+new Date-this._lastTime,e=!b.inertia||c>b.inertiaThreshold||!this._positions[0];if(e)a.fire("moveend");else{var f=this._lastPos.subtract(this._positions[0]),g=(this._lastTime+c-this._times[0])/1e3,h=b.easeLinearity,i=f.multiplyBy(h/g),j=i.distanceTo(new d.Point(0,0)),k=Math.min(b.inertiaMaxSpeed,j),l=i.multiplyBy(k/j),m=k/(b.inertiaDeceleration*h),n=l.multiplyBy(-m/2).round();d.Util.requestAnimFrame(function(){a.panBy(n,m,h)})}a.fire("dragend"),b.maxBounds&&d.Util.requestAnimFrame(this._panInsideMaxBounds,a,!0,a._container)},_panInsideMaxBounds:function(){this.panInsideBounds(this.options.maxBounds)}}),d.Map.addInitHook("addHandler","dragging",d.Map.Drag),d.Map.mergeOptions({doubleClickZoom:!0}),d.Map.DoubleClickZoom=d.Handler.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick)},_onDoubleClick:function(a){this.setView(a.latlng,this._zoom+1)}}),d.Map.addInitHook("addHandler","doubleClickZoom",d.Map.DoubleClickZoom),d.Map.mergeOptions({scrollWheelZoom:!0}),d.Map.ScrollWheelZoom=d.Handler.extend({addHooks:function(){d.DomEvent.on(this._map._container,"mousewheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){d.DomEvent.off(this._map._container,"mousewheel",this._onWheelScroll)},_onWheelScroll:function(a){var b=d.DomEvent.getWheelDelta(a);this._delta+=b,this._lastMousePos=this._map.mouseEventToContainerPoint(a),this._startTime||(this._startTime=+new Date);var c=Math.max(40-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(d.bind(this._performZoom,this),c),d.DomEvent.preventDefault(a),d.DomEvent.stopPropagation(a)},_performZoom:function(){var a=this._map,b=this._delta,c=a.getZoom();if(b=b>0?Math.ceil(b):Math.round(b),b=Math.max(Math.min(b,4),-4),b=a._limitZoom(c+b)-c,this._delta=0,this._startTime=null,b){var d=c+b,e=this._getCenterForScrollWheelZoom(d);a.setView(e,d)}},_getCenterForScrollWheelZoom:function(a){var b=this._map,c=b.getZoomScale(a),d=b.getSize()._divideBy(2),e=this._lastMousePos._subtract(d)._multiplyBy(1-1/c),f=b._getTopLeftPoint()._add(d)._add(e);return b.unproject(f)}}),d.Map.addInitHook("addHandler","scrollWheelZoom",d.Map.ScrollWheelZoom),d.extend(d.DomEvent,{_touchstart:d.Browser.msTouch?"MSPointerDown":"touchstart",_touchend:d.Browser.msTouch?"MSPointerUp":"touchend",addDoubleTapListener:function(a,c,e){function f(a){var b;if(d.Browser.msTouch?(o.push(a.pointerId),b=o.length):b=a.touches.length,!(b>1)){var c=Date.now(),e=c-(h||c);i=a.touches?a.touches[0]:a,j=e>0&&k>=e,h=c}}function g(a){if(d.Browser.msTouch){var b=o.indexOf(a.pointerId);if(-1===b)return;o.splice(b,1)}if(j){if(d.Browser.msTouch){var e,f={};for(var g in i)e=i[g],f[g]="function"==typeof e?e.bind(i):e;i=f}i.type="dblclick",c(i),h=null}}var h,i,j=!1,k=250,l="_leaflet_",m=this._touchstart,n=this._touchend,o=[];a[l+m+e]=f,a[l+n+e]=g;var p=d.Browser.msTouch?b.documentElement:a;return a.addEventListener(m,f,!1),p.addEventListener(n,g,!1),d.Browser.msTouch&&p.addEventListener("MSPointerCancel",g,!1),this},removeDoubleTapListener:function(a,c){var e="_leaflet_";return a.removeEventListener(this._touchstart,a[e+this._touchstart+c],!1),(d.Browser.msTouch?b.documentElement:a).removeEventListener(this._touchend,a[e+this._touchend+c],!1),d.Browser.msTouch&&b.documentElement.removeEventListener("MSPointerCancel",a[e+this._touchend+c],!1),this}}),d.extend(d.DomEvent,{_msTouches:[],_msDocumentListener:!1,addMsTouchListener:function(a,b,c,d){switch(b){case"touchstart":return this.addMsTouchListenerStart(a,b,c,d);case"touchend":return this.addMsTouchListenerEnd(a,b,c,d);case"touchmove":return this.addMsTouchListenerMove(a,b,c,d);default:throw"Unknown touch event type"}},addMsTouchListenerStart:function(a,c,d,e){var f="_leaflet_",g=this._msTouches,h=function(a){for(var b=!1,c=0;g.length>c;c++)if(g[c].pointerId===a.pointerId){b=!0;break}b||g.push(a),a.touches=g.slice(),a.changedTouches=[a],d(a)};if(a[f+"touchstart"+e]=h,a.addEventListener("MSPointerDown",h,!1),!this._msDocumentListener){var i=function(a){for(var b=0;g.length>b;b++)if(g[b].pointerId===a.pointerId){g.splice(b,1);break}};b.documentElement.addEventListener("MSPointerUp",i,!1),b.documentElement.addEventListener("MSPointerCancel",i,!1),this._msDocumentListener=!0}return this},addMsTouchListenerMove:function(a,b,c,d){function e(a){if(a.pointerType!==a.MSPOINTER_TYPE_MOUSE||0!==a.buttons){for(var b=0;g.length>b;b++)if(g[b].pointerId===a.pointerId){g[b]=a;break}a.touches=g.slice(),a.changedTouches=[a],c(a)}}var f="_leaflet_",g=this._msTouches;return a[f+"touchmove"+d]=e,a.addEventListener("MSPointerMove",e,!1),this},addMsTouchListenerEnd:function(a,b,c,d){var e="_leaflet_",f=this._msTouches,g=function(a){for(var b=0;f.length>b;b++)if(f[b].pointerId===a.pointerId){f.splice(b,1);break}a.touches=f.slice(),a.changedTouches=[a],c(a)};return a[e+"touchend"+d]=g,a.addEventListener("MSPointerUp",g,!1),a.addEventListener("MSPointerCancel",g,!1),this},removeMsTouchListener:function(a,b,c){var d="_leaflet_",e=a[d+b+c];switch(b){case"touchstart":a.removeEventListener("MSPointerDown",e,!1);break;case"touchmove":a.removeEventListener("MSPointerMove",e,!1);break;case"touchend":a.removeEventListener("MSPointerUp",e,!1),a.removeEventListener("MSPointerCancel",e,!1)}return this}}),d.Map.mergeOptions({touchZoom:d.Browser.touch&&!d.Browser.android23}),d.Map.TouchZoom=d.Handler.extend({addHooks:function(){d.DomEvent.on(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){d.DomEvent.off(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(a){var c=this._map;if(a.touches&&2===a.touches.length&&!c._animatingZoom&&!this._zooming){var e=c.mouseEventToLayerPoint(a.touches[0]),f=c.mouseEventToLayerPoint(a.touches[1]),g=c._getCenterLayerPoint();this._startCenter=e.add(f)._divideBy(2),this._startDist=e.distanceTo(f),this._moved=!1,this._zooming=!0,this._centerOffset=g.subtract(this._startCenter),c._panAnim&&c._panAnim.stop(),d.DomEvent.on(b,"touchmove",this._onTouchMove,this).on(b,"touchend",this._onTouchEnd,this),d.DomEvent.preventDefault(a)}},_onTouchMove:function(a){if(a.touches&&2===a.touches.length){var b=this._map,c=b.mouseEventToLayerPoint(a.touches[0]),e=b.mouseEventToLayerPoint(a.touches[1]);this._scale=c.distanceTo(e)/this._startDist,this._delta=c._add(e)._divideBy(2)._subtract(this._startCenter),1!==this._scale&&(this._moved||(d.DomUtil.addClass(b._mapPane,"leaflet-zoom-anim leaflet-touching"),b.fire("movestart").fire("zoomstart")._prepareTileBg(),this._moved=!0),d.Util.cancelAnimFrame(this._animRequest),this._animRequest=d.Util.requestAnimFrame(this._updateOnMove,this,!0,this._map._container),d.DomEvent.preventDefault(a))}},_updateOnMove:function(){var a=this._map,b=this._getScaleOrigin(),c=a.layerPointToLatLng(b);a.fire("zoomanim",{center:c,zoom:a.getScaleZoom(this._scale)}),a._tileBg.style[d.DomUtil.TRANSFORM]=d.DomUtil.getTranslateString(this._delta)+" "+d.DomUtil.getScaleString(this._scale,this._startCenter)},_onTouchEnd:function(){if(this._moved&&this._zooming){var a=this._map;this._zooming=!1,d.DomUtil.removeClass(a._mapPane,"leaflet-touching"),d.DomEvent.off(b,"touchmove",this._onTouchMove).off(b,"touchend",this._onTouchEnd);var c=this._getScaleOrigin(),e=a.layerPointToLatLng(c),f=a.getZoom(),g=a.getScaleZoom(this._scale)-f,h=g>0?Math.ceil(g):Math.floor(g),i=a._limitZoom(f+h);a.fire("zoomanim",{center:e,zoom:i}),a._runAnimation(e,i,a.getZoomScale(i)/this._scale,c,!0)}},_getScaleOrigin:function(){var a=this._centerOffset.subtract(this._delta).divideBy(this._scale);return this._startCenter.add(a)}}),d.Map.addInitHook("addHandler","touchZoom",d.Map.TouchZoom),d.Map.mergeOptions({boxZoom:!0}),d.Map.BoxZoom=d.Handler.extend({initialize:function(a){this._map=a,this._container=a._container,this._pane=a._panes.overlayPane},addHooks:function(){d.DomEvent.on(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){d.DomEvent.off(this._container,"mousedown",this._onMouseDown)},_onMouseDown:function(a){return!a.shiftKey||1!==a.which&&1!==a.button?!1:(d.DomUtil.disableTextSelection(),this._startLayerPoint=this._map.mouseEventToLayerPoint(a),this._box=d.DomUtil.create("div","leaflet-zoom-box",this._pane),d.DomUtil.setPosition(this._box,this._startLayerPoint),this._container.style.cursor="crosshair",d.DomEvent.on(b,"mousemove",this._onMouseMove,this).on(b,"mouseup",this._onMouseUp,this).preventDefault(a),this._map.fire("boxzoomstart"),c)},_onMouseMove:function(a){var b=this._startLayerPoint,c=this._box,e=this._map.mouseEventToLayerPoint(a),f=e.subtract(b),g=new d.Point(Math.min(e.x,b.x),Math.min(e.y,b.y));d.DomUtil.setPosition(c,g),c.style.width=Math.max(0,Math.abs(f.x)-4)+"px",c.style.height=Math.max(0,Math.abs(f.y)-4)+"px"},_onMouseUp:function(a){this._pane.removeChild(this._box),this._container.style.cursor="",d.DomUtil.enableTextSelection(),d.DomEvent.off(b,"mousemove",this._onMouseMove).off(b,"mouseup",this._onMouseUp);var c=this._map,e=c.mouseEventToLayerPoint(a);if(!this._startLayerPoint.equals(e)){var f=new d.LatLngBounds(c.layerPointToLatLng(this._startLayerPoint),c.layerPointToLatLng(e));c.fitBounds(f),c.fire("boxzoomend",{boxZoomBounds:f})}}}),d.Map.addInitHook("addHandler","boxZoom",d.Map.BoxZoom),d.Map.mergeOptions({keyboard:!0,keyboardPanOffset:80,keyboardZoomOffset:1}),d.Map.Keyboard=d.Handler.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61],zoomOut:[189,109,173]},initialize:function(a){this._map=a,this._setPanOffset(a.options.keyboardPanOffset),this._setZoomOffset(a.options.keyboardZoomOffset)},addHooks:function(){var a=this._map._container;-1===a.tabIndex&&(a.tabIndex="0"),d.DomEvent.on(a,"focus",this._onFocus,this).on(a,"blur",this._onBlur,this).on(a,"mousedown",this._onMouseDown,this),this._map.on("focus",this._addHooks,this).on("blur",this._removeHooks,this)},removeHooks:function(){this._removeHooks();var a=this._map._container;d.DomEvent.off(a,"focus",this._onFocus,this).off(a,"blur",this._onBlur,this).off(a,"mousedown",this._onMouseDown,this),this._map.off("focus",this._addHooks,this).off("blur",this._removeHooks,this)},_onMouseDown:function(){this._focused||this._map._container.focus()},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanOffset:function(a){var b,c,d=this._panKeys={},e=this.keyCodes;for(b=0,c=e.left.length;c>b;b++)d[e.left[b]]=[-1*a,0];for(b=0,c=e.right.length;c>b;b++)d[e.right[b]]=[a,0];for(b=0,c=e.down.length;c>b;b++)d[e.down[b]]=[0,a];for(b=0,c=e.up.length;c>b;b++)d[e.up[b]]=[0,-1*a]},_setZoomOffset:function(a){var b,c,d=this._zoomKeys={},e=this.keyCodes;for(b=0,c=e.zoomIn.length;c>b;b++)d[e.zoomIn[b]]=a;
for(b=0,c=e.zoomOut.length;c>b;b++)d[e.zoomOut[b]]=-a},_addHooks:function(){d.DomEvent.on(b,"keydown",this._onKeyDown,this)},_removeHooks:function(){d.DomEvent.off(b,"keydown",this._onKeyDown,this)},_onKeyDown:function(a){var b=a.keyCode,c=this._map;if(this._panKeys.hasOwnProperty(b))c.panBy(this._panKeys[b]),c.options.maxBounds&&c.panInsideBounds(c.options.maxBounds);else{if(!this._zoomKeys.hasOwnProperty(b))return;c.setZoom(c.getZoom()+this._zoomKeys[b])}d.DomEvent.stop(a)}}),d.Map.addInitHook("addHandler","keyboard",d.Map.Keyboard),d.Handler.MarkerDrag=d.Handler.extend({initialize:function(a){this._marker=a},addHooks:function(){var a=this._marker._icon;this._draggable||(this._draggable=new d.Draggable(a,a).on("dragstart",this._onDragStart,this).on("drag",this._onDrag,this).on("dragend",this._onDragEnd,this)),this._draggable.enable()},removeHooks:function(){this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){this._marker.closePopup().fire("movestart").fire("dragstart")},_onDrag:function(){var a=this._marker,b=a._shadow,c=d.DomUtil.getPosition(a._icon),e=a._map.layerPointToLatLng(c);b&&d.DomUtil.setPosition(b,c),a._latlng=e,a.fire("move",{latlng:e}).fire("drag")},_onDragEnd:function(){this._marker.fire("moveend").fire("dragend")}}),d.Handler.PolyEdit=d.Handler.extend({options:{icon:new d.DivIcon({iconSize:new d.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"})},initialize:function(a,b){this._poly=a,d.setOptions(this,b)},addHooks:function(){this._poly._map&&(this._markerGroup||this._initMarkers(),this._poly._map.addLayer(this._markerGroup))},removeHooks:function(){this._poly._map&&(this._poly._map.removeLayer(this._markerGroup),delete this._markerGroup,delete this._markers)},updateMarkers:function(){this._markerGroup.clearLayers(),this._initMarkers()},_initMarkers:function(){this._markerGroup||(this._markerGroup=new d.LayerGroup),this._markers=[];var a,b,c,e,f=this._poly._latlngs;for(a=0,c=f.length;c>a;a++)e=this._createMarker(f[a],a),e.on("click",this._onMarkerClick,this),this._markers.push(e);var g,h;for(a=0,b=c-1;c>a;b=a++)(0!==a||d.Polygon&&this._poly instanceof d.Polygon)&&(g=this._markers[b],h=this._markers[a],this._createMiddleMarker(g,h),this._updatePrevNext(g,h))},_createMarker:function(a,b){var c=new d.Marker(a,{draggable:!0,icon:this.options.icon});return c._origLatLng=a,c._index=b,c.on("drag",this._onMarkerDrag,this),c.on("dragend",this._fireEdit,this),this._markerGroup.addLayer(c),c},_fireEdit:function(){this._poly.fire("edit")},_onMarkerDrag:function(a){var b=a.target;d.extend(b._origLatLng,b._latlng),b._middleLeft&&b._middleLeft.setLatLng(this._getMiddleLatLng(b._prev,b)),b._middleRight&&b._middleRight.setLatLng(this._getMiddleLatLng(b,b._next)),this._poly.redraw()},_onMarkerClick:function(a){if(!(3>this._poly._latlngs.length)){var b=a.target,c=b._index;this._markerGroup.removeLayer(b),this._markers.splice(c,1),this._poly.spliceLatLngs(c,1),this._updateIndexes(c,-1),this._updatePrevNext(b._prev,b._next),b._middleLeft&&this._markerGroup.removeLayer(b._middleLeft),b._middleRight&&this._markerGroup.removeLayer(b._middleRight),b._prev&&b._next?this._createMiddleMarker(b._prev,b._next):b._prev?b._next||(b._prev._middleRight=null):b._next._middleLeft=null,this._poly.fire("edit")}},_updateIndexes:function(a,b){this._markerGroup.eachLayer(function(c){c._index>a&&(c._index+=b)})},_createMiddleMarker:function(a,b){var c,d,e,f=this._getMiddleLatLng(a,b),g=this._createMarker(f);g.setOpacity(.6),a._middleRight=b._middleLeft=g,d=function(){var d=b._index;g._index=d,g.off("click",c).on("click",this._onMarkerClick,this),f.lat=g.getLatLng().lat,f.lng=g.getLatLng().lng,this._poly.spliceLatLngs(d,0,f),this._markers.splice(d,0,g),g.setOpacity(1),this._updateIndexes(d,1),b._index++,this._updatePrevNext(a,g),this._updatePrevNext(g,b)},e=function(){g.off("dragstart",d,this),g.off("dragend",e,this),this._createMiddleMarker(a,g),this._createMiddleMarker(g,b)},c=function(){d.call(this),e.call(this),this._poly.fire("edit")},g.on("click",c,this).on("dragstart",d,this).on("dragend",e,this),this._markerGroup.addLayer(g)},_updatePrevNext:function(a,b){a&&(a._next=b),b&&(b._prev=a)},_getMiddleLatLng:function(a,b){var c=this._poly._map,d=c.latLngToLayerPoint(a.getLatLng()),e=c.latLngToLayerPoint(b.getLatLng());return c.layerPointToLatLng(d._add(e)._divideBy(2))}}),d.Polyline.addInitHook(function(){d.Handler.PolyEdit&&(this.editing=new d.Handler.PolyEdit(this),this.options.editable&&this.editing.enable()),this.on("add",function(){this.editing&&this.editing.enabled()&&this.editing.addHooks()}),this.on("remove",function(){this.editing&&this.editing.enabled()&&this.editing.removeHooks()})}),d.Control=d.Class.extend({options:{position:"topright"},initialize:function(a){d.setOptions(this,a)},getPosition:function(){return this.options.position},setPosition:function(a){var b=this._map;return b&&b.removeControl(this),this.options.position=a,b&&b.addControl(this),this},addTo:function(a){this._map=a;var b=this._container=this.onAdd(a),c=this.getPosition(),e=a._controlCorners[c];return d.DomUtil.addClass(b,"leaflet-control"),-1!==c.indexOf("bottom")?e.insertBefore(b,e.firstChild):e.appendChild(b),this},removeFrom:function(a){var b=this.getPosition(),c=a._controlCorners[b];return c.removeChild(this._container),this._map=null,this.onRemove&&this.onRemove(a),this}}),d.control=function(a){return new d.Control(a)},d.Map.include({addControl:function(a){return a.addTo(this),this},removeControl:function(a){return a.removeFrom(this),this},_initControlPos:function(){function a(a,f){var g=c+a+" "+c+f;b[a+f]=d.DomUtil.create("div",g,e)}var b=this._controlCorners={},c="leaflet-",e=this._controlContainer=d.DomUtil.create("div",c+"control-container",this._container);a("top","left"),a("top","right"),a("bottom","left"),a("bottom","right")}}),d.Control.Zoom=d.Control.extend({options:{position:"topleft"},onAdd:function(a){var b="leaflet-control-zoom",c="leaflet-bar",e=c+"-part",f=d.DomUtil.create("div",b+" "+c);return this._map=a,this._zoomInButton=this._createButton("+","Zoom in",b+"-in "+e+" "+e+"-top",f,this._zoomIn,this),this._zoomOutButton=this._createButton("-","Zoom out",b+"-out "+e+" "+e+"-bottom",f,this._zoomOut,this),a.on("zoomend",this._updateDisabled,this),f},onRemove:function(a){a.off("zoomend",this._updateDisabled,this)},_zoomIn:function(a){this._map.zoomIn(a.shiftKey?3:1)},_zoomOut:function(a){this._map.zoomOut(a.shiftKey?3:1)},_createButton:function(a,b,c,e,f,g){var h=d.DomUtil.create("a",c,e);h.innerHTML=a,h.href="#",h.title=b;var i=d.DomEvent.stopPropagation;return d.DomEvent.on(h,"click",i).on(h,"mousedown",i).on(h,"dblclick",i).on(h,"click",d.DomEvent.preventDefault).on(h,"click",f,g),h},_updateDisabled:function(){var a=this._map,b="leaflet-control-zoom-disabled";d.DomUtil.removeClass(this._zoomInButton,b),d.DomUtil.removeClass(this._zoomOutButton,b),a._zoom===a.getMinZoom()&&d.DomUtil.addClass(this._zoomOutButton,b),a._zoom===a.getMaxZoom()&&d.DomUtil.addClass(this._zoomInButton,b)}}),d.Map.mergeOptions({zoomControl:!0}),d.Map.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new d.Control.Zoom,this.addControl(this.zoomControl))}),d.control.zoom=function(a){return new d.Control.Zoom(a)},d.Control.Attribution=d.Control.extend({options:{position:"bottomright",prefix:'Powered by <a href="http://leafletjs.com">Leaflet</a>'},initialize:function(a){d.setOptions(this,a),this._attributions={}},onAdd:function(a){return this._container=d.DomUtil.create("div","leaflet-control-attribution"),d.DomEvent.disableClickPropagation(this._container),a.on("layeradd",this._onLayerAdd,this).on("layerremove",this._onLayerRemove,this),this._update(),this._container},onRemove:function(a){a.off("layeradd",this._onLayerAdd).off("layerremove",this._onLayerRemove)},setPrefix:function(a){return this.options.prefix=a,this._update(),this},addAttribution:function(a){return a?(this._attributions[a]||(this._attributions[a]=0),this._attributions[a]++,this._update(),this):c},removeAttribution:function(a){return a?(this._attributions[a]--,this._update(),this):c},_update:function(){if(this._map){var a=[];for(var b in this._attributions)this._attributions.hasOwnProperty(b)&&this._attributions[b]&&a.push(b);var c=[];this.options.prefix&&c.push(this.options.prefix),a.length&&c.push(a.join(", ")),this._container.innerHTML=c.join(" &#8212; ")}},_onLayerAdd:function(a){a.layer.getAttribution&&this.addAttribution(a.layer.getAttribution())},_onLayerRemove:function(a){a.layer.getAttribution&&this.removeAttribution(a.layer.getAttribution())}}),d.Map.mergeOptions({attributionControl:!0}),d.Map.addInitHook(function(){this.options.attributionControl&&(this.attributionControl=(new d.Control.Attribution).addTo(this))}),d.control.attribution=function(a){return new d.Control.Attribution(a)},d.Control.Scale=d.Control.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0,updateWhenIdle:!1},onAdd:function(a){this._map=a;var b="leaflet-control-scale",c=d.DomUtil.create("div",b),e=this.options;return this._addScales(e,b,c),a.on(e.updateWhenIdle?"moveend":"move",this._update,this),a.whenReady(this._update,this),c},onRemove:function(a){a.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(a,b,c){a.metric&&(this._mScale=d.DomUtil.create("div",b+"-line",c)),a.imperial&&(this._iScale=d.DomUtil.create("div",b+"-line",c))},_update:function(){var a=this._map.getBounds(),b=a.getCenter().lat,c=6378137*Math.PI*Math.cos(b*Math.PI/180),d=c*(a.getNorthEast().lng-a.getSouthWest().lng)/180,e=this._map.getSize(),f=this.options,g=0;e.x>0&&(g=d*(f.maxWidth/e.x)),this._updateScales(f,g)},_updateScales:function(a,b){a.metric&&b&&this._updateMetric(b),a.imperial&&b&&this._updateImperial(b)},_updateMetric:function(a){var b=this._getRoundNum(a);this._mScale.style.width=this._getScaleWidth(b/a)+"px",this._mScale.innerHTML=1e3>b?b+" m":b/1e3+" km"},_updateImperial:function(a){var b,c,d,e=3.2808399*a,f=this._iScale;e>5280?(b=e/5280,c=this._getRoundNum(b),f.style.width=this._getScaleWidth(c/b)+"px",f.innerHTML=c+" mi"):(d=this._getRoundNum(e),f.style.width=this._getScaleWidth(d/e)+"px",f.innerHTML=d+" ft")},_getScaleWidth:function(a){return Math.round(this.options.maxWidth*a)-10},_getRoundNum:function(a){var b=Math.pow(10,(Math.floor(a)+"").length-1),c=a/b;return c=c>=10?10:c>=5?5:c>=3?3:c>=2?2:1,b*c}}),d.control.scale=function(a){return new d.Control.Scale(a)},d.Control.Layers=d.Control.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0},initialize:function(a,b,c){d.setOptions(this,c),this._layers={},this._lastZIndex=0,this._handlingClick=!1;for(var e in a)a.hasOwnProperty(e)&&this._addLayer(a[e],e);for(e in b)b.hasOwnProperty(e)&&this._addLayer(b[e],e,!0)},onAdd:function(a){return this._initLayout(),this._update(),a.on("layeradd",this._onLayerChange,this).on("layerremove",this._onLayerChange,this),this._container},onRemove:function(a){a.off("layeradd",this._onLayerChange).off("layerremove",this._onLayerChange)},addBaseLayer:function(a,b){return this._addLayer(a,b),this._update(),this},addOverlay:function(a,b){return this._addLayer(a,b,!0),this._update(),this},removeLayer:function(a){var b=d.stamp(a);return delete this._layers[b],this._update(),this},_initLayout:function(){var a="leaflet-control-layers",b=this._container=d.DomUtil.create("div",a);d.Browser.touch?d.DomEvent.on(b,"click",d.DomEvent.stopPropagation):(d.DomEvent.disableClickPropagation(b),d.DomEvent.on(b,"mousewheel",d.DomEvent.stopPropagation));var c=this._form=d.DomUtil.create("form",a+"-list");if(this.options.collapsed){d.DomEvent.on(b,"mouseover",this._expand,this).on(b,"mouseout",this._collapse,this);var e=this._layersLink=d.DomUtil.create("a",a+"-toggle",b);e.href="#",e.title="Layers",d.Browser.touch?d.DomEvent.on(e,"click",d.DomEvent.stopPropagation).on(e,"click",d.DomEvent.preventDefault).on(e,"click",this._expand,this):d.DomEvent.on(e,"focus",this._expand,this),this._map.on("movestart",this._collapse,this)}else this._expand();this._baseLayersList=d.DomUtil.create("div",a+"-base",c),this._separator=d.DomUtil.create("div",a+"-separator",c),this._overlaysList=d.DomUtil.create("div",a+"-overlays",c),b.appendChild(c)},_addLayer:function(a,b,c){var e=d.stamp(a);this._layers[e]={layer:a,name:b,overlay:c},this.options.autoZIndex&&a.setZIndex&&(this._lastZIndex++,a.setZIndex(this._lastZIndex))},_update:function(){if(this._container){this._baseLayersList.innerHTML="",this._overlaysList.innerHTML="";var a=!1,b=!1;for(var c in this._layers)if(this._layers.hasOwnProperty(c)){var d=this._layers[c];this._addItem(d),b=b||d.overlay,a=a||!d.overlay}this._separator.style.display=b&&a?"":"none"}},_onLayerChange:function(a){var b=d.stamp(a.layer);this._layers[b]&&!this._handlingClick&&this._update()},_createRadioElement:function(a,c){var d='<input type="radio" class="leaflet-control-layers-selector" name="'+a+'"';c&&(d+=' checked="checked"'),d+="/>";var e=b.createElement("div");return e.innerHTML=d,e.firstChild},_addItem:function(a){var c,e=b.createElement("label"),f=this._map.hasLayer(a.layer);a.overlay?(c=b.createElement("input"),c.type="checkbox",c.className="leaflet-control-layers-selector",c.defaultChecked=f):c=this._createRadioElement("leaflet-base-layers",f),c.layerId=d.stamp(a.layer),d.DomEvent.on(c,"click",this._onInputClick,this);var g=b.createElement("span");g.innerHTML=" "+a.name,e.appendChild(c),e.appendChild(g);var h=a.overlay?this._overlaysList:this._baseLayersList;return h.appendChild(e),e},_onInputClick:function(){var a,b,c,d,e=this._form.getElementsByTagName("input"),f=e.length;for(this._handlingClick=!0,a=0;f>a;a++)b=e[a],c=this._layers[b.layerId],b.checked&&!this._map.hasLayer(c.layer)?(this._map.addLayer(c.layer),c.overlay||(d=c.layer)):!b.checked&&this._map.hasLayer(c.layer)&&this._map.removeLayer(c.layer);d&&(this._map.setZoom(this._map.getZoom()),this._map.fire("baselayerchange",{layer:d})),this._handlingClick=!1},_expand:function(){d.DomUtil.addClass(this._container,"leaflet-control-layers-expanded")},_collapse:function(){this._container.className=this._container.className.replace(" leaflet-control-layers-expanded","")}}),d.control.layers=function(a,b,c){return new d.Control.Layers(a,b,c)},d.PosAnimation=d.Class.extend({includes:d.Mixin.Events,run:function(a,b,c,e){this.stop(),this._el=a,this._inProgress=!0,this.fire("start"),a.style[d.DomUtil.TRANSITION]="all "+(c||.25)+"s cubic-bezier(0,0,"+(e||.5)+",1)",d.DomEvent.on(a,d.DomUtil.TRANSITION_END,this._onTransitionEnd,this),d.DomUtil.setPosition(a,b),d.Util.falseFn(a.offsetWidth),this._stepTimer=setInterval(d.bind(this.fire,this,"step"),50)},stop:function(){this._inProgress&&(d.DomUtil.setPosition(this._el,this._getPos()),this._onTransitionEnd(),d.Util.falseFn(this._el.offsetWidth))},_transformRe:/(-?[\d\.]+), (-?[\d\.]+)\)/,_getPos:function(){var b,c,e,f=this._el,g=a.getComputedStyle(f);return d.Browser.any3d?(e=g[d.DomUtil.TRANSFORM].match(this._transformRe),b=parseFloat(e[1]),c=parseFloat(e[2])):(b=parseFloat(g.left),c=parseFloat(g.top)),new d.Point(b,c,!0)},_onTransitionEnd:function(){d.DomEvent.off(this._el,d.DomUtil.TRANSITION_END,this._onTransitionEnd,this),this._inProgress&&(this._inProgress=!1,this._el.style[d.DomUtil.TRANSITION]="",clearInterval(this._stepTimer),this.fire("step").fire("end"))}}),d.Map.include({setView:function(a,b,c){b=this._limitZoom(b);var d=this._zoom!==b;if(this._loaded&&!c&&this._layers){this._panAnim&&this._panAnim.stop();var e=d?this._zoomToIfClose&&this._zoomToIfClose(a,b):this._panByIfClose(a);if(e)return clearTimeout(this._sizeTimer),this}return this._resetView(a,b),this},panBy:function(a,b,c){if(a=d.point(a),!a.x&&!a.y)return this;this._panAnim||(this._panAnim=new d.PosAnimation,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),this.fire("movestart"),d.DomUtil.addClass(this._mapPane,"leaflet-pan-anim");var e=d.DomUtil.getPosition(this._mapPane).subtract(a)._round();return this._panAnim.run(this._mapPane,e,b||.25,c),this},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){d.DomUtil.removeClass(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_panByIfClose:function(a){var b=this._getCenterOffset(a)._floor();return this._offsetIsWithinView(b)?(this.panBy(b),!0):!1},_offsetIsWithinView:function(a,b){var c=b||1,d=this.getSize();return Math.abs(a.x)<=d.x*c&&Math.abs(a.y)<=d.y*c}}),d.PosAnimation=d.DomUtil.TRANSITION?d.PosAnimation:d.PosAnimation.extend({run:function(a,b,c,e){this.stop(),this._el=a,this._inProgress=!0,this._duration=c||.25,this._easeOutPower=1/Math.max(e||.5,.2),this._startPos=d.DomUtil.getPosition(a),this._offset=b.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(),this._complete())},_animate:function(){this._animId=d.Util.requestAnimFrame(this._animate,this),this._step()},_step:function(){var a=+new Date-this._startTime,b=1e3*this._duration;b>a?this._runFrame(this._easeOut(a/b)):(this._runFrame(1),this._complete())},_runFrame:function(a){var b=this._startPos.add(this._offset.multiplyBy(a));d.DomUtil.setPosition(this._el,b),this.fire("step")},_complete:function(){d.Util.cancelAnimFrame(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(a){return 1-Math.pow(1-a,this._easeOutPower)}}),d.Map.mergeOptions({zoomAnimation:d.DomUtil.TRANSITION&&!d.Browser.android23&&!d.Browser.mobileOpera}),d.DomUtil.TRANSITION&&d.Map.addInitHook(function(){d.DomEvent.on(this._mapPane,d.DomUtil.TRANSITION_END,this._catchTransitionEnd,this)}),d.Map.include(d.DomUtil.TRANSITION?{_zoomToIfClose:function(a,b){if(this._animatingZoom)return!0;if(!this.options.zoomAnimation)return!1;var c=this.getZoomScale(b),e=this._getCenterOffset(a)._divideBy(1-1/c);if(!this._offsetIsWithinView(e,1))return!1;d.DomUtil.addClass(this._mapPane,"leaflet-zoom-anim"),this.fire("movestart").fire("zoomstart"),this.fire("zoomanim",{center:a,zoom:b});var f=this._getCenterLayerPoint().add(e);return this._prepareTileBg(),this._runAnimation(a,b,c,f),!0},_catchTransitionEnd:function(){this._animatingZoom&&this._onZoomTransitionEnd()},_runAnimation:function(a,b,c,e,f){this._animateToCenter=a,this._animateToZoom=b,this._animatingZoom=!0,d.Draggable&&(d.Draggable._disabled=!0);var g=d.DomUtil.TRANSFORM,h=this._tileBg;clearTimeout(this._clearTileBgTimer),d.Util.falseFn(h.offsetWidth);var i=d.DomUtil.getScaleString(c,e),j=h.style[g];h.style[g]=f?j+" "+i:i+" "+j},_prepareTileBg:function(){var a=this._tilePane,b=this._tileBg;if(b&&this._getLoadedTilesPercentage(b)>.5&&.5>this._getLoadedTilesPercentage(a))return a.style.visibility="hidden",a.empty=!0,this._stopLoadingImages(a),c;b||(b=this._tileBg=this._createPane("leaflet-tile-pane",this._mapPane),b.style.zIndex=1),b.style[d.DomUtil.TRANSFORM]="",b.style.visibility="hidden",b.empty=!0,a.empty=!1,this._tilePane=this._panes.tilePane=b;var e=this._tileBg=a;d.DomUtil.addClass(e,"leaflet-zoom-animated"),this._stopLoadingImages(e)},_getLoadedTilesPercentage:function(a){var b,c,d=a.getElementsByTagName("img"),e=0;for(b=0,c=d.length;c>b;b++)d[b].complete&&e++;return e/c},_stopLoadingImages:function(a){var b,c,e,f=Array.prototype.slice.call(a.getElementsByTagName("img"));for(b=0,c=f.length;c>b;b++)e=f[b],e.complete||(e.onload=d.Util.falseFn,e.onerror=d.Util.falseFn,e.src=d.Util.emptyImageUrl,e.parentNode.removeChild(e))},_onZoomTransitionEnd:function(){this._restoreTileFront(),d.DomUtil.removeClass(this._mapPane,"leaflet-zoom-anim"),d.Util.falseFn(this._tileBg.offsetWidth),this._animatingZoom=!1,this._resetView(this._animateToCenter,this._animateToZoom,!0,!0),d.Draggable&&(d.Draggable._disabled=!1)},_restoreTileFront:function(){this._tilePane.innerHTML="",this._tilePane.style.visibility="",this._tilePane.style.zIndex=2,this._tileBg.style.zIndex=1},_clearTileBg:function(){this._animatingZoom||this.touchZoom._zooming||(this._tileBg.innerHTML="")}}:{}),d.Map.include({_defaultLocateOptions:{watch:!1,setView:!1,maxZoom:1/0,timeout:1e4,maximumAge:0,enableHighAccuracy:!1},locate:function(a){if(a=this._locationOptions=d.extend(this._defaultLocateOptions,a),!navigator.geolocation)return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var b=d.bind(this._handleGeolocationResponse,this),c=d.bind(this._handleGeolocationError,this);return a.watch?this._locationWatchId=navigator.geolocation.watchPosition(b,c,a):navigator.geolocation.getCurrentPosition(b,c,a),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch(this._locationWatchId),this},_handleGeolocationError:function(a){var b=a.code,c=a.message||(1===b?"permission denied":2===b?"position unavailable":"timeout");this._locationOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:b,message:"Geolocation error: "+c+"."})},_handleGeolocationResponse:function(a){var b=180*a.coords.accuracy/4e7,c=2*b,e=a.coords.latitude,f=a.coords.longitude,g=new d.LatLng(e,f),h=new d.LatLng(e-b,f-c),i=new d.LatLng(e+b,f+c),j=new d.LatLngBounds(h,i),k=this._locationOptions;if(k.setView){var l=Math.min(this.getBoundsZoom(j),k.maxZoom);this.setView(g,l)}this.fire("locationfound",{latlng:g,bounds:j,accuracy:a.coords.accuracy})}})}(this,document),function(a,b){"object"==typeof exports?module.exports=b():"function"==typeof define&&define.amd?define(b):a.Spinner=b()}(this,function(){"use strict";function a(a,b){var c,d=document.createElement(a||"div");for(c in b)d[c]=b[c];return d}function b(a){for(var b=1,c=arguments.length;c>b;b++)a.appendChild(arguments[b]);return a}function c(a,b,c,d){var e=["opacity",b,~~(100*a),c,d].join("-"),f=.01+100*(c/d),g=Math.max(1-(1-a)/b*(100-f),a),h=j.substring(0,j.indexOf("Animation")).toLowerCase(),i=h&&"-"+h+"-"||"";return l[e]||(m.insertRule("@"+i+"keyframes "+e+"{"+"0%{opacity:"+g+"}"+f+"%{opacity:"+a+"}"+(f+.01)+"%{opacity:1}"+(f+b)%100+"%{opacity:"+a+"}"+"100%{opacity:"+g+"}"+"}",m.cssRules.length),l[e]=1),e}function d(a,b){var c,d,e=a.style;if(void 0!==e[b])return b;for(b=b.charAt(0).toUpperCase()+b.slice(1),d=0;d<k.length;d++)if(c=k[d]+b,void 0!==e[c])return c}function e(a,b){for(var c in b)a.style[d(a,c)||c]=b[c];return a}function f(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)void 0===a[d]&&(a[d]=c[d])}return a}function g(a){for(var b={x:a.offsetLeft,y:a.offsetTop};a=a.offsetParent;)b.x+=a.offsetLeft,b.y+=a.offsetTop;return b}function h(a){return"undefined"==typeof this?new h(a):(this.opts=f(a||{},h.defaults,n),void 0)}function i(){function c(b,c){return a("<"+b+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',c)}m.addRule(".spin-vml","behavior:url(#default#VML)"),h.prototype.lines=function(a,d){function f(){return e(c("group",{coordsize:j+" "+j,coordorigin:-i+" "+-i}),{width:j,height:j})}function g(a,g,h){b(l,b(e(f(),{rotation:360/d.lines*a+"deg",left:~~g}),b(e(c("roundrect",{arcsize:d.corners}),{width:i,height:d.width,left:d.radius,top:-d.width>>1,filter:h}),c("fill",{color:d.color,opacity:d.opacity}),c("stroke",{opacity:0}))))}var h,i=d.length+d.width,j=2*i,k=2*-(d.width+d.length)+"px",l=e(f(),{position:"absolute",top:k,left:k});if(d.shadow)for(h=1;h<=d.lines;h++)g(h,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(h=1;h<=d.lines;h++)g(h);return b(a,l)},h.prototype.opacity=function(a,b,c,d){var e=a.firstChild;d=d.shadow&&d.lines||0,e&&b+d<e.childNodes.length&&(e=e.childNodes[b+d],e=e&&e.firstChild,e=e&&e.firstChild,e&&(e.opacity=c))}}var j,k=["webkit","Moz","ms","O"],l={},m=function(){var c=a("style",{type:"text/css"});return b(document.getElementsByTagName("head")[0],c),c.sheet||c.styleSheet}(),n={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",direction:1,speed:1,trail:100,opacity:.25,fps:20,zIndex:2e9,className:"spinner",top:"auto",left:"auto",position:"relative"};h.defaults={},f(h.prototype,{spin:function(b){this.stop();var c,d,f=this,h=f.opts,i=f.el=e(a(0,{className:h.className}),{position:h.position,width:0,zIndex:h.zIndex}),k=h.radius+h.length+h.width;if(b&&(b.insertBefore(i,b.firstChild||null),d=g(b),c=g(i),e(i,{left:("auto"==h.left?d.x-c.x+(b.offsetWidth>>1):parseInt(h.left,10)+k)+"px",top:("auto"==h.top?d.y-c.y+(b.offsetHeight>>1):parseInt(h.top,10)+k)+"px"})),i.setAttribute("role","progressbar"),f.lines(i,f.opts),!j){var l,m=0,n=(h.lines-1)*(1-h.direction)/2,o=h.fps,p=o/h.speed,q=(1-h.opacity)/(p*h.trail/100),r=p/h.lines;!function s(){m++;for(var a=0;a<h.lines;a++)l=Math.max(1-(m+(h.lines-a)*r)%p*q,h.opacity),f.opacity(i,a*h.direction+n,l,h);f.timeout=f.el&&setTimeout(s,~~(1e3/o))}()}return f},stop:function(){var a=this.el;return a&&(clearTimeout(this.timeout),a.parentNode&&a.parentNode.removeChild(a),this.el=void 0),this},lines:function(d,f){function g(b,c){return e(a(),{position:"absolute",width:f.length+f.width+"px",height:f.width+"px",background:b,boxShadow:c,transformOrigin:"left",transform:"rotate("+~~(360/f.lines*i+f.rotate)+"deg) translate("+f.radius+"px"+",0)",borderRadius:(f.corners*f.width>>1)+"px"})}for(var h,i=0,k=(f.lines-1)*(1-f.direction)/2;i<f.lines;i++)h=e(a(),{position:"absolute",top:1+~(f.width/2)+"px",transform:f.hwaccel?"translate3d(0,0,0)":"",opacity:f.opacity,animation:j&&c(f.opacity,f.trail,k+i*f.direction,f.lines)+" "+1/f.speed+"s linear infinite"}),f.shadow&&b(h,e(g("#000","0 0 4px #000"),{top:"2px"})),b(d,b(h,g(f.color,"0 0 1px rgba(0,0,0,.1)")));return d},opacity:function(a,b,c){b<a.childNodes.length&&(a.childNodes[b].style.opacity=c)}});var o=e(a("group"),{behavior:"url(#default#VML)"});return!d(o,"transform")&&o.adj?i():j=d(o,"animation"),h}),function(){var a=this,b=a._,c={},d=Array.prototype,e=Object.prototype,f=Function.prototype,g=d.push,h=d.slice,i=d.concat,j=e.toString,k=e.hasOwnProperty,l=d.forEach,m=d.map,n=d.reduce,o=d.reduceRight,p=d.filter,q=d.every,r=d.some,s=d.indexOf,t=d.lastIndexOf,u=Array.isArray,v=Object.keys,w=f.bind,x=function(a){return a instanceof x?a:this instanceof x?(this._wrapped=a,void 0):new x(a)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=x),exports._=x):a._=x,x.VERSION="1.4.4";var y=x.each=x.forEach=function(a,b,d){if(null!=a)if(l&&a.forEach===l)a.forEach(b,d);else if(a.length===+a.length){for(var e=0,f=a.length;f>e;e++)if(b.call(d,a[e],e,a)===c)return}else for(var g in a)if(x.has(a,g)&&b.call(d,a[g],g,a)===c)return};x.map=x.collect=function(a,b,c){var d=[];return null==a?d:m&&a.map===m?a.map(b,c):(y(a,function(a,e,f){d.push(b.call(c,a,e,f))}),d)};var z="Reduce of empty array with no initial value";x.reduce=x.foldl=x.inject=function(a,b,c,d){var e=arguments.length>2;if(null==a&&(a=[]),n&&a.reduce===n)return d&&(b=x.bind(b,d)),e?a.reduce(b,c):a.reduce(b);if(y(a,function(a,f,g){e?c=b.call(d,c,a,f,g):(c=a,e=!0)}),!e)throw new TypeError(z);return c},x.reduceRight=x.foldr=function(a,b,c,d){var e=arguments.length>2;if(null==a&&(a=[]),o&&a.reduceRight===o)return d&&(b=x.bind(b,d)),e?a.reduceRight(b,c):a.reduceRight(b);var f=a.length;if(f!==+f){var g=x.keys(a);f=g.length}if(y(a,function(h,i,j){i=g?g[--f]:--f,e?c=b.call(d,c,a[i],i,j):(c=a[i],e=!0)}),!e)throw new TypeError(z);return c},x.find=x.detect=function(a,b,c){var d;return A(a,function(a,e,f){return b.call(c,a,e,f)?(d=a,!0):void 0}),d},x.filter=x.select=function(a,b,c){var d=[];return null==a?d:p&&a.filter===p?a.filter(b,c):(y(a,function(a,e,f){b.call(c,a,e,f)&&d.push(a)}),d)},x.reject=function(a,b,c){return x.filter(a,function(a,d,e){return!b.call(c,a,d,e)},c)},x.every=x.all=function(a,b,d){b||(b=x.identity);var e=!0;return null==a?e:q&&a.every===q?a.every(b,d):(y(a,function(a,f,g){return(e=e&&b.call(d,a,f,g))?void 0:c}),!!e)};var A=x.some=x.any=function(a,b,d){b||(b=x.identity);var e=!1;return null==a?e:r&&a.some===r?a.some(b,d):(y(a,function(a,f,g){return e||(e=b.call(d,a,f,g))?c:void 0}),!!e)};x.contains=x.include=function(a,b){return null==a?!1:s&&a.indexOf===s?-1!=a.indexOf(b):A(a,function(a){return a===b})},x.invoke=function(a,b){var c=h.call(arguments,2),d=x.isFunction(b);return x.map(a,function(a){return(d?b:a[b]).apply(a,c)})},x.pluck=function(a,b){return x.map(a,function(a){return a[b]})},x.where=function(a,b,c){return x.isEmpty(b)?c?void 0:[]:x[c?"find":"filter"](a,function(a){for(var c in b)if(b[c]!==a[c])return!1;return!0})},x.findWhere=function(a,b){return x.where(a,b,!0)},x.max=function(a,b,c){if(!b&&x.isArray(a)&&a[0]===+a[0]&&a.length<65535)return Math.max.apply(Math,a);if(!b&&x.isEmpty(a))return-1/0;var d={computed:-1/0,value:-1/0};return y(a,function(a,e,f){var g=b?b.call(c,a,e,f):a;g>=d.computed&&(d={value:a,computed:g})}),d.value},x.min=function(a,b,c){if(!b&&x.isArray(a)&&a[0]===+a[0]&&a.length<65535)return Math.min.apply(Math,a);if(!b&&x.isEmpty(a))return 1/0;var d={computed:1/0,value:1/0};return y(a,function(a,e,f){var g=b?b.call(c,a,e,f):a;g<d.computed&&(d={value:a,computed:g})}),d.value},x.shuffle=function(a){var b,c=0,d=[];return y(a,function(a){b=x.random(c++),d[c-1]=d[b],d[b]=a}),d};var B=function(a){return x.isFunction(a)?a:function(b){return b[a]}};x.sortBy=function(a,b,c){var d=B(b);return x.pluck(x.map(a,function(a,b,e){return{value:a,index:b,criteria:d.call(c,a,b,e)}}).sort(function(a,b){var c=a.criteria,d=b.criteria;if(c!==d){if(c>d||void 0===c)return 1;if(d>c||void 0===d)return-1}return a.index<b.index?-1:1}),"value")};var C=function(a,b,c,d){var e={},f=B(null==b?x.identity:b);return y(a,function(b,g){var h=f.call(c,b,g,a);d(e,h,b)}),e};x.groupBy=function(a,b,c){return C(a,b,c,function(a,b,c){(x.has(a,b)?a[b]:a[b]=[]).push(c)})},x.countBy=function(a,b,c){return C(a,b,c,function(a,b){x.has(a,b)||(a[b]=0),a[b]++})},x.sortedIndex=function(a,b,c,d){c=null==c?x.identity:B(c);for(var e=c.call(d,b),f=0,g=a.length;g>f;){var h=f+g>>>1;c.call(d,a[h])<e?f=h+1:g=h}return f},x.toArray=function(a){return a?x.isArray(a)?h.call(a):a.length===+a.length?x.map(a,x.identity):x.values(a):[]},x.size=function(a){return null==a?0:a.length===+a.length?a.length:x.keys(a).length},x.first=x.head=x.take=function(a,b,c){return null==a?void 0:null==b||c?a[0]:h.call(a,0,b)},x.initial=function(a,b,c){return h.call(a,0,a.length-(null==b||c?1:b))},x.last=function(a,b,c){return null==a?void 0:null==b||c?a[a.length-1]:h.call(a,Math.max(a.length-b,0))},x.rest=x.tail=x.drop=function(a,b,c){return h.call(a,null==b||c?1:b)},x.compact=function(a){return x.filter(a,x.identity)};var D=function(a,b,c){return y(a,function(a){x.isArray(a)||x.isArguments(a)?b?g.apply(c,a):D(a,b,c):c.push(a)}),c};x.flatten=function(a,b){return D(a,b,[])},x.without=function(a){return x.difference(a,h.call(arguments,1))},x.uniq=x.unique=function(a,b,c,d){x.isFunction(b)&&(d=c,c=b,b=!1);var e=c?x.map(a,c,d):a,f=[],g=[];return y(e,function(c,d){(b?d&&g[g.length-1]===c:x.contains(g,c))||(g.push(c),f.push(a[d]))}),f},x.union=function(){return x.uniq(x.flatten(arguments,!0))},x.intersection=function(a){var b=h.call(arguments,1);return x.filter(x.uniq(a),function(a){return x.every(b,function(b){return x.indexOf(b,a)>=0})})},x.difference=function(a){var b=i.apply(d,h.call(arguments,1));return x.filter(a,function(a){return!x.contains(b,a)})},x.zip=function(){return x.unzip(h.call(arguments))},x.unzip=function(a){for(var b=x.max(x.pluck(a,"length").concat(0)),c=new Array(b),d=0;b>d;d++)c[d]=x.pluck(a,""+d);return c},x.object=function(a,b){if(null==a)return{};for(var c={},d=0,e=a.length;e>d;d++)b?c[a[d]]=b[d]:c[a[d][0]]=a[d][1];return c},x.indexOf=function(a,b,c){if(null==a)return-1;var d=0,e=a.length;if(c){if("number"!=typeof c)return d=x.sortedIndex(a,b),a[d]===b?d:-1;d=0>c?Math.max(0,e+c):c}if(s&&a.indexOf===s)return a.indexOf(b,c);for(;e>d;d++)if(a[d]===b)return d;return-1},x.lastIndexOf=function(a,b,c){if(null==a)return-1;var d=null!=c;if(t&&a.lastIndexOf===t)return d?a.lastIndexOf(b,c):a.lastIndexOf(b);for(var e=d?c:a.length;e--;)if(a[e]===b)return e;return-1},x.range=function(a,b,c){arguments.length<=1&&(b=a||0,a=0),c=arguments[2]||1;
for(var d=Math.max(Math.ceil((b-a)/c),0),e=0,f=new Array(d);d>e;)f[e++]=a,a+=c;return f};var E=function(){};x.bind=function(a,b){var c,d;if(a.bind===w&&w)return w.apply(a,h.call(arguments,1));if(!x.isFunction(a))throw new TypeError;return c=h.call(arguments,2),d=function(){if(!(this instanceof d))return a.apply(b,c.concat(h.call(arguments)));E.prototype=a.prototype;var e=new E;E.prototype=null;var f=a.apply(e,c.concat(h.call(arguments)));return Object(f)===f?f:e}},x.partial=function(a){var b=h.call(arguments,1);return function(){return a.apply(this,b.concat(h.call(arguments)))}},x.bindAll=function(a){var b=h.call(arguments,1);if(0===b.length)throw new Error("bindAll must be passed function names");return y(b,function(b){a[b]=x.bind(a[b],a)}),a},x.memoize=function(a,b){var c={};return b||(b=x.identity),function(){var d=b.apply(this,arguments);return x.has(c,d)?c[d]:c[d]=a.apply(this,arguments)}},x.delay=function(a,b){var c=h.call(arguments,2);return setTimeout(function(){return a.apply(null,c)},b)},x.defer=function(a){return x.delay.apply(x,[a,1].concat(h.call(arguments,1)))},x.throttle=function(a,b,c){var d,e,f,g,h=0,i=function(){h=new Date,f=null,g=a.apply(d,e)};return function(){var j=new Date;h||c!==!1||(h=j);var k=b-(j-h);return d=this,e=arguments,0>=k?(clearTimeout(f),f=null,h=j,g=a.apply(d,e)):f||(f=setTimeout(i,k)),g}},x.debounce=function(a,b,c){var d,e;return function(){var f=this,g=arguments,h=function(){d=null,c||(e=a.apply(f,g))},i=c&&!d;return clearTimeout(d),d=setTimeout(h,b),i&&(e=a.apply(f,g)),e}},x.once=function(a){var b,c=!1;return function(){return c?b:(c=!0,b=a.apply(this,arguments),a=null,b)}},x.wrap=function(a,b){return function(){var c=[a];return g.apply(c,arguments),b.apply(this,c)}},x.compose=function(){var a=arguments;return function(){for(var b=arguments,c=a.length-1;c>=0;c--)b=[a[c].apply(this,b)];return b[0]}},x.after=function(a,b){return 0>=a?b():function(){return--a<1?b.apply(this,arguments):void 0}},x.keys=v||function(a){if(a!==Object(a))throw new TypeError("Invalid object");var b=[];for(var c in a)x.has(a,c)&&b.push(c);return b},x.values=function(a){var b=[];for(var c in a)x.has(a,c)&&b.push(a[c]);return b},x.pairs=function(a){var b=[];for(var c in a)x.has(a,c)&&b.push([c,a[c]]);return b},x.invert=function(a){var b={};for(var c in a)x.has(a,c)&&(b[a[c]]=c);return b},x.functions=x.methods=function(a){var b=[];for(var c in a)x.isFunction(a[c])&&b.push(c);return b.sort()},x.extend=function(a){return y(h.call(arguments,1),function(b){if(b)for(var c in b)a[c]=b[c]}),a},x.pick=function(a){var b={},c=i.apply(d,h.call(arguments,1));return y(c,function(c){c in a&&(b[c]=a[c])}),b},x.omit=function(a){var b={},c=i.apply(d,h.call(arguments,1));for(var e in a)x.contains(c,e)||(b[e]=a[e]);return b},x.defaults=function(a){return y(h.call(arguments,1),function(b){if(b)for(var c in b)void 0===a[c]&&(a[c]=b[c])}),a},x.clone=function(a){return x.isObject(a)?x.isArray(a)?a.slice():x.extend({},a):a},x.tap=function(a,b){return b(a),a};var F=function(a,b,c,d){if(a===b)return 0!==a||1/a==1/b;if(null==a||null==b)return a===b;a instanceof x&&(a=a._wrapped),b instanceof x&&(b=b._wrapped);var e=j.call(a);if(e!=j.call(b))return!1;switch(e){case"[object String]":return a==String(b);case"[object Number]":return a!=+a?b!=+b:0==a?1/a==1/b:a==+b;case"[object Date]":case"[object Boolean]":return+a==+b;case"[object RegExp]":return a.source==b.source&&a.global==b.global&&a.multiline==b.multiline&&a.ignoreCase==b.ignoreCase}if("object"!=typeof a||"object"!=typeof b)return!1;for(var f=c.length;f--;)if(c[f]==a)return d[f]==b;c.push(a),d.push(b);var g=0,h=!0;if("[object Array]"==e){if(g=a.length,h=g==b.length)for(;g--&&(h=F(a[g],b[g],c,d)););}else{var i=a.constructor,k=b.constructor;if(i!==k&&!(x.isFunction(i)&&i instanceof i&&x.isFunction(k)&&k instanceof k))return!1;for(var l in a)if(x.has(a,l)&&(g++,!(h=x.has(b,l)&&F(a[l],b[l],c,d))))break;if(h){for(l in b)if(x.has(b,l)&&!g--)break;h=!g}}return c.pop(),d.pop(),h};x.isEqual=function(a,b){return F(a,b,[],[])},x.isEmpty=function(a){if(null==a)return!0;if(x.isArray(a)||x.isString(a))return 0===a.length;for(var b in a)if(x.has(a,b))return!1;return!0},x.isElement=function(a){return!(!a||1!==a.nodeType)},x.isArray=u||function(a){return"[object Array]"==j.call(a)},x.isObject=function(a){return a===Object(a)},y(["Arguments","Function","String","Number","Date","RegExp"],function(a){x["is"+a]=function(b){return j.call(b)=="[object "+a+"]"}}),x.isArguments(arguments)||(x.isArguments=function(a){return!(!a||!x.has(a,"callee"))}),"function"!=typeof/./&&(x.isFunction=function(a){return"function"==typeof a}),x.isFinite=function(a){return isFinite(a)&&!isNaN(parseFloat(a))},x.isNaN=function(a){return x.isNumber(a)&&a!=+a},x.isBoolean=function(a){return a===!0||a===!1||"[object Boolean]"==j.call(a)},x.isNull=function(a){return null===a},x.isUndefined=function(a){return void 0===a},x.has=function(a,b){return k.call(a,b)},x.noConflict=function(){return a._=b,this},x.identity=function(a){return a},x.times=function(a,b,c){for(var d=Array(Math.max(0,a)),e=0;a>e;e++)d[e]=b.call(c,e);return d},x.random=function(a,b){return null==b&&(b=a,a=0),a+Math.floor(Math.random()*(b-a+1))};var G={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};G.unescape=x.invert(G.escape);var H={escape:new RegExp("["+x.keys(G.escape).join("")+"]","g"),unescape:new RegExp("("+x.keys(G.unescape).join("|")+")","g")};x.each(["escape","unescape"],function(a){x[a]=function(b){return null==b?"":(""+b).replace(H[a],function(b){return G[a][b]})}}),x.result=function(a,b){if(null==a)return void 0;var c=a[b];return x.isFunction(c)?c.call(a):c},x.mixin=function(a){y(x.functions(a),function(b){var c=x[b]=a[b];x.prototype[b]=function(){var a=[this._wrapped];return g.apply(a,arguments),M.call(this,c.apply(x,a))}})};var I=0;x.uniqueId=function(a){var b=++I+"";return a?a+b:b},x.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var J=/(.)^/,K={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},L=/\\|'|\r|\n|\t|\u2028|\u2029/g;x.template=function(a,b,c){var d;c=x.defaults({},c,x.templateSettings);var e=new RegExp([(c.escape||J).source,(c.interpolate||J).source,(c.evaluate||J).source].join("|")+"|$","g"),f=0,g="__p+='";a.replace(e,function(b,c,d,e,h){return g+=a.slice(f,h).replace(L,function(a){return"\\"+K[a]}),c&&(g+="'+\n((__t=("+c+"))==null?'':_.escape(__t))+\n'"),d&&(g+="'+\n((__t=("+d+"))==null?'':__t)+\n'"),e&&(g+="';\n"+e+"\n__p+='"),f=h+b.length,b}),g+="';\n",c.variable||(g="with(obj||{}){\n"+g+"}\n"),g="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+g+"return __p;\n";try{d=new Function(c.variable||"obj","_",g)}catch(h){throw h.source=g,h}if(b)return d(b,x);var i=function(a){return d.call(this,a,x)};return i.source="function("+(c.variable||"obj")+"){\n"+g+"}",i},x.chain=function(a){return x(a).chain()};var M=function(a){return this._chain?x(a).chain():a};x.mixin(x),y(["pop","push","reverse","shift","sort","splice","unshift"],function(a){var b=d[a];x.prototype[a]=function(){var c=this._wrapped;return b.apply(c,arguments),"shift"!=a&&"splice"!=a||0!==c.length||delete c[0],M.call(this,c)}}),y(["concat","join","slice"],function(a){var b=d[a];x.prototype[a]=function(){return M.call(this,b.apply(this._wrapped,arguments))}}),x.extend(x.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}.call(this),function(a){a.fn.zclip=function(b){if("object"==typeof b&&!b.length){var c=a.extend({path:"ZeroClipboard.swf",copy:null,beforeCopy:null,afterCopy:null,clickAfter:!0,setHandCursor:!0,setCSSEffects:!0},b);return this.each(function(){var b=a(this);if(b.is(":visible")&&("string"==typeof c.copy||a.isFunction(c.copy))){ZeroClipboard.setMoviePath(c.path);var d=new ZeroClipboard.Client;a.isFunction(c.copy)&&b.bind("zClip_copy",c.copy),a.isFunction(c.beforeCopy)&&b.bind("zClip_beforeCopy",c.beforeCopy),a.isFunction(c.afterCopy)&&b.bind("zClip_afterCopy",c.afterCopy),d.setHandCursor(c.setHandCursor),d.setCSSEffects(c.setCSSEffects),d.addEventListener("mouseOver",function(){b.trigger("mouseenter")}),d.addEventListener("mouseOut",function(){b.trigger("mouseleave")}),d.addEventListener("mouseDown",function(){b.trigger("mousedown"),a.isFunction(c.copy)?d.setText(b.triggerHandler("zClip_copy")):d.setText(c.copy),a.isFunction(c.beforeCopy)&&b.trigger("zClip_beforeCopy")}),d.addEventListener("complete",function(d,e){a.isFunction(c.afterCopy)?b.trigger("zClip_afterCopy"):(e.length>500&&(e=e.substr(0,500)+"...\n\n("+(e.length-500)+" characters not shown)"),b.removeClass("hover")),c.clickAfter&&b.trigger("click")}),d.glue(b[0],b.parent()[0]),a(window).bind("load resize",function(){d.reposition()})}})}return"string"==typeof b?this.each(function(){var c=a(this);b=b.toLowerCase();var d=c.data("zclipId"),e=a("#"+d+".zclip");"remove"==b?(e.remove(),c.removeClass("active hover")):"hide"==b?(e.hide(),c.removeClass("active hover")):"show"==b&&e.show()}):void 0}}(jQuery);var ZeroClipboard={version:"1.0.7",clients:{},moviePath:"ZeroClipboard.swf",nextId:1,$:function(a){return"string"==typeof a&&(a=document.getElementById(a)),a.addClass||(a.hide=function(){this.style.display="none"},a.show=function(){this.style.display=""},a.addClass=function(a){this.removeClass(a),this.className+=" "+a},a.removeClass=function(a){for(var b=this.className.split(/\s+/),c=-1,d=0;d<b.length;d++)b[d]==a&&(c=d,d=b.length);return c>-1&&(b.splice(c,1),this.className=b.join(" ")),this},a.hasClass=function(a){return!!this.className.match(new RegExp("\\s*"+a+"\\s*"))}),a},setMoviePath:function(a){this.moviePath=a},dispatch:function(a,b,c){var d=this.clients[a];d&&d.receiveEvent(b,c)},register:function(a,b){this.clients[a]=b},getDOMObjectPosition:function(a,b){var c={left:0,top:0,width:a.width?a.width:a.offsetWidth,height:a.height?a.height:a.offsetHeight};return a&&a!=b&&(c.left+=a.offsetLeft,c.top+=a.offsetTop),c},Client:function(a){this.handlers={},this.id=ZeroClipboard.nextId++,this.movieId="ZeroClipboardMovie_"+this.id,ZeroClipboard.register(this.id,this),a&&this.glue(a)}};ZeroClipboard.Client.prototype={id:0,ready:!1,movie:null,clipText:"",handCursorEnabled:!0,cssEffects:!0,handlers:null,glue:function(a,b,c){this.domElement=ZeroClipboard.$(a);var d=99;this.domElement.style.zIndex&&(d=parseInt(this.domElement.style.zIndex,10)+1),"string"==typeof b?b=ZeroClipboard.$(b):"undefined"==typeof b&&(b=document.getElementsByTagName("body")[0]);var e=ZeroClipboard.getDOMObjectPosition(this.domElement,b);this.div=document.createElement("div"),this.div.className="zclip",this.div.id="zclip-"+this.movieId,$(this.domElement).data("zclipId","zclip-"+this.movieId);var f=this.div.style;if(f.position="absolute",f.left=""+e.left+"px",f.top=""+e.top+"px",f.width=""+e.width+"px",f.height=""+e.height+"px",f.zIndex=d,"object"==typeof c)for(addedStyle in c)f[addedStyle]=c[addedStyle];b.appendChild(this.div),this.div.innerHTML=this.getHTML(e.width,e.height)},getHTML:function(a,b){var c="",d="id="+this.id+"&width="+a+"&height="+b;if(navigator.userAgent.match(/MSIE/)){var e=location.href.match(/^https/i)?"https://":"http://";c+='<object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="'+e+'download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,0,0" width="'+a+'" height="'+b+'" id="'+this.movieId+'" align="middle"><param name="allowScriptAccess" value="always" /><param name="allowFullScreen" value="false" /><param name="movie" value="'+ZeroClipboard.moviePath+'" /><param name="loop" value="false" /><param name="menu" value="false" /><param name="quality" value="best" /><param name="bgcolor" value="#ffffff" /><param name="flashvars" value="'+d+'"/><param name="wmode" value="transparent"/></object>'}else c+='<embed id="'+this.movieId+'" src="'+ZeroClipboard.moviePath+'" loop="false" menu="false" quality="best" bgcolor="#ffffff" width="'+a+'" height="'+b+'" name="'+this.movieId+'" align="middle" allowScriptAccess="always" allowFullScreen="false" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" flashvars="'+d+'" wmode="transparent" />';return c},hide:function(){this.div&&(this.div.style.left="-2000px")},show:function(){this.reposition()},destroy:function(){if(this.domElement&&this.div){this.hide(),this.div.innerHTML="";var a=document.getElementsByTagName("body")[0];try{a.removeChild(this.div)}catch(b){}this.domElement=null,this.div=null}},reposition:function(a){if(a&&(this.domElement=ZeroClipboard.$(a),this.domElement||this.hide()),this.domElement&&this.div){var b=ZeroClipboard.getDOMObjectPosition(this.domElement),c=this.div.style;c.left=""+b.left+"px",c.top=""+b.top+"px"}},setText:function(a){this.clipText=a,this.ready&&this.movie.setText(a)},addEventListener:function(a,b){a=a.toString().toLowerCase().replace(/^on/,""),this.handlers[a]||(this.handlers[a]=[]),this.handlers[a].push(b)},setHandCursor:function(a){this.handCursorEnabled=a,this.ready&&this.movie.setHandCursor(a)},setCSSEffects:function(a){this.cssEffects=!!a},receiveEvent:function(a,b){switch(a=a.toString().toLowerCase().replace(/^on/,"")){case"load":if(this.movie=document.getElementById(this.movieId),!this.movie){var c=this;return setTimeout(function(){c.receiveEvent("load",null)},1),void 0}if(!this.ready&&navigator.userAgent.match(/Firefox/)&&navigator.userAgent.match(/Windows/)){var c=this;return setTimeout(function(){c.receiveEvent("load",null)},100),this.ready=!0,void 0}this.ready=!0;try{this.movie.setText(this.clipText)}catch(d){}try{this.movie.setHandCursor(this.handCursorEnabled)}catch(d){}break;case"mouseover":this.domElement&&this.cssEffects&&(this.domElement.addClass("hover"),this.recoverActive&&this.domElement.addClass("active"));break;case"mouseout":this.domElement&&this.cssEffects&&(this.recoverActive=!1,this.domElement.hasClass("active")&&(this.domElement.removeClass("active"),this.recoverActive=!0),this.domElement.removeClass("hover"));break;case"mousedown":this.domElement&&this.cssEffects&&this.domElement.addClass("active");break;case"mouseup":this.domElement&&this.cssEffects&&(this.domElement.removeClass("active"),this.recoverActive=!1)}if(this.handlers[a])for(var e=0,f=this.handlers[a].length;f>e;e++){var g=this.handlers[a][e];"function"==typeof g?g(this,b):"object"==typeof g&&2==g.length?g[0][g[1]](this,b):"string"==typeof g&&window[g](this,b)}}},function(){function a(){}function b(a,b){this.el=document.createElement("canvas"),this.el.width=a,this.el.height=b,this.el.style.float="left",this.el.style.border="3px solid rgba(0,0,0, 0.2)",this.ctx=this.el.getContext("2d");var c=a;this.value=0,this.max=0,this.min=0,this.pos=0,this.values=[],this.reset=function(){for(var a=0;c>a;++a)this.values[a]=0},this.set_value=function(a){this.value=a,this.values[this.pos]=a,this.pos=(this.pos+1)%c,this.max=a;for(var b=0;c>b;++b){var d=this.values[b];this.max=Math.max(this.max,d)}this.scale=this.max,this.render()},this.render=function(){this.el.width=this.el.width;for(var a=0;c>a;++a){var d=c-a-1,e=(this.pos+d)%c;e=.9*b*this.values[e]/this.scale,this.ctx.fillRect(d,b-e,1,e)}},this.reset()}a.times={},a.new_time=function(b,c){var d=a.times[b]=a.times[b]||{max:0,min:1e7,avg:0,total:0,count:0};d.max=Math.max(d.max,c),d.total+=c,d.min=Math.min(d.min,c),++d.count,d.avg=d.total/d.count,this.callbacks&&this.callbacks[b]&&this.callbacks[b](b,c)},a.new_value=a.new_time,a.print_stats=function(){for(k in a.times){var b=a.times[k];console.log(" === "+k+" === "),console.log(" max: "+b.max),console.log(" min: "+b.min),console.log(" avg: "+b.avg),console.log(" total: "+b.total)}},a.get=function(b){return{t0:null,start:function(){return this.t0=(new Date).getTime(),this},end:function(){null!==this.t0&&(a.new_time(b,this.time=(new Date).getTime()-this.t0),this.t0=null)}}},window.Profiler=a;var c=c||function(a){var b={};return b.el=a.el?a.el:a.clientWidth?a:"<"===a[0]?document.createElement(a.substr(1,a.length-2)):document.getElementById(a),b.append=function(a){return a.el?b.el.appendChild(a.el):b.el.innerHTML+=a,b},b.attr=function(a,b){return this.el.setAttribute(a,b),this},b.css=function(a){for(var c in a)b.el.style[c]=a[c];return b},b.width=function(){return this.el.clientWidth},b.html=function(a){return b.el.innerHTML=a,this},b};a.ui=function(){a.callbacks={};var d;d||(d=c("<div>").css({position:"fixed",bottom:10,left:10,zIndex:2e4,width:c(document.body).width()-80,border:"1px solid #CCC",padding:"10px 30px",backgroundColor:"#fff",fontFamily:"helvetica neue,sans-serif",fontSize:"14px",lineHeight:"1.3em"}),c(document.body).append(d)),this.el=d;var e=function(){for(k in a.times){var e="_prof_time_"+k,f=c(e);if(!f.el){f=c("<div>").attr("id",e),f.css({margin:"0 0 20px 0","border-bottom":"1px solid #EEE"});var g=a.times[k],h=c("<div>").append("<h1>"+k+"</h1>").css({"font-weight":"bold",margin:"10px 0 30px 0"});for(var i in g)f.append(h.append(c("<div>").append('<span style="display: inline-block; width: 60px;font-weight: 300;">'+i+'</span><span style="font-size: 21px" id="'+k+"-"+i+'"></span>').css({padding:"5px 0"})));d.append(f);var j=new b(250,100);f.append(j),a.callbacks[k]=function(a,b){j.set_value(b)}}var g=a.times[k];for(var i in g)c(k+"-"+i).html(g[i].toFixed(2))}};setInterval(function(){e()},1e3)}}(),function(){var a=[];a.push;var b=a.slice;a.splice;var c={on:function(a,b,c){if(!e(this,"on",a,[b,c])||!b)return this;this._events||(this._events={});var d=this._events[a]||(this._events[a]=[]);return d.push({callback:b,context:c,ctx:c||this}),this},once:function(a,b,c){if(!e(this,"once",a,[b,c])||!b)return this;var d=this,f=_.once(function(){d.off(a,f),b.apply(this,arguments)});return f._callback=b,this.on(a,f,c)},off:function(a,b,c){var d,f,g,h,i,j,k,l;if(!this._events||!e(this,"off",a,[b,c]))return this;if(!a&&!b&&!c)return this._events={},this;for(h=a?[a]:_.keys(this._events),i=0,j=h.length;j>i;i++)if(a=h[i],g=this._events[a]){if(this._events[a]=d=[],b||c)for(k=0,l=g.length;l>k;k++)f=g[k],(b&&b!==f.callback&&b!==f.callback._callback||c&&c!==f.context)&&d.push(f);d.length||delete this._events[a]}return this},trigger:function(a){if(!this._events)return this;var c=b.call(arguments,1);if(!e(this,"trigger",a,c))return this;var d=this._events[a],g=this._events.all;return d&&f(d,c),g&&f(g,arguments),this},stopListening:function(a,b,c){var d=this._listeners;if(!d)return this;var e=!b&&!c;"object"==typeof b&&(c=this),a&&((d={})[a._listenerId]=a);for(var f in d)d[f].off(b,c,this),e&&delete this._listeners[f];return this}},d=/\s+/,e=function(a,b,c,e){if(!c)return!0;if("object"==typeof c){for(var f in c)a[b].apply(a,[f,c[f]].concat(e));return!1}if(d.test(c)){for(var g=c.split(d),h=0,i=g.length;i>h;h++)a[b].apply(a,[g[h]].concat(e));return!1}return!0},f=function(a,b){var c,d=-1,e=a.length,f=b[0],g=b[1],h=b[2];switch(b.length){case 0:for(;++d<e;)(c=a[d]).callback.call(c.ctx);return;case 1:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f);return;case 2:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f,g);return;case 3:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f,g,h);return;default:for(;++d<e;)(c=a[d]).callback.apply(c.ctx,b)}},g={listenTo:"on",listenToOnce:"once"};_.each(g,function(a,b){c[b]=function(b,c,d){var e=this._listeners||(this._listeners={}),f=b._listenerId||(b._listenerId=_.uniqueId("l"));return e[f]=b,"object"==typeof c&&(d=this),b[a](c,d,this),this}}),window.Events=c}(),L.Mixin.TileLoader={_initTileLoader:function(){this._tiles={},this._tilesToLoad=0,this._pendingQueue={},this._map.on({moveend:this._updateTiles},this),this._updateTiles()},_removeTileLoader:function(){map.off({moveend:this._updateTiles},this)},_updateTiles:function(){if(this._map){var a=this._map.getPixelBounds(),b=this._map.getZoom(),c=this.options.tileSize;if(!(b>this.options.maxZoom||b<this.options.minZoom)){var d=new L.Point(Math.floor(a.min.x/c),Math.floor(a.min.y/c)),e=new L.Point(Math.floor(a.max.x/c),Math.floor(a.max.y/c)),f=new L.Bounds(d,e);this._addTilesFromCenterOut(f),this._removeOtherTiles(f)}}},_removeOtherTiles:function(a){var b,c,d,e;for(e in this._tiles)this._tiles.hasOwnProperty(e)&&(b=e.split(":"),c=parseInt(b[0],10),d=parseInt(b[1],10),(c<a.min.x||c>a.max.x||d<a.min.y||d>a.max.y)&&this._removeTile(e))},_removeTile:function(a){this.fire("tileRemoved",this._tiles[a]),delete this._tiles[a],delete this._pendingQueue[a]},_tileShouldBeLoaded:function(a){var b=a.x+":"+a.y+":"+a.zoom;return!(b in this._tiles||b in this._pendingQueue)},_tileLoaded:function(a,b){this._tilesToLoad--;var c=a.x+":"+a.y+":"+a.zoom;this._tiles[c]=b,delete this._pendingQueue[c],0===this._tilesToLoad&&(this.fire("tilesLoaded"),this._onTilesFinishLoading&&this._onTilesFinishLoading())},_addTilesFromCenterOut:function(a){var b,c,d,e=[],f=a.getCenter(),g=this._map.getZoom();for(b=a.min.y;b<=a.max.y;b++)for(c=a.min.x;c<=a.max.x;c++)d=new L.Point(c,b),d.zoom=g,this._tileShouldBeLoaded(d)&&e.push(d);var h=e.length;if(0!==h)for(this._onTilesStartLoading&&this._onTilesStartLoading(),e.sort(function(a,b){return a.distanceTo(f)-b.distanceTo(f)}),this._tilesToLoad+=h,c=0;h>c;c++){var d=e[c],i=d.x+":"+d.y+":"+d.zoom;this._pendingQueue[i]=!0,this.fire("tileAdded",d)}},_getTilePos:function(a){var b=this.options.tileSize;return new L.Point(b*a.x,b*a.y)}},L.CanvasLayer=L.Class.extend({includes:[L.Mixin.Events,L.Mixin.TileLoader],options:{minZoom:0,maxZoom:28,tileSize:256,subdomains:"abc",errorTileUrl:"",attribution:"",zoomOffset:0,opacity:1,unloadInvisibleTiles:L.Browser.mobile,updateWhenIdle:L.Browser.mobile},initialize:function(a){this.project=this._project.bind(this),L.Util.setOptions(this,a);var b=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame;window.requestAnimationFrame=b,this._canvasLayers=[],this.previousSize=null},addCanvasLayer:function(){var a=this._map.getSize(),b=document.createElement("canvas");return b.style.position="absolute",this._staticPane.appendChild(b),b.width=a.x,b.height=a.y,this._canvasLayers.push(b),b},onAdd:function(a){this._map=a,this._staticPane=a._createPane("leaflet-tile-pane",a._container),this._canvas=this.addCanvasLayer(),this._ctx=this._canvas.getContext("2d"),this._canvas.style.zIndex="101",this._canvasLayers.push(this._canvas),this._map._panes.canvasPane=this._staticPane,a.on({viewreset:this._reset,move:this._update},this),this._initTileLoader(),this._reset()},draw:function(){return this._reset()},onRemove:function(a){a._container.removeChild(this._staticPane),a.off({viewreset:this._reset,move:this._update},this)},addTo:function(a){return a.addLayer(this),this},setOpacity:function(a){return this.options.opacity=a,this._updateOpacity(),this},bringToFront:function(){return this},bringToBack:function(){return this},_reset:function(){},_project:function(a){var b=this._map.latLngToLayerPoint(new L.LatLng(a[0],a[1]));return[b.x,b.y]},_updateOpacity:function(){},_update:function(){var a=this._map.getSize(),b=this.previousSize;if(!b||b.x!=a.x||b.y!=a.y){this.previousSize=a;for(var c=0;c<this._canvasLayers.length;++c){var d=this._canvasLayers[c];d.width=a.x,d.height=a.y}}},_render:function(){}});var Sprites={render_to_canvas:function(a,b,c){var d=document.createElement("canvas"),e=d.getContext("2d");return d.width=b,d.height=c,a(e,b,c),d},draw_circle_glow_iso:function(a,b,c,d){for(var e,f=a.getImageData(0,0,b,b),g=f.data,h=b>>1,i=b>>1,j=0;b>j;++j)for(var k=0;b>k;++k){e=4*(k*b+j);var l=j-h,m=k-i,n=Math.sqrt(l*l+m*m)/b,o=Math.atan2(m,l);n*=o>0?1+.8*Math.sin(o):1+.3*Math.sin(o),g[e+0]=c[0],g[e+1]=c[1],g[e+2]=c[2],g[e+3]=c[3]*Math.exp(-n*d)}a.putImageData(f,0,0)},draw_circle_glow:function(a,b,c,d){for(var e,f=a.getImageData(0,0,b,b),g=f.data,h=b>>1,i=b>>1,j=0;b>j;++j)for(var k=0;b>k;++k){e=4*(k*b+j);var l=j-h,m=k-i,n=Math.sqrt(l*l+m*m)/b;g[e+0]=c[0],g[e+1]=c[1],g[e+2]=c[2],g[e+3]=c[3]*Math.cos(n*Math.PI),g[e+3]=c[3]*Math.exp(-n*d)}a.putImageData(f,0,0)},circle:function(a,b,c){var d=b>>1,e=2*Math.PI;a.fillStyle="rgba("+c.join(",")+")",a.beginPath(),a.arc(d,d,d,0,e,!0,!0),a.closePath(),a.fill()}};Navigation.prototype={initialize:function(){self=this,$('.dropdown-city-link[data-city="'+this.city+'"]').addClass("selected"),this.$dropdown_link.on("click",function(a){a.preventDefault(),self.$dropdown_link.qtip({overwrite:!1,content:{text:self.$dropdown_nav},position:{my:self.my,at:self.at,adjust:{y:self.y,x:-2}},show:{event:a.type,ready:!0,effect:function(){$(this).show().css("opacity","0").animate({opacity:1},{duration:250})}},hide:{event:"click unfocus",effect:function(){$(this).animate({opacity:0},{duration:250})}},style:{classes:"cities_dropdown",tip:{width:14,height:6,corner:self.my,mimic:"center",offset:10}}})}),$(".city-link").on("click",function(a){var b=$(this).attr("data-city");a.preventDefault(),self.city===b?App.isPlayed?(Events.trigger("enablemamufas"),Events.trigger("resumeanimation")):Events.trigger("enablemamufas",b):($(".dropdown-city-link").removeClass("selected"),$('.dropdown-city-link[data-city="'+b+'"]').addClass("selected"),self.hideDropdown(),self.changeMap(b,this.href))}),Events.on("clickedmap",function(){self.hideDropdown()}),Events.on("scrolledup",function(){self.hideDropdown()}),Events.on("toggledropdowns",function(a){a?(self.my="bottom right",self.at="top right",self.y=20):(self.my="top right",self.at="bottom right",self.y=-20),self.initDropdown(self.my,self.at,self.y)})},initDropdown:function(a,b,c){var d=this;d.$dropdown_link.qtip("option",{"position.my":a,"position.at":b,"position.adjust.y":c,"style.tip.corner":a})},changeMap:function(a,b){this.city=a,Events.trigger("enablemamufas",this.city),history.pushState(window.AppData.CITIES[a],null,b),App.restart(window.AppData.CITIES[a])},hideDropdown:function(){$(".cities_dropdown").qtip("hide")}},Slider.prototype={initialize:function(){var a=this;this.valueStop=0,a.$el.slider(),this._initBindings()},_initBindings:function(){var a=this;$(document).on("mouseup",function(){clicked&&(a.valueStop=a.$el.slider("value"),dragged=!1,clicked=!1,$(this).off("mousemove"))}),this.$el.on("slide",function(b,c){a.onSlideStart(c.value)}).on("slidestop",function(b,c){a.onSlideStop(c.value)}).find("a").on("mousedown",function(){Events.trigger("clickhandle",a.$el.slider("value"))}).on("click",function(){valueStart===a.valueStop&&(stopped?Events.trigger("resumeanimation"):Events.trigger("stopanimation"))}).on("mouseenter",function(){a.$slider_container.addClass("glow")}).on("mouseleave",function(){a.$slider_container.removeClass("glow")}),Events.on("clickhandle",function(b){clicked=!0,valueStart=b,a.$el.addClass("glow"),$(document).on("mousemove",function(){dragged=!0})}),Events.on("disableanimation",function(b,c,d){a.options.city=c,a.options.map=b,Events.trigger("changetime",60*d),a.$el.slider("value",a.timeToPos(60*d)),a.updateOddHour(60*d),a.updateSky(a.timeToPos(60*d))})},onSlideStart:function(a){var b=this.posToTime(a);Events.trigger("changetime",b),this.updateHour(b),this.updateSky(a)},onSlideStop:function(a){var b=this.posToTime(a);this.$el.slider("value",a),Events.trigger("changetime",b),this.updateHour(b),this.updateSky(a)},add_graph:function(a){var b="https://pulsemaps.cartodb.com/api/v2/sql?q=SELECT avg(activity[i]) n, i FROM "+a+", generate_series(1,96) i group by i order by i asc";$.getJSON(b,function(a){a=a.rows.map(function(a){return a.n}),$("#graph").html(graph(a,$("#sky").width(),30,"rgba(0, 0, 0, 0.1)"))})},updateHour:function(a){var b=1e3*60*(new Date).getTimezoneOffset(),c=new Date(this.options.timeMin+1e3*a+b),d=c.getHours(),e=c.getMinutes();0===e%2&&(e=(10>e?"0":"")+e,$("#hour").text(d+":"+e))},updateOddHour:function(a){var b=1e3*60*(new Date).getTimezoneOffset(),c=new Date(this.options.timeMin+1e3*a+b),d=c.getHours(),e=c.getMinutes();e=(10>e?"0":"")+e,$("#hour").text(d+":"+e)},updateSky:function(a){var b=62,c=(a+20)/Math.PI/5,d=(a+70)/Math.PI/5;$("#sun").css({left:62+b*Math.cos(c)+"px",top:125+b*Math.sin(c)+"px"}),$("#moon").css({left:62+b*Math.cos(d)+"px",top:125+b*Math.sin(d)+"px"}),$(".day").css({opacity:Math.sin(a/Math.PI/10)}),$(".night").css({opacity:1-Math.sin(a/Math.PI/10)})},posToTime:function(a){return 60*a*this.options.timeRange/100},timeToPos:function(a){return 100*a/(60*this.options.timeRange)},render:function(){},set_time:function(a){this.$el.slider("value",this.timeToPos(a)),this.updateHour(a),this.updateSky(this.timeToPos(a))},disable:function(){this.$el.off("slide").off("slidestop").find("a").off("mousedown").off("click")}},Mamufas.prototype={initialize:function(){var a=this;this.target=document.getElementById("spinner-container"),this.$spinner_container=$("#spinner-container"),this.spinner=new Spinner(this.spin_opts),$(window).scroll(_.debounce(function(){a._positionScroll()},100)),this.$about_link.on("click",function(b){Events.trigger("disablemamufas"),a._goTo(b,a.$about)}),this.$contest_link.on("click",function(b){Events.trigger("disablemamufas"),a._goTo(b,a.$contest)}),this.$logo.on("click",function(b){a._goTo(b,a.$map_container),Events.trigger("disablemamufas")}),this.$layers.find(".feature").on("mouseenter",function(){for(var a=$(this).attr("data-rel"),b=0;b<$(".layer").length;b++)$(".layer")[b].id!=a&&$($(".layer")[b]).animate({opacity:".2"},{duration:200,queue:!1})}).on("mouseleave",function(){$(".layer").animate({opacity:1},{duration:200,queue:!1})}),Events.on("enablemamufas",function(b){a.isEnabled?a.city!=b&&(a._changeMamufasTitles(b),a._changeCityTitles(b),a.city=b):(a.isEnabled=!0,goTo(a.$map_container),a.$top_nav.removeClass("top"),a.$top_nav.addClass("mapped"),a.$map_container.animate({height:$(window).height()},250,function(){a.$bottom_nav.animate({bottom:"-92px"},250,function(){a.$top_nav.animate({bottom:0},250,function(){a.map.invalidateSize(),App.isLoaded||a.spinner.spin(a.target),App.isPlayed?(a._mamufasOff(),a.$components.fadeIn()):(a.$content.fadeOut(),a._changeMamufasTitles(a.city),a.$mamufas.fadeIn(),a.$components.fadeIn(),a._changeCityTitles(a.city))})})}),$(window).resize(_.debounce(function(){a._resizeMap()},100)),$("body").css("overflow-y","hidden"),Events.trigger("toggledropdowns",!0))}),Events.on("disablemamufas",function(){a.isEnabled=!1,$(window).off("resize"),a.$top_nav.animate({bottom:"-92px"},250,function(){a.$top_nav.removeClass("mapped"),a.$top_nav.addClass("top"),a.$bottom_nav.animate({bottom:0},250,function(){a.$map_container.animate({height:"642px"},250,function(){App.isLoaded||a.spinner.stop(),a.$components.fadeOut(),a.$mamufas.fadeOut(),App.isPlayed?(a.$content.show(),a._mamufasOn()):a.$content.fadeIn()})})}),$("body").css("overflow-y","auto"),Events.trigger("toggledropdowns",!1),history.pushState(window.AppData.CITIES[a.city],null,"/")}),Events.on("disableanimation",function(b,c){a.city=c,a.map=b,a.$spinner_container.removeClass("play").html(""),a.spinner.spin(a.target),a._mamufasOn()}),Events.on("enableanimation",function(){$("#play").off("click"),a._mamufasOff()}),Events.on("stopanimation",function(){a.spinner.stop(),a.$spinner_container.addClass("play").html('<a href="#" id="play">Start simulation</a>'),$("#play").on("click",function(a){a.preventDefault(),Events.trigger("enableanimation")})})},_goTo:function(a,b){a.preventDefault(),goTo(b)},_changeMamufasTitles:function(a){$("#mamufas_title").text(window.AppData.CITIES[a].city_title),$("#city_subtitle").text(window.AppData.CITIES[a].city_subtitle)},_changeCityTitles:function(a){$("#city_name").airport([window.AppData.CITIES[a].city_name]),$("#city_subtitle_small").airport([window.AppData.CITIES[a].city_title]),setTimeout(function(){$("#hour").airport([$("#hour").text()])},100)},_resizeMap:function(){var a=this;this.$map_container.animate({height:$(window).height()},function(){a.map.invalidateSize()})},_positionScroll:function(){$(window).scrollTop()>=this.$map_container.height()?this.$top_nav.animate({top:"0"},100):this.$top_nav.animate({top:"-92px"},100,function(){Events.trigger("scrolledup")})},_mamufasOn:function(){this.$el.fadeIn()},_mamufasOff:function(){this.$el.fadeOut()
}},TimeBasedData.prototype.reset=function(a,b){this.entries=a;var c=this.options.time_column;this.time_index={};for(var d=0;d<this.entries.length;++d){var e=this.entries[d];this.time_index[e[c]]=e}b&&b()},TimeBasedData.prototype.getFortime=function(a){return this.time_index[a]},TimeBasedData.prototype.fetch=function(a){var b=this;this.base_url=this.options.url;var c=this.options.columns.join(","),d=this.options.geometry?" AND the_geom IS NOT NULL":"",e=this.base_url+"?q="+"SELECT "+c+" FROM "+this.options.table+" WHERE city='"+this.options.city+"'"+d;$.getJSON(e,function(c){b.reset(c.rows,a)})};var Bubbles={templates:{markup:"       <div class='bubble'>         <div class='info'>           <a href='#/go' class='go'></a>           <span class='icon type <%= type %>'></span>           <p><%= description %></p>           <span class='tail'></span>         </div>         <div class='shadow'></div>       </div>"},options:{random:!1,horizontalOffset:140,topEdgeMargin:340,animation:{animShowTime:300,animHideTime:600,animDelayTime:3e3,slowShowTime:1e3,slowHideTime:2500,slowShowTime:1800,slowAppTime:1}},states:{0:"_showBubble",1:"_waitBubble",2:"_hideBubble"},el:"#map_components",bubbles:{},initialize:function(a,b){if(!a)throw"you should set map";return this.map=a,this.city=b,this.last_time=0,this.last_active=!1,this.getData(),this._initBindings(),this},_initBindings:function(){var a=this;this.map.on("move",function(){for(var b in a.bubbles){var c=a.bubbles[b];if(c&&c.lat&&c.lon){var d=latlonTo3DPixel(a.map,[c.lat,c.lon]),e=1;if(d.y<a.options.topEdgeMargin){var f=10*(1/(a.options.topEdgeMargin-d.y));e=.08>f?0:f}c.$markup.css({top:d.y-c.$markup.outerHeight(),left:d.x-a.options.horizontalOffset,opacity:e})}}})},getData:function(){this.data=new TimeBasedData({user:"pulsemaps",table:"bubbles",time_column:"time",geometry:!0,city:this.city,columns:["cartodb_id as id","city","st_x(the_geom) as lon","time","st_y(the_geom) as lat","type","description"]}),this.data.fetch()},render:function(){},_emit:function(a){var b;if(this.bubbles[a.id])return!1;if(this.bubbles[a.id]={},this.options.random){if(this.last_active)return this.last_active=!this.last_active,!1;this.last_active=!this.last_active}var c=_.template(this.templates.markup)(a);b=$(c),$(this.el).append(b),b.css({display:"block",opacity:0}),b.css({height:b.find(".info").height()}),b.find(".info").css({position:"absolute"}),this.bubbles[a.id]={$markup:b,lat:a.lat,lon:a.lon,description:a.description};var d=latlonTo3DPixel(this.map,[a.lat,a.lon]);this._bindBubble(a.id),this._showBubble(a.id,d)},_bindBubble:function(a){var b=this;b.bubbles[a].$markup.find(".info").hover(function(){b.bubbles[a].over=!0,b[b.states[b.bubbles[a].state]](a)},function(){b.bubbles[a].over=!1,b[b.states[b.bubbles[a].state]](a)}).on("click",function(){Events.trigger("openshare",b.bubbles[a].description,b.map,b.city,App.time)})},_unbindBubble:function(a){this.bubbles[a]&&this.bubbles[a].$markup.find(".info").off("mouseenter").off("mouseleave").off("click")},_showBubble:function(a,b){var c=this;if(this.bubbles[a].state=0,Events.trigger("changeappscale",this.bubbles[a].over?this.options.animation.slowAppTime:AppData.CITIES[this.city].scale||2),b){var d=parseFloat(this.bubbles[a].$markup.find(".info").css("opacity")),e=1-d,f=1;if(b.y<c.options.topEdgeMargin){var g=10*(1/(c.options.topEdgeMargin-b.y));f=.08>g?0:g}this.bubbles[a].$markup.find(".info").stop(!0).animate({top:0,opacity:f},this.bubbles[a].over?this.options.animation.slowShowTime*e:this.options.animation.animShowTime*e,function(){c._waitBubble(a)}),this.bubbles[a].$markup.find(".shadow").stop(!0).animate({opacity:1},this.bubbles[a].over?this.options.animation.slowShowTime*e:this.options.animation.animShowTime*e),this.bubbles[a].$markup.css({top:b.y-this.bubbles[a].$markup.outerHeight(),left:b.x-this.options.horizontalOffset,display:"block",opacity:1})}},_waitBubble:function(a){var b=this;this.bubbles[a].state=1,Events.trigger("changeappscale",this.bubbles[a].over?this.options.animation.slowAppTime:AppData.CITIES[this.city].scale||2);var c=parseFloat(this.bubbles[a].$markup.find(".info").css("top").replace("px","")),d=1-1*c/10;this.bubbles[a].$markup.find(".info").stop(!0).animate({top:10},this.bubbles[a].over?this.options.animation.slowDelayTime*d:this.options.animation.animDelayTime*d,function(){b._hideBubble(a)})},_hideBubble:function(a){var b=this;this.bubbles[a].state=2,Events.trigger("changeappscale",this.bubbles[a].over?this.options.animation.slowAppTime:AppData.CITIES[this.city].scale||2);var c=parseFloat(this.bubbles[a].$markup.find(".info").css("opacity")),d=c;this.bubbles[a].$markup.find(".info").stop(!0).animate({top:-100,opacity:0},this.bubbles[a].over?this.options.animation.slowHideTime*d:this.options.animation.animHideTime*d,function(){b._removeBubble(a)}),this.bubbles[a].$markup.find(".shadow").stop(!0).animate({opacity:0},this.bubbles[a].over?this.options.animation.slowHideTime:this.options.animation.animHideTime)},_removeBubble:function(a){this.bubbles[a]&&(this.bubbles[a].over&&(Events.trigger("changeappscale",AppData.CITIES[this.city].scale),this.bubbles[a].over=!1),this._unbindBubble(a),this.bubbles[a].$markup.remove(),delete this.bubbles[a])},set_time:function(a){var b=this.data.getFortime(a/60>>0);this.last_time>a&&(this.last_active=!this.last_active),this.last_time=a,b&&this._emit(b)},set_city:function(a){this.city=a,this.data.options.city=a,this.clean(),this.data.fetch()},clean:function(){var a=this;for(var b in this.bubbles)a._removeBubble(b);this.bubbles=[]}},ContextualFacts={templates:{markup:"<div class='facts-inner'><p class='time'><%= description %></p></div>"},options:{showTime:300,hideTime:300,delayTime:3e3},el:"#contextualfacts",contextualFacts:{},initialize:function(a,b){if(!a)throw"you should set map";return this.map=a,this.city=b,this.getData(),this},getData:function(){this.data=new TimeBasedData({user:"pulsemaps",table:"contextualfacts",time_column:"time",city:this.city,geometry:!1,columns:["cartodb_id as id","time","city","description"]}),this.data.fetch()},render:function(){},_emit:function(a){var b=this;if(this.contextualFacts[a.id])return!1;this.contextualFacts[a.id]={};var c=_.template(this.templates.markup)(a),d=$(c);this.contextualFacts[a.id]={$markup:d},$(this.el).append(d),d.css({marginTop:"30px",display:"block",opacity:0}).animate({marginTop:0,opacity:1},this.options.showTime,function(){$(this).delay(b.options.delayTime).animate({marginTop:"-30px",opacity:0},b.options.hideTime,function(){b._removeFact(a.id)})})},_removeFact:function(a){this.contextualFacts[a].$markup.remove(),delete this.contextualFacts[a]},set_time:function(a){var b=this.data.getFortime(a/60>>0);b&&this._emit(b)},set_city:function(a){this.city=a,this.data.options.city=a,this.clean(),this.data.fetch()},clean:function(){for(var a in this.contextualFacts)this.contextualFacts[a].$markup.remove();this.contextualFacts=[]}},POIS={templates:{markup:"      <div class='poi type_<%= type %>'>         <span class='<%= type %>'></span>         <p><strong><%= name %></strong></p>       </div>"},options:{horizontalOffset:0,maxHeight:141,topEdgeMargin:340},el:"#map_components",pois:{},initialize:function(a,b){return this.map=a,this.city=b,this.getData(),this._initBindings(),this._bindStart(),this},_initBindings:function(){var a=this;this.map.on("move",function(){for(var b in a.pois){var c=a.pois[b];if(c){var d=latlonTo3DPixel(a.map,[c.lat,c.lon]),e=1;if(d.y<a.options.topEdgeMargin){var f=10*(1/(a.options.topEdgeMargin-d.y));e=.08>f?0:f}c.$markup.css({top:d.y-a.options.maxHeight/c.heightrank,left:d.x-a.options.horizontalOffset,opacity:e})}}}),this.map.on("zoomend",function(){a._filterPois()})},_filterPois:function(){for(var a in this.pois)this._filterPoi(this.pois[a])},_filterPoi:function(a){var b=window.AppData.CITIES[this.city].map.zoom,c=this.map.getZoom(),d=b==c||b>c?1:5;a.$markup.css("display",d<a.labelrank?"none":"block")},_bindStart:function(){Events.once("animationenabled",this.render,this)},_bindStop:function(){Events.off("animationenabled",this.render,this)},getData:function(){var a=this;this.data=new TimeBasedData({user:"pulsemaps",table:"pois",time_column:"id",city:this.city,geometry:!0,columns:["cartodb_id as id","st_x(the_geom) as lon","st_y(the_geom) as lat","heightrank","labelrank","name","city","type"]}),this.data.fetch(function(){a.render()})},render:function(){var a=this;for(var b in this.data.time_index){var c=a.data.time_index[b];a._emit(c)}},_emit:function(a){var b;if(!this.pois[a.id]){var c=_.template(this.templates.markup)(a),b=$(c);b.height(this.options.maxHeight/a.heightrank),$(this.el).append(b),this.pois[a.id]={$markup:b,lat:a.lat,lon:a.lon,labelrank:a.labelrank,heightrank:a.heightrank},this._filterPoi(this.pois[a.id])}var d=latlonTo3DPixel(this.map,[a.lat,a.lon]);if(b||(b=this.pois[a.id].$markup),d.y<this.options.topEdgeMargin)var e=10*(1/(this.options.topEdgeMargin-d.y)),f=.08>e?0:e;b.css({top:d.y-this.options.maxHeight/a.heightrank,left:d.x-this.options.horizontalOffset,opacity:f}),this._bindPoi(this.pois[a.id])},_bindPoi:function(a){var b=this;a.$markup.find("strong").on("click",function(){Events.trigger("poiclick",a,b.map.getZoom())}),a.$markup.find("span").on("click",function(){Events.trigger("poiclick",a,b.map.getZoom())})},_unbindPoi:function(a){a.$markup.find("strong").off("click"),a.$markup.find("span").off("click")},set_city:function(a){var b=this;this.city=a,this.data.options.city=a,this.clean(),this._bindStart(),this.data.fetch(function(){b.render()})},clean:function(){for(var a in this.pois)this.pois[a].$markup.remove(),this._unbindPoi(this.pois[a]);this.pois=[]}},Share={el:"#share",_visible:!1,options:{bitly:{key:"R_de188fd61320cb55d359b2fecd3dad4b",login:"vizzuality"}},initialize:function(){return this.$el=$(this.el),this.$textarea=$("#textarea"),this._initBindings(),this},_initBindings:function(){Events.on("openshare",this._onOpenShare,this),this.$el.find(".close").on("click",null,this,this._onCloseShare),this.$el.find(".share.facebook").on("click",null,this,this._shareOnFacebook),this.$el.find(".share.twitter").on("click",null,this,this._shareOnTwitter)},_initKeyBindings:function(){$(document).on("keydown",null,this,this._checkKey)},_disableKeyBindings:function(){$(document).off("keydown",this._checkKey)},_shareOnTwitter:function(a){var b=a.data;window.location.href;var c=b.$el.find("textarea").val();$(a.target).attr("href","https://twitter.com/share?url=&text="+c)},_shareOnFacebook:function(a){var b=a.data,c=window.location.href,d=b.$el.find("textarea").val();$(a.target).attr("href","http://www.facebook.com/sharer.php?u="+c+"&text="+d)},_checkKey:function(a){var b=a.which||a.keyCode;if(a){var c=a.data,d=!1;27==b?c._onCloseShare(a):13==b?a.preventDefault():c._checkHeight(),d&&a.stopPropagation()}},_checkHeight:function(){320!=this.$textarea.height()&&this.$textarea.val().length>80&&this.$textarea.animate({height:"320px"},function(){$(".zclip").css("top",$("a.copy").position().top)})},_setText:function(a){var b=this;this.$textarea.val(this._sanitizeText(a)),this.$textarea.attr("disabled",""),this._generateShortUrl(window.location.href,function(c){b.$textarea.val(b._sanitizeText(a+" - "+c)),b.$textarea.removeAttr("disabled")}),this.$textarea.val().length+21>80&&this.$textarea.css({height:"290px"})},_generateShortUrl:function(a,b){$.ajax({url:"https://api-ssl.bitly.com/v3/shorten?longUrl="+encodeURIComponent(a)+"&login="+this.options.bitly.login+"&apiKey="+this.options.bitly.key,type:"GET",async:!1,dataType:"jsonp",success:function(c){if(!c.data.url)throw b&&b(a),new Error("BITLY doesn't allow localhost alone as domain, use localhost.lan for example");b&&b(c.data.url)},error:function(){b&&b(a)}})},_sanitizeText:function(a){return a.replace(/<strong>/g,"").replace(/<\/strong>/g,"").replace(/<i>/g,"").replace(/<\/i>/g,"")},_disableCopy:function(){this.$el.find("a.copy").zclip("remove")},_enableCopy:function(){var a=this;setTimeout(function(){a.$el.find("a.copy").zclip({path:"/flash/ZeroClipboard.swf",copy:function(){return $(this).text("Copied!"),a.$el.find("textarea").val()}})},1e3)},_onOpenShare:function(a){Events.trigger("stopanimation"),this._setText(a),this._initKeyBindings(),this._enableCopy(),this.show()},_onCloseShare:function(a){var b=a.data;a.preventDefault(),b.hide(),b._disableCopy(),b._disableKeyBindings(),Events.trigger("resumeanimation"),setTimeout(function(){b.$textarea.css({height:"175px"}),$("a.copy").text("Copy Link")},1e3)},hide:function(){this.$el.fadeOut(),this._visible=!1},show:function(){this.$el.fadeIn(),this._visible=!0},visible:function(){return this._visible}},Zoom={el:"#zoom_control",initialize:function(a,b){this.map=a,this.city=b,this.$el=$(this.el),this.$zoomIn=$(".zoomIn"),this.$zoomOut=$(".zoomOut"),this._initBindings()},_initBindings:function(){this.map.doubleClickZoom.disable(),this._checkMaxMin(this.map.getZoom()),this.$el.find("a.zoomIn").on("click",null,this,this._onZoomIn),this.$el.find("a.zoomOut").on("click",null,this,this._onZoomOut),this.$el.find("a.zoomIn, a.zoomOut").on("hover",this._stopPropagation),Events.on("dblclickedmap",this._onDblClickZoomIn,this),Events.on("poiclick",this._onPoiClick,this)},_onDblClickZoomIn:function(a){a.preventDefault();var b=this,c=window.AppData.CITIES[b.city].map.maxZoom;if(b.map.getZoom()<c){var d=b.map.getZoom()+1;stopped?updateHash(b.map,b.city,App.time,d):updateHash(b.map,b.city,window.AppData.init_time,d),b._checkMaxMin(d),b.map.zoomIn()}},_onPoiClick:function(a,b){var c=this,d=window.AppData.CITIES[c.city].map.maxZoom;if(c.map.getZoom()<d){var b=c.map.getZoom()+1;stopped?updateHash(c.map,c.city,App.time,b):updateHash(c.map,c.city,window.AppData.init_time,b),c._checkMaxMin(b),c.map.setView([a.lat,a.lon],b),c.map.zoomIn()}else c.map.setView([a.lat,a.lon],b)},_onZoomIn:function(a){a.preventDefault();var b=a.data,c=window.AppData.CITIES[b.city].map.maxZoom;if(b.map.getZoom()<c){var d=b.map.getZoom()+1;stopped?updateHash(b.map,b.city,App.time,d):updateHash(b.map,b.city,window.AppData.init_time,d),b._checkMaxMin(d),b.map.zoomIn()}},_onZoomOut:function(a){a.preventDefault();var b=a.data,c=window.AppData.CITIES[b.city].map.minZoom;if(b.map.getZoom()>c){var d=b.map.getZoom()-1;stopped?updateHash(b.map,b.city,App.time,d):updateHash(b.map,b.city,window.AppData.init_time,d),b._checkMaxMin(d),b.map.zoomOut()}},_checkMaxMin:function(a){a>window.AppData.CITIES[this.city].map.minZoom?this._enableZoomOut():a===window.AppData.CITIES[this.city].map.minZoom&&this._disableZoomOut(),a<window.AppData.CITIES[this.city].map.maxZoom?this._enableZoomIn():a===window.AppData.CITIES[this.city].map.maxZoom&&this._disableZoomIn()},_enableZoomIn:function(){this.$zoomIn.removeClass("disabled")},_disableZoomIn:function(){this.$zoomIn.addClass("disabled")},_enableZoomOut:function(){this.$zoomOut.removeClass("disabled")},_disableZoomOut:function(){this.$zoomOut.addClass("disabled")},_stopPropagation:function(a){a.preventDefault(),a.stopPropagation()},set_city:function(a,b){this.city=a,this.map=b,this._checkMaxMin(this.map.getZoom())}};Map.prototype={templates:{gradients:'<div class="edge top"></div><div class="edge top night"></div><div class="edge right"></div><div class="edge right night"></div><div class="edge left"></div><div class="edge left night"></div>'},initialize:function(){this.options.fadeAnimation=!1,this.options.trackResize=!0,this.map=L.map(this.el,this.options).setView(this.options.center,this.options.zoom),this._addLayers(),this._addBindings()},_addLayers:function(){var a=this;a.probsLayer=new StreetLayer({table:this.options.city+"_manydays_live",time_offset:this.options.time_offset,reduction:this.options.reduction}),a.map.addLayer(a.probsLayer),this.set_gradients()},_addBindings:function(){var a=this;this.map.on("mousedown",function(){Events.trigger("clickedmap")}).on("dragstart",function(){this.isDragging=!0}).on("dragend",function(){this.isDragging=!1,stopped?updateHash(this,a.options.city,App.time):updateHash(this,a.options.city,0)}).on("dblclick",function(a){console.log(a),Events.trigger("dblclickedmap",a.originalEvent)}).on("scrollWheelZoom",function(a){console.log(a)})},set_gradients:function(){$(this.map.getPanes().canvasPane).append(this.templates.gradients)},set_time:function(a){this.probsLayer&&this.probsLayer.set_time(a)},set_city:function(a,b,c,d,e){this.options.city=c,this.options.time_offset=d,this.probsLayer&&this.probsLayer.setCity(c,d,e),this.map.setView(a,b)},render:function(){this.probsLayer&&this.probsLayer._render()}};var App={animables:[],old_time:0,time:0,init_time:window.AppData.init_time,last_time:window.AppData.last_time,vendorHidden:"",vendorVisibilitychange:"",isLoaded:!1,isPlayed:!1,initialize:function(a){var b=this;this.options=_.extend({},a);var c=isSlowBrowser?this.options.reductionSlowBrowser||0:0;this.map=new Map("map",{zoomControl:!1,scrollWheelZoom:!1,center:this.options.map.center,zoom:this.options.map.zoom,minZoom:this.options.map.minZoom,maxZoom:this.options.map.maxZoom,city:this.options.city,time_offset:this.options.time_offset,reduction:c}),this.mamufas=new Mamufas($(".mamufas"),this.map.map,this.options.city),this.navigation=new Navigation($("#cities_dropdown"),this.options.city),this.slider=new Slider($("#time_slider"),{timeMin:new Date(this.init_time).getTime(),timeRange:1*(this.last_time-this.init_time),map:this.map.map,city:this.options.city}),Zoom.initialize(this.map.map,this.options.city),Bubbles.initialize(this.map.map,this.options.city),ContextualFacts.initialize(this.map.map,this.options.city),POIS.initialize(this.map.map,this.options.city),Share.initialize(),this._initBindings(),this.animables.push(this.map,this.slider,Bubbles,ContextualFacts),this._tick=this._tick.bind(this),requestAnimationFrame(this._tick),-1!=location.search.indexOf("debug")&&setTimeout(function(){b.add_debug()},4e3),0!=this.options.time&&Events.trigger("disableanimation",this.map.map,this.options.city,this.options.time),Events.on("finish_loading",function(){b.isLoaded=!0,Events.trigger("stopanimation")})},_initBindings:function(){var a=this;Events.on("enableanimation",this._onEnableAnimation,this),Events.on("disableanimation",this._onDisableAnimation,this),Events.on("resumeanimation",this._onResumeAnimation,this),Events.on("stopanimation",this._onStopAnimation,this),Events.on("toggledropdowns",function(a){a||(stopped=!0,$(".ui-slider-handle").addClass("stopped"))}),Events.on("changetime",function(b){a.time=b>>0}),Events.on("changeappscale",function(a){this.options.scale=a||2},this)},_onEnableAnimation:function(){Events.off("finish_loading"),this.isPlayed=!0,this.detectHiddenFeature()&&document.addEventListener(this.vendorVisibilitychange,this.visibilityChanged),$(document).on("keyup",function(a){32===a.keyCode&&(stopped||Share.visible()?Share.visible()||Events.trigger("resumeanimation"):Events.trigger("stopanimation"))}),Events.trigger("resumeanimation")},_onDisableAnimation:function(){$(document).off("keyup")},_onResumeAnimation:function(){stopped=!1,$(".ui-slider-handle").removeClass("stopped"),updateHash(this.map.map,this.options.city,window.AppData.init_time)},_onStopAnimation:function(){stopped=!0,$(".ui-slider-handle").addClass("stopped"),this.isPlayed&&updateHash(this.map.map,this.options.city,App.time)},detectHiddenFeature:function(){return"undefined"!=typeof document.hidden?(this.vendorHidden="hidden",this.vendorVisibilitychange="visibilitychange",!0):"undefined"!=typeof document.msHidden?(this.vendorHidden="msHidden",this.vendorVisibilitychange="msvisibilitychange",!0):"undefined"!=typeof document.webkitHidden?(this.vendorHidden="webkitHidden",this.vendorVisibilitychange="webkitvisibilitychange",!0):!1},_tick:function(){this.tick(),requestAnimationFrame(this._tick)},tick:function(){var a=this.animables,b=(new Date).getTime(),c=.001*(b-this.old_time);if(c=c*this.options.scale*this.options.time_scale,c=Math.min(900,c),this.old_time=b,stopped||clicked){if(dragged)for(var d=0;d<a.length;++d){var e=a[d];e.set_time(this.time),e.render()}}else{this.time+=c,this.time/60>=this.last_time&&(this.time=0);for(var d=0;d<a.length;++d){var e=a[d];e.set_time(this.time),e.render()}}},add_debug:function(){var a=new dat.GUI,b=this.map.probsLayer.render_options;a.add(this.options,"scale",0,10);var c=a.addFolder("particles");c.add(b,"part_min_size",.2,40).onChange(this.map.probsLayer.precache_sprites),c.add(b,"part_inc",0,70).onChange(this.map.probsLayer.precache_sprites),c.add(b,"min_alpha",0,.3).onChange(this.map.probsLayer.precache_sprites),c.add(b,"alpha_inc",0,.5).onChange(this.map.probsLayer.precache_sprites),c.add(b,"part_type",["sphere","glow"]).onChange(this.map.probsLayer.precache_sprites),c.addColor(b,"part_color").onChange(this.map.probsLayer.precache_sprites),c.open();var d=a.addFolder("Postprocess");d.add(b,"post_alpha",0,1),d.add(b,"post_decay",0,1),d.add(b,"post_size",[64,128,256,512,1024]).onChange(this.map.probsLayer.init_post_process),d.add(b,"post_process"),d.open()},restart:function(a){var b=this;this.old_time=0,this.time=0,this.isLoaded=!1,this.isPlayed=!1,dragged=!1,clicked=!1,stopped=!0,_.extend(this.options,a),city=this.options.city,this.map.map.options.minZoom=this.options.map.minZoom,this.map.map.options.maxZoom=this.options.map.maxZoom;var c=isSlowBrowser?this.options.reductionSlowBrowser||0:0;this.map.set_city(this.options.map.center,this.options.map.zoom,this.options.city,this.options.time_offset,c),Bubbles.set_city(this.options.city),ContextualFacts.set_city(this.options.city),POIS.set_city(this.options.city),Zoom.set_city(this.options.city,b.map.map),Events.trigger("disableanimation",b.map.map,b.options.city,b.options.time),Events.on("finish_loading",function(){b.isLoaded=!0,Events.trigger("stopanimation")})}},city="london",dragged=!1,clicked=!1,stopped=!0,valueStart=0,isSlowBrowser=!1;$(document).ready(function(){(navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i))&&(document.location="/mobile.html");var a=location.hash.split("#").pop();0===a.length?App.initialize(window.AppData.CITIES[city]):(App.initialize(parseHash(a)),Events.trigger("enablemamufas"))});